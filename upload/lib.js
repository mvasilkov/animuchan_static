var Box2D={};(function(t,e){function i(){}!(Object.prototype.defineProperty instanceof Function)&&Object.prototype.__defineGetter__ instanceof Function&&Object.prototype.__defineSetter__ instanceof Function&&(Object.defineProperty=function(t,e,i){i.get instanceof Function&&t.__defineGetter__(e,i.get),i.set instanceof Function&&t.__defineSetter__(e,i.set)}),t.inherit=function(t,e){var o=t;i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=o},t.generateCallback=function(t,e){return function(){e.apply(t,arguments)}},t.NVector=function(t){t===e&&(t=0);for(var i=Array(t||0),o=0;t>o;++o)i[o]=0;return i},t.is=function(t,i){return null===t?!1:i instanceof Function&&t instanceof i?!0:t.constructor.__implements!=e&&t.constructor.__implements[i]?!0:!1},t.parseUInt=function(t){return Math.abs(parseInt(t))}})(Box2D);var Vector=Array,Vector_a2j_Number=Box2D.NVector;Box2D===void 0&&(Box2D={}),Box2D.Collision===void 0&&(Box2D.Collision={}),Box2D.Collision.Shapes===void 0&&(Box2D.Collision.Shapes={}),Box2D.Common===void 0&&(Box2D.Common={}),Box2D.Common.Math===void 0&&(Box2D.Common.Math={}),Box2D.Dynamics===void 0&&(Box2D.Dynamics={}),Box2D.Dynamics.Contacts===void 0&&(Box2D.Dynamics.Contacts={}),Box2D.Dynamics.Controllers===void 0&&(Box2D.Dynamics.Controllers={}),Box2D.Dynamics.Joints===void 0&&(Box2D.Dynamics.Joints={}),function(){function t(){t.b2AABB.apply(this,arguments)}function e(){e.b2Bound.apply(this,arguments)}function i(){i.b2BoundValues.apply(this,arguments),this.constructor===i&&this.b2BoundValues.apply(this,arguments)}function o(){o.b2Collision.apply(this,arguments)}function n(){n.b2ContactID.apply(this,arguments),this.constructor===n&&this.b2ContactID.apply(this,arguments)}function s(){s.b2ContactPoint.apply(this,arguments)}function r(){r.b2Distance.apply(this,arguments)}function a(){a.b2DistanceInput.apply(this,arguments)}function l(){l.b2DistanceOutput.apply(this,arguments)}function c(){c.b2DistanceProxy.apply(this,arguments)}function m(){m.b2DynamicTree.apply(this,arguments),this.constructor===m&&this.b2DynamicTree.apply(this,arguments)}function u(){u.b2DynamicTreeBroadPhase.apply(this,arguments)}function h(){h.b2DynamicTreeNode.apply(this,arguments)}function p(){p.b2DynamicTreePair.apply(this,arguments)}function _(){_.b2Manifold.apply(this,arguments),this.constructor===_&&this.b2Manifold.apply(this,arguments)}function y(){y.b2ManifoldPoint.apply(this,arguments),this.constructor===y&&this.b2ManifoldPoint.apply(this,arguments)}function f(){f.b2Point.apply(this,arguments)}function d(){d.b2RayCastInput.apply(this,arguments),this.constructor===d&&this.b2RayCastInput.apply(this,arguments)}function x(){x.b2RayCastOutput.apply(this,arguments)}function v(){v.b2Segment.apply(this,arguments)}function b(){b.b2SeparationFunction.apply(this,arguments)}function g(){g.b2Simplex.apply(this,arguments),this.constructor===g&&this.b2Simplex.apply(this,arguments)}function D(){D.b2SimplexCache.apply(this,arguments)}function C(){C.b2SimplexVertex.apply(this,arguments)}function B(){B.b2TimeOfImpact.apply(this,arguments)}function w(){w.b2TOIInput.apply(this,arguments)}function S(){S.b2WorldManifold.apply(this,arguments),this.constructor===S&&this.b2WorldManifold.apply(this,arguments)}function A(){A.ClipVertex.apply(this,arguments)}function M(){M.Features.apply(this,arguments)}function V(){V.b2CircleShape.apply(this,arguments),this.constructor===V&&this.b2CircleShape.apply(this,arguments)}function T(){T.b2EdgeChainDef.apply(this,arguments),this.constructor===T&&this.b2EdgeChainDef.apply(this,arguments)}function I(){I.b2EdgeShape.apply(this,arguments),this.constructor===I&&this.b2EdgeShape.apply(this,arguments)}function L(){L.b2MassData.apply(this,arguments)}function P(){P.b2PolygonShape.apply(this,arguments),this.constructor===P&&this.b2PolygonShape.apply(this,arguments)}function F(){F.b2Shape.apply(this,arguments),this.constructor===F&&this.b2Shape.apply(this,arguments)}function G(){G.b2Color.apply(this,arguments),this.constructor===G&&this.b2Color.apply(this,arguments)}function k(){k.b2Settings.apply(this,arguments)}function J(){J.b2Mat22.apply(this,arguments),this.constructor===J&&this.b2Mat22.apply(this,arguments)}function R(){R.b2Mat33.apply(this,arguments),this.constructor===R&&this.b2Mat33.apply(this,arguments)}function N(){N.b2Math.apply(this,arguments)}function E(){E.b2Sweep.apply(this,arguments)}function O(){O.b2Transform.apply(this,arguments),this.constructor===O&&this.b2Transform.apply(this,arguments)}function j(){j.b2Vec2.apply(this,arguments),this.constructor===j&&this.b2Vec2.apply(this,arguments)}function z(){z.b2Vec3.apply(this,arguments),this.constructor===z&&this.b2Vec3.apply(this,arguments)}function q(){q.b2Body.apply(this,arguments),this.constructor===q&&this.b2Body.apply(this,arguments)}function H(){H.b2BodyDef.apply(this,arguments),this.constructor===H&&this.b2BodyDef.apply(this,arguments)}function $(){$.b2ContactFilter.apply(this,arguments)}function W(){W.b2ContactImpulse.apply(this,arguments)}function U(){U.b2ContactListener.apply(this,arguments)}function K(){K.b2ContactManager.apply(this,arguments),this.constructor===K&&this.b2ContactManager.apply(this,arguments)}function X(){X.b2DebugDraw.apply(this,arguments),this.constructor===X&&this.b2DebugDraw.apply(this,arguments)}function Z(){Z.b2DestructionListener.apply(this,arguments)}function Q(){Q.b2FilterData.apply(this,arguments)}function Y(){Y.b2Fixture.apply(this,arguments),this.constructor===Y&&this.b2Fixture.apply(this,arguments)}function te(){te.b2FixtureDef.apply(this,arguments),this.constructor===te&&this.b2FixtureDef.apply(this,arguments)}function ee(){ee.b2Island.apply(this,arguments),this.constructor===ee&&this.b2Island.apply(this,arguments)}function ie(){ie.b2TimeStep.apply(this,arguments)}function oe(){oe.b2World.apply(this,arguments),this.constructor===oe&&this.b2World.apply(this,arguments)}function ne(){ne.b2CircleContact.apply(this,arguments)}function se(){se.b2Contact.apply(this,arguments),this.constructor===se&&this.b2Contact.apply(this,arguments)}function re(){re.b2ContactConstraint.apply(this,arguments),this.constructor===re&&this.b2ContactConstraint.apply(this,arguments)}function ae(){ae.b2ContactConstraintPoint.apply(this,arguments)}function le(){le.b2ContactEdge.apply(this,arguments)}function ce(){ce.b2ContactFactory.apply(this,arguments),this.constructor===ce&&this.b2ContactFactory.apply(this,arguments)}function me(){me.b2ContactRegister.apply(this,arguments)}function ue(){ue.b2ContactResult.apply(this,arguments)}function he(){he.b2ContactSolver.apply(this,arguments),this.constructor===he&&this.b2ContactSolver.apply(this,arguments)}function pe(){pe.b2EdgeAndCircleContact.apply(this,arguments)}function _e(){_e.b2NullContact.apply(this,arguments),this.constructor===_e&&this.b2NullContact.apply(this,arguments)}function ye(){ye.b2PolyAndCircleContact.apply(this,arguments)}function fe(){fe.b2PolyAndEdgeContact.apply(this,arguments)}function de(){de.b2PolygonContact.apply(this,arguments)}function xe(){xe.b2PositionSolverManifold.apply(this,arguments),this.constructor===xe&&this.b2PositionSolverManifold.apply(this,arguments)}function ve(){ve.b2BuoyancyController.apply(this,arguments)}function be(){be.b2ConstantAccelController.apply(this,arguments)}function ge(){ge.b2ConstantForceController.apply(this,arguments)}function De(){De.b2Controller.apply(this,arguments)}function Ce(){Ce.b2ControllerEdge.apply(this,arguments)}function Be(){Be.b2GravityController.apply(this,arguments)}function we(){we.b2TensorDampingController.apply(this,arguments)}function Se(){Se.b2DistanceJoint.apply(this,arguments),this.constructor===Se&&this.b2DistanceJoint.apply(this,arguments)}function Ae(){Ae.b2DistanceJointDef.apply(this,arguments),this.constructor===Ae&&this.b2DistanceJointDef.apply(this,arguments)}function Me(){Me.b2FrictionJoint.apply(this,arguments),this.constructor===Me&&this.b2FrictionJoint.apply(this,arguments)}function Ve(){Ve.b2FrictionJointDef.apply(this,arguments),this.constructor===Ve&&this.b2FrictionJointDef.apply(this,arguments)}function Te(){Te.b2GearJoint.apply(this,arguments),this.constructor===Te&&this.b2GearJoint.apply(this,arguments)}function Ie(){Ie.b2GearJointDef.apply(this,arguments),this.constructor===Ie&&this.b2GearJointDef.apply(this,arguments)}function Le(){Le.b2Jacobian.apply(this,arguments)}function Pe(){Pe.b2Joint.apply(this,arguments),this.constructor===Pe&&this.b2Joint.apply(this,arguments)}function Fe(){Fe.b2JointDef.apply(this,arguments),this.constructor===Fe&&this.b2JointDef.apply(this,arguments)}function Ge(){Ge.b2JointEdge.apply(this,arguments)}function ke(){ke.b2LineJoint.apply(this,arguments),this.constructor===ke&&this.b2LineJoint.apply(this,arguments)}function Je(){Je.b2LineJointDef.apply(this,arguments),this.constructor===Je&&this.b2LineJointDef.apply(this,arguments)}function Re(){Re.b2MouseJoint.apply(this,arguments),this.constructor===Re&&this.b2MouseJoint.apply(this,arguments)}function Ne(){Ne.b2MouseJointDef.apply(this,arguments),this.constructor===Ne&&this.b2MouseJointDef.apply(this,arguments)}function Ee(){Ee.b2PrismaticJoint.apply(this,arguments),this.constructor===Ee&&this.b2PrismaticJoint.apply(this,arguments)}function Oe(){Oe.b2PrismaticJointDef.apply(this,arguments),this.constructor===Oe&&this.b2PrismaticJointDef.apply(this,arguments)}function je(){je.b2PulleyJoint.apply(this,arguments),this.constructor===je&&this.b2PulleyJoint.apply(this,arguments)}function ze(){ze.b2PulleyJointDef.apply(this,arguments),this.constructor===ze&&this.b2PulleyJointDef.apply(this,arguments)}function qe(){qe.b2RevoluteJoint.apply(this,arguments),this.constructor===qe&&this.b2RevoluteJoint.apply(this,arguments)}function He(){He.b2RevoluteJointDef.apply(this,arguments),this.constructor===He&&this.b2RevoluteJointDef.apply(this,arguments)}function $e(){$e.b2WeldJoint.apply(this,arguments),this.constructor===$e&&this.b2WeldJoint.apply(this,arguments)}function We(){We.b2WeldJointDef.apply(this,arguments),this.constructor===We&&this.b2WeldJointDef.apply(this,arguments)}Box2D.Collision.IBroadPhase="Box2D.Collision.IBroadPhase",Box2D.Collision.b2AABB=t,Box2D.Collision.b2Bound=e,Box2D.Collision.b2BoundValues=i,Box2D.Collision.b2Collision=o,Box2D.Collision.b2ContactID=n,Box2D.Collision.b2ContactPoint=s,Box2D.Collision.b2Distance=r,Box2D.Collision.b2DistanceInput=a,Box2D.Collision.b2DistanceOutput=l,Box2D.Collision.b2DistanceProxy=c,Box2D.Collision.b2DynamicTree=m,Box2D.Collision.b2DynamicTreeBroadPhase=u,Box2D.Collision.b2DynamicTreeNode=h,Box2D.Collision.b2DynamicTreePair=p,Box2D.Collision.b2Manifold=_,Box2D.Collision.b2ManifoldPoint=y,Box2D.Collision.b2Point=f,Box2D.Collision.b2RayCastInput=d,Box2D.Collision.b2RayCastOutput=x,Box2D.Collision.b2Segment=v,Box2D.Collision.b2SeparationFunction=b,Box2D.Collision.b2Simplex=g,Box2D.Collision.b2SimplexCache=D,Box2D.Collision.b2SimplexVertex=C,Box2D.Collision.b2TimeOfImpact=B,Box2D.Collision.b2TOIInput=w,Box2D.Collision.b2WorldManifold=S,Box2D.Collision.ClipVertex=A,Box2D.Collision.Features=M,Box2D.Collision.Shapes.b2CircleShape=V,Box2D.Collision.Shapes.b2EdgeChainDef=T,Box2D.Collision.Shapes.b2EdgeShape=I,Box2D.Collision.Shapes.b2MassData=L,Box2D.Collision.Shapes.b2PolygonShape=P,Box2D.Collision.Shapes.b2Shape=F,Box2D.Common.b2internal="Box2D.Common.b2internal",Box2D.Common.b2Color=G,Box2D.Common.b2Settings=k,Box2D.Common.Math.b2Mat22=J,Box2D.Common.Math.b2Mat33=R,Box2D.Common.Math.b2Math=N,Box2D.Common.Math.b2Sweep=E,Box2D.Common.Math.b2Transform=O,Box2D.Common.Math.b2Vec2=j,Box2D.Common.Math.b2Vec3=z,Box2D.Dynamics.b2Body=q,Box2D.Dynamics.b2BodyDef=H,Box2D.Dynamics.b2ContactFilter=$,Box2D.Dynamics.b2ContactImpulse=W,Box2D.Dynamics.b2ContactListener=U,Box2D.Dynamics.b2ContactManager=K,Box2D.Dynamics.b2DebugDraw=X,Box2D.Dynamics.b2DestructionListener=Z,Box2D.Dynamics.b2FilterData=Q,Box2D.Dynamics.b2Fixture=Y,Box2D.Dynamics.b2FixtureDef=te,Box2D.Dynamics.b2Island=ee,Box2D.Dynamics.b2TimeStep=ie,Box2D.Dynamics.b2World=oe,Box2D.Dynamics.Contacts.b2CircleContact=ne,Box2D.Dynamics.Contacts.b2Contact=se,Box2D.Dynamics.Contacts.b2ContactConstraint=re,Box2D.Dynamics.Contacts.b2ContactConstraintPoint=ae,Box2D.Dynamics.Contacts.b2ContactEdge=le,Box2D.Dynamics.Contacts.b2ContactFactory=ce,Box2D.Dynamics.Contacts.b2ContactRegister=me,Box2D.Dynamics.Contacts.b2ContactResult=ue,Box2D.Dynamics.Contacts.b2ContactSolver=he,Box2D.Dynamics.Contacts.b2EdgeAndCircleContact=pe,Box2D.Dynamics.Contacts.b2NullContact=_e,Box2D.Dynamics.Contacts.b2PolyAndCircleContact=ye,Box2D.Dynamics.Contacts.b2PolyAndEdgeContact=fe,Box2D.Dynamics.Contacts.b2PolygonContact=de,Box2D.Dynamics.Contacts.b2PositionSolverManifold=xe,Box2D.Dynamics.Controllers.b2BuoyancyController=ve,Box2D.Dynamics.Controllers.b2ConstantAccelController=be,Box2D.Dynamics.Controllers.b2ConstantForceController=ge,Box2D.Dynamics.Controllers.b2Controller=De,Box2D.Dynamics.Controllers.b2ControllerEdge=Ce,Box2D.Dynamics.Controllers.b2GravityController=Be,Box2D.Dynamics.Controllers.b2TensorDampingController=we,Box2D.Dynamics.Joints.b2DistanceJoint=Se,Box2D.Dynamics.Joints.b2DistanceJointDef=Ae,Box2D.Dynamics.Joints.b2FrictionJoint=Me,Box2D.Dynamics.Joints.b2FrictionJointDef=Ve,Box2D.Dynamics.Joints.b2GearJoint=Te,Box2D.Dynamics.Joints.b2GearJointDef=Ie,Box2D.Dynamics.Joints.b2Jacobian=Le,Box2D.Dynamics.Joints.b2Joint=Pe,Box2D.Dynamics.Joints.b2JointDef=Fe,Box2D.Dynamics.Joints.b2JointEdge=Ge,Box2D.Dynamics.Joints.b2LineJoint=ke,Box2D.Dynamics.Joints.b2LineJointDef=Je,Box2D.Dynamics.Joints.b2MouseJoint=Re,Box2D.Dynamics.Joints.b2MouseJointDef=Ne,Box2D.Dynamics.Joints.b2PrismaticJoint=Ee,Box2D.Dynamics.Joints.b2PrismaticJointDef=Oe,Box2D.Dynamics.Joints.b2PulleyJoint=je,Box2D.Dynamics.Joints.b2PulleyJointDef=ze,Box2D.Dynamics.Joints.b2RevoluteJoint=qe,Box2D.Dynamics.Joints.b2RevoluteJointDef=He,Box2D.Dynamics.Joints.b2WeldJoint=$e,Box2D.Dynamics.Joints.b2WeldJointDef=We}(),Box2D.postDefs=[],function(){var t=Box2D.Collision.Shapes.b2CircleShape,e=(Box2D.Collision.Shapes.b2EdgeChainDef,Box2D.Collision.Shapes.b2EdgeShape,Box2D.Collision.Shapes.b2MassData,Box2D.Collision.Shapes.b2PolygonShape),i=Box2D.Collision.Shapes.b2Shape,o=(Box2D.Common.b2Color,Box2D.Common.b2internal,Box2D.Common.b2Settings),n=(Box2D.Common.Math.b2Mat22,Box2D.Common.Math.b2Mat33,Box2D.Common.Math.b2Math),s=Box2D.Common.Math.b2Sweep,r=Box2D.Common.Math.b2Transform,a=Box2D.Common.Math.b2Vec2,l=(Box2D.Common.Math.b2Vec3,Box2D.Collision.b2AABB),c=Box2D.Collision.b2Bound,m=Box2D.Collision.b2BoundValues,u=Box2D.Collision.b2Collision,h=Box2D.Collision.b2ContactID,p=Box2D.Collision.b2ContactPoint,_=Box2D.Collision.b2Distance,y=Box2D.Collision.b2DistanceInput,f=Box2D.Collision.b2DistanceOutput,d=Box2D.Collision.b2DistanceProxy,x=Box2D.Collision.b2DynamicTree,v=Box2D.Collision.b2DynamicTreeBroadPhase,b=Box2D.Collision.b2DynamicTreeNode,g=Box2D.Collision.b2DynamicTreePair,D=Box2D.Collision.b2Manifold,C=Box2D.Collision.b2ManifoldPoint,B=Box2D.Collision.b2Point,w=Box2D.Collision.b2RayCastInput,S=Box2D.Collision.b2RayCastOutput,A=Box2D.Collision.b2Segment,M=Box2D.Collision.b2SeparationFunction,V=Box2D.Collision.b2Simplex,T=Box2D.Collision.b2SimplexCache,I=Box2D.Collision.b2SimplexVertex,L=Box2D.Collision.b2TimeOfImpact,P=Box2D.Collision.b2TOIInput,F=Box2D.Collision.b2WorldManifold,G=Box2D.Collision.ClipVertex,k=Box2D.Collision.Features,J=Box2D.Collision.IBroadPhase;l.b2AABB=function(){this.lowerBound=new a,this.upperBound=new a},l.prototype.IsValid=function(){var t=this.upperBound.x-this.lowerBound.x,e=this.upperBound.y-this.lowerBound.y,i=t>=0&&e>=0;return i=i&&this.lowerBound.IsValid()&&this.upperBound.IsValid()},l.prototype.GetCenter=function(){return new a((this.lowerBound.x+this.upperBound.x)/2,(this.lowerBound.y+this.upperBound.y)/2)},l.prototype.GetExtents=function(){return new a((this.upperBound.x-this.lowerBound.x)/2,(this.upperBound.y-this.lowerBound.y)/2)},l.prototype.Contains=function(t){var e=!0;return e=e&&this.lowerBound.x<=t.lowerBound.x,e=e&&this.lowerBound.y<=t.lowerBound.y,e=e&&t.upperBound.x<=this.upperBound.x,e=e&&t.upperBound.y<=this.upperBound.y},l.prototype.RayCast=function(t,e){var i=-Number.MAX_VALUE,o=Number.MAX_VALUE,n=e.p1.x,s=e.p1.y,r=e.p2.x-e.p1.x,a=e.p2.y-e.p1.y,l=Math.abs(r),c=Math.abs(a),m=t.normal,u=0,h=0,p=0,_=0,y=0;if(Number.MIN_VALUE>l){if(this.lowerBound.x>n||n>this.upperBound.x)return!1}else if(u=1/r,h=(this.lowerBound.x-n)*u,p=(this.upperBound.x-n)*u,y=-1,h>p&&(_=h,h=p,p=_,y=1),h>i&&(m.x=y,m.y=0,i=h),o=Math.min(o,p),i>o)return!1;if(Number.MIN_VALUE>c){if(this.lowerBound.y>s||s>this.upperBound.y)return!1}else if(u=1/a,h=(this.lowerBound.y-s)*u,p=(this.upperBound.y-s)*u,y=-1,h>p&&(_=h,h=p,p=_,y=1),h>i&&(m.y=y,m.x=0,i=h),o=Math.min(o,p),i>o)return!1;return t.fraction=i,!0},l.prototype.TestOverlap=function(t){var e=t.lowerBound.x-this.upperBound.x,i=t.lowerBound.y-this.upperBound.y,o=this.lowerBound.x-t.upperBound.x,n=this.lowerBound.y-t.upperBound.y;return e>0||i>0?!1:o>0||n>0?!1:!0},l.Combine=function(t,e){var i=new l;return i.Combine(t,e),i},l.prototype.Combine=function(t,e){this.lowerBound.x=Math.min(t.lowerBound.x,e.lowerBound.x),this.lowerBound.y=Math.min(t.lowerBound.y,e.lowerBound.y),this.upperBound.x=Math.max(t.upperBound.x,e.upperBound.x),this.upperBound.y=Math.max(t.upperBound.y,e.upperBound.y)},c.b2Bound=function(){},c.prototype.IsLower=function(){return 0==(1&this.value)},c.prototype.IsUpper=function(){return 1==(1&this.value)},c.prototype.Swap=function(t){var e=this.value,i=this.proxy,o=this.stabbingCount;this.value=t.value,this.proxy=t.proxy,this.stabbingCount=t.stabbingCount,t.value=e,t.proxy=i,t.stabbingCount=o},m.b2BoundValues=function(){},m.prototype.b2BoundValues=function(){this.lowerValues=new Vector_a2j_Number,this.lowerValues[0]=0,this.lowerValues[1]=0,this.upperValues=new Vector_a2j_Number,this.upperValues[0]=0,this.upperValues[1]=0},u.b2Collision=function(){},u.ClipSegmentToLine=function(t,e,i,o){void 0===o&&(o=0);var n,s=0;n=e[0];var r=n.v;n=e[1];var a=n.v,l=i.x*r.x+i.y*r.y-o,c=i.x*a.x+i.y*a.y-o;if(0>=l&&t[s++].Set(e[0]),0>=c&&t[s++].Set(e[1]),0>l*c){var m=l/(l-c);n=t[s];var u=n.v;u.x=r.x+m*(a.x-r.x),u.y=r.y+m*(a.y-r.y),n=t[s];var h;l>0?(h=e[0],n.id=h.id):(h=e[1],n.id=h.id),++s}return s},u.EdgeSeparation=function(t,e,i,o,n){void 0===i&&(i=0),parseInt(t.m_vertexCount);var s,r,a=t.m_vertices,l=t.m_normals,c=parseInt(o.m_vertexCount),m=o.m_vertices;s=e.R,r=l[i];var u=s.col1.x*r.x+s.col2.x*r.y,h=s.col1.y*r.x+s.col2.y*r.y;s=n.R;for(var p=s.col1.x*u+s.col1.y*h,_=s.col2.x*u+s.col2.y*h,y=0,f=Number.MAX_VALUE,d=0;c>d;++d){r=m[d];var x=r.x*p+r.y*_;f>x&&(f=x,y=d)}r=a[i],s=e.R;var v=e.position.x+(s.col1.x*r.x+s.col2.x*r.y),b=e.position.y+(s.col1.y*r.x+s.col2.y*r.y);r=m[y],s=n.R;var g=n.position.x+(s.col1.x*r.x+s.col2.x*r.y),D=n.position.y+(s.col1.y*r.x+s.col2.y*r.y);g-=v,D-=b;var C=g*u+D*h;return C},u.FindMaxSeparation=function(t,e,i,o,n){var s,r,a=parseInt(e.m_vertexCount),l=e.m_normals;r=n.R,s=o.m_centroid;var c=n.position.x+(r.col1.x*s.x+r.col2.x*s.y),m=n.position.y+(r.col1.y*s.x+r.col2.y*s.y);r=i.R,s=e.m_centroid,c-=i.position.x+(r.col1.x*s.x+r.col2.x*s.y),m-=i.position.y+(r.col1.y*s.x+r.col2.y*s.y);for(var h=c*i.R.col1.x+m*i.R.col1.y,p=c*i.R.col2.x+m*i.R.col2.y,_=0,y=-Number.MAX_VALUE,f=0;a>f;++f){s=l[f];var d=s.x*h+s.y*p;d>y&&(y=d,_=f)}var x=u.EdgeSeparation(e,i,_,o,n),v=parseInt(_-1>=0?_-1:a-1),b=u.EdgeSeparation(e,i,v,o,n),g=parseInt(a>_+1?_+1:0),D=u.EdgeSeparation(e,i,g,o,n),C=0,B=0,w=0;if(b>x&&b>D)w=-1,C=v,B=b;else{if(!(D>x))return t[0]=_,x;w=1,C=g,B=D}for(;;){if(_=-1==w?C-1>=0?C-1:a-1:a>C+1?C+1:0,x=u.EdgeSeparation(e,i,_,o,n),!(x>B))break;C=_,B=x}return t[0]=C,B},u.FindIncidentEdge=function(t,e,i,o,n,s){void 0===o&&(o=0),parseInt(e.m_vertexCount);var r,a,l=e.m_normals,c=parseInt(n.m_vertexCount),m=n.m_vertices,u=n.m_normals;r=i.R,a=l[o];var h=r.col1.x*a.x+r.col2.x*a.y,p=r.col1.y*a.x+r.col2.y*a.y;r=s.R;var _=r.col1.x*h+r.col1.y*p;p=r.col2.x*h+r.col2.y*p,h=_;for(var y=0,f=Number.MAX_VALUE,d=0;c>d;++d){a=u[d];var x=h*a.x+p*a.y;f>x&&(f=x,y=d)}var v,b=parseInt(y),g=parseInt(c>b+1?b+1:0);v=t[0],a=m[b],r=s.R,v.v.x=s.position.x+(r.col1.x*a.x+r.col2.x*a.y),v.v.y=s.position.y+(r.col1.y*a.x+r.col2.y*a.y),v.id.features.referenceEdge=o,v.id.features.incidentEdge=b,v.id.features.incidentVertex=0,v=t[1],a=m[g],r=s.R,v.v.x=s.position.x+(r.col1.x*a.x+r.col2.x*a.y),v.v.y=s.position.y+(r.col1.y*a.x+r.col2.y*a.y),v.id.features.referenceEdge=o,v.id.features.incidentEdge=g,v.id.features.incidentVertex=1},u.MakeClipPointVector=function(){var t=new Vector(2);return t[0]=new G,t[1]=new G,t},u.CollidePolygons=function(t,e,i,n,s){var r;t.m_pointCount=0;var a=e.m_radius+n.m_radius,l=0;u.s_edgeAO[0]=l;var c=u.FindMaxSeparation(u.s_edgeAO,e,i,n,s);if(l=u.s_edgeAO[0],!(c>a)){var m=0;u.s_edgeBO[0]=m;var h=u.FindMaxSeparation(u.s_edgeBO,n,s,e,i);if(m=u.s_edgeBO[0],!(h>a)){var p,_,y,f,d,x=0,v=0,b=.98,g=.001;h>b*c+g?(p=n,_=e,y=s,f=i,x=m,t.m_type=D.e_faceB,v=1):(p=e,_=n,y=i,f=s,x=l,t.m_type=D.e_faceA,v=0);var C=u.s_incidentEdge;u.FindIncidentEdge(C,p,y,x,_,f);var B,w=parseInt(p.m_vertexCount),S=p.m_vertices,A=S[x];B=w>x+1?S[parseInt(x+1)]:S[0];var M=u.s_localTangent;M.Set(B.x-A.x,B.y-A.y),M.Normalize();var V=u.s_localNormal;V.x=M.y,V.y=-M.x;var T=u.s_planePoint;T.Set(.5*(A.x+B.x),.5*(A.y+B.y));var I=u.s_tangent;d=y.R,I.x=d.col1.x*M.x+d.col2.x*M.y,I.y=d.col1.y*M.x+d.col2.y*M.y;var L=u.s_tangent2;L.x=-I.x,L.y=-I.y;var P=u.s_normal;P.x=I.y,P.y=-I.x;var F=u.s_v11,G=u.s_v12;F.x=y.position.x+(d.col1.x*A.x+d.col2.x*A.y),F.y=y.position.y+(d.col1.y*A.x+d.col2.y*A.y),G.x=y.position.x+(d.col1.x*B.x+d.col2.x*B.y),G.y=y.position.y+(d.col1.y*B.x+d.col2.y*B.y);var k=P.x*F.x+P.y*F.y,J=-I.x*F.x-I.y*F.y+a,R=I.x*G.x+I.y*G.y+a,N=u.s_clipPoints1,E=u.s_clipPoints2,O=0;if(O=u.ClipSegmentToLine(N,C,L,J),!(2>O||(O=u.ClipSegmentToLine(E,N,I,R),2>O))){t.m_localPlaneNormal.SetV(V),t.m_localPoint.SetV(T);for(var j=0,z=0;o.b2_maxManifoldPoints>z;++z){r=E[z];var q=P.x*r.v.x+P.y*r.v.y-k;if(a>=q){var H=t.m_points[j];d=f.R;var $=r.v.x-f.position.x,W=r.v.y-f.position.y;H.m_localPoint.x=$*d.col1.x+W*d.col1.y,H.m_localPoint.y=$*d.col2.x+W*d.col2.y,H.m_id.Set(r.id),H.m_id.features.flip=v,++j}}t.m_pointCount=j}}}},u.CollideCircles=function(t,e,i,o,n){t.m_pointCount=0;var s,r;s=i.R,r=e.m_p;var a=i.position.x+(s.col1.x*r.x+s.col2.x*r.y),l=i.position.y+(s.col1.y*r.x+s.col2.y*r.y);s=n.R,r=o.m_p;var c=n.position.x+(s.col1.x*r.x+s.col2.x*r.y),m=n.position.y+(s.col1.y*r.x+s.col2.y*r.y),u=c-a,h=m-l,p=u*u+h*h,_=e.m_radius+o.m_radius;p>_*_||(t.m_type=D.e_circles,t.m_localPoint.SetV(e.m_p),t.m_localPlaneNormal.SetZero(),t.m_pointCount=1,t.m_points[0].m_localPoint.SetV(o.m_p),t.m_points[0].m_id.key=0)},u.CollidePolygonAndCircle=function(t,e,i,o,n){t.m_pointCount=0;var s,r,a=0,l=0;r=n.R,s=o.m_p;var c=n.position.x+(r.col1.x*s.x+r.col2.x*s.y),m=n.position.y+(r.col1.y*s.x+r.col2.y*s.y);a=c-i.position.x,l=m-i.position.y,r=i.R;for(var u=a*r.col1.x+l*r.col1.y,h=a*r.col2.x+l*r.col2.y,p=0,_=-Number.MAX_VALUE,y=e.m_radius+o.m_radius,f=parseInt(e.m_vertexCount),d=e.m_vertices,x=e.m_normals,v=0;f>v;++v){s=d[v],a=u-s.x,l=h-s.y,s=x[v];var b=s.x*a+s.y*l;if(b>y)return;b>_&&(_=b,p=v)}var g=parseInt(p),C=parseInt(f>g+1?g+1:0),B=d[g],w=d[C];if(Number.MIN_VALUE>_)return t.m_pointCount=1,t.m_type=D.e_faceA,t.m_localPlaneNormal.SetV(x[p]),t.m_localPoint.x=.5*(B.x+w.x),t.m_localPoint.y=.5*(B.y+w.y),t.m_points[0].m_localPoint.SetV(o.m_p),t.m_points[0].m_id.key=0,void 0;var S=(u-B.x)*(w.x-B.x)+(h-B.y)*(w.y-B.y),A=(u-w.x)*(B.x-w.x)+(h-w.y)*(B.y-w.y);if(0>=S){if((u-B.x)*(u-B.x)+(h-B.y)*(h-B.y)>y*y)return;t.m_pointCount=1,t.m_type=D.e_faceA,t.m_localPlaneNormal.x=u-B.x,t.m_localPlaneNormal.y=h-B.y,t.m_localPlaneNormal.Normalize(),t.m_localPoint.SetV(B),t.m_points[0].m_localPoint.SetV(o.m_p),t.m_points[0].m_id.key=0}else if(0>=A){if((u-w.x)*(u-w.x)+(h-w.y)*(h-w.y)>y*y)return;t.m_pointCount=1,t.m_type=D.e_faceA,t.m_localPlaneNormal.x=u-w.x,t.m_localPlaneNormal.y=h-w.y,t.m_localPlaneNormal.Normalize(),t.m_localPoint.SetV(w),t.m_points[0].m_localPoint.SetV(o.m_p),t.m_points[0].m_id.key=0}else{var M=.5*(B.x+w.x),V=.5*(B.y+w.y);if(_=(u-M)*x[g].x+(h-V)*x[g].y,_>y)return;t.m_pointCount=1,t.m_type=D.e_faceA,t.m_localPlaneNormal.x=x[g].x,t.m_localPlaneNormal.y=x[g].y,t.m_localPlaneNormal.Normalize(),t.m_localPoint.Set(M,V),t.m_points[0].m_localPoint.SetV(o.m_p),t.m_points[0].m_id.key=0}},u.TestOverlap=function(t,e){var i=e.lowerBound,o=t.upperBound,n=i.x-o.x,s=i.y-o.y;i=t.lowerBound,o=e.upperBound;var r=i.x-o.x,a=i.y-o.y;return n>0||s>0?!1:r>0||a>0?!1:!0},Box2D.postDefs.push(function(){Box2D.Collision.b2Collision.s_incidentEdge=u.MakeClipPointVector(),Box2D.Collision.b2Collision.s_clipPoints1=u.MakeClipPointVector(),Box2D.Collision.b2Collision.s_clipPoints2=u.MakeClipPointVector(),Box2D.Collision.b2Collision.s_edgeAO=new Vector_a2j_Number(1),Box2D.Collision.b2Collision.s_edgeBO=new Vector_a2j_Number(1),Box2D.Collision.b2Collision.s_localTangent=new a,Box2D.Collision.b2Collision.s_localNormal=new a,Box2D.Collision.b2Collision.s_planePoint=new a,Box2D.Collision.b2Collision.s_normal=new a,Box2D.Collision.b2Collision.s_tangent=new a,Box2D.Collision.b2Collision.s_tangent2=new a,Box2D.Collision.b2Collision.s_v11=new a,Box2D.Collision.b2Collision.s_v12=new a,Box2D.Collision.b2Collision.b2CollidePolyTempVec=new a,Box2D.Collision.b2Collision.b2_nullFeature=255}),h.b2ContactID=function(){this.features=new k},h.prototype.b2ContactID=function(){this.features._m_id=this},h.prototype.Set=function(t){this.key=t._key},h.prototype.Copy=function(){var t=new h;return t.key=this.key,t},Object.defineProperty(h.prototype,"key",{enumerable:!1,configurable:!0,get:function(){return this._key}}),Object.defineProperty(h.prototype,"key",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._key=t,this.features._referenceEdge=255&this._key,this.features._incidentEdge=255&(65280&this._key)>>8,this.features._incidentVertex=255&(16711680&this._key)>>16,this.features._flip=255&(4278190080&this._key)>>24}}),p.b2ContactPoint=function(){this.position=new a,this.velocity=new a,this.normal=new a,this.id=new h},_.b2Distance=function(){},_.Distance=function(t,e,i){++_.b2_gjkCalls;var s=i.proxyA,r=i.proxyB,l=i.transformA,c=i.transformB,m=_.s_simplex;m.ReadCache(e,s,l,r,c);for(var u,h=m.m_vertices,p=20,y=_.s_saveA,f=_.s_saveB,d=0,x=m.GetClosestPoint(),v=x.LengthSquared(),b=v,g=0,D=0;p>D;){for(d=m.m_count,g=0;d>g;g++)y[g]=h[g].indexA,f[g]=h[g].indexB;switch(m.m_count){case 1:break;case 2:m.Solve2();break;case 3:m.Solve3();break;default:o.b2Assert(!1)}if(3==m.m_count)break;u=m.GetClosestPoint(),b=u.LengthSquared(),v=b;var C=m.GetSearchDirection();if(C.LengthSquared()<Number.MIN_VALUE*Number.MIN_VALUE)break;var B=h[m.m_count];B.indexA=s.GetSupport(n.MulTMV(l.R,C.GetNegative())),B.wA=n.MulX(l,s.GetVertex(B.indexA)),B.indexB=r.GetSupport(n.MulTMV(c.R,C)),B.wB=n.MulX(c,r.GetVertex(B.indexB)),B.w=n.SubtractVV(B.wB,B.wA),++D,++_.b2_gjkIters;var w=!1;for(g=0;d>g;g++)if(B.indexA==y[g]&&B.indexB==f[g]){w=!0;break}if(w)break;++m.m_count}if(_.b2_gjkMaxIters=n.Max(_.b2_gjkMaxIters,D),m.GetWitnessPoints(t.pointA,t.pointB),t.distance=n.SubtractVV(t.pointA,t.pointB).Length(),t.iterations=D,m.WriteCache(e),i.useRadii){var S=s.m_radius,A=r.m_radius;if(t.distance>S+A&&t.distance>Number.MIN_VALUE){t.distance-=S+A;var M=n.SubtractVV(t.pointB,t.pointA);M.Normalize(),t.pointA.x+=S*M.x,t.pointA.y+=S*M.y,t.pointB.x-=A*M.x,t.pointB.y-=A*M.y}else u=new a,u.x=.5*(t.pointA.x+t.pointB.x),u.y=.5*(t.pointA.y+t.pointB.y),t.pointA.x=t.pointB.x=u.x,t.pointA.y=t.pointB.y=u.y,t.distance=0}},Box2D.postDefs.push(function(){Box2D.Collision.b2Distance.s_simplex=new V,Box2D.Collision.b2Distance.s_saveA=new Vector_a2j_Number(3),Box2D.Collision.b2Distance.s_saveB=new Vector_a2j_Number(3)}),y.b2DistanceInput=function(){},f.b2DistanceOutput=function(){this.pointA=new a,this.pointB=new a},d.b2DistanceProxy=function(){},d.prototype.Set=function(n){switch(n.GetType()){case i.e_circleShape:var s=n instanceof t?n:null;this.m_vertices=new Vector(1,!0),this.m_vertices[0]=s.m_p,this.m_count=1,this.m_radius=s.m_radius;break;case i.e_polygonShape:var r=n instanceof e?n:null;this.m_vertices=r.m_vertices,this.m_count=r.m_vertexCount,this.m_radius=r.m_radius;break;default:o.b2Assert(!1)}},d.prototype.GetSupport=function(t){for(var e=0,i=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y,o=1;this.m_count>o;++o){var n=this.m_vertices[o].x*t.x+this.m_vertices[o].y*t.y;n>i&&(e=o,i=n)}return e},d.prototype.GetSupportVertex=function(t){for(var e=0,i=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y,o=1;this.m_count>o;++o){var n=this.m_vertices[o].x*t.x+this.m_vertices[o].y*t.y;n>i&&(e=o,i=n)}return this.m_vertices[e]},d.prototype.GetVertexCount=function(){return this.m_count},d.prototype.GetVertex=function(t){return void 0===t&&(t=0),o.b2Assert(t>=0&&this.m_count>t),this.m_vertices[t]},x.b2DynamicTree=function(){},x.prototype.b2DynamicTree=function(){this.m_root=null,this.m_freeList=null,this.m_path=0,this.m_insertionCount=0},x.prototype.CreateProxy=function(t,e){var i=this.AllocateNode(),n=o.b2_aabbExtension,s=o.b2_aabbExtension;return i.aabb.lowerBound.x=t.lowerBound.x-n,i.aabb.lowerBound.y=t.lowerBound.y-s,i.aabb.upperBound.x=t.upperBound.x+n,i.aabb.upperBound.y=t.upperBound.y+s,i.userData=e,this.InsertLeaf(i),i},x.prototype.DestroyProxy=function(t){this.RemoveLeaf(t),this.FreeNode(t)},x.prototype.MoveProxy=function(t,e,i){if(o.b2Assert(t.IsLeaf()),t.aabb.Contains(e))return!1;this.RemoveLeaf(t);var n=o.b2_aabbExtension+o.b2_aabbMultiplier*(i.x>0?i.x:-i.x),s=o.b2_aabbExtension+o.b2_aabbMultiplier*(i.y>0?i.y:-i.y);return t.aabb.lowerBound.x=e.lowerBound.x-n,t.aabb.lowerBound.y=e.lowerBound.y-s,t.aabb.upperBound.x=e.upperBound.x+n,t.aabb.upperBound.y=e.upperBound.y+s,this.InsertLeaf(t),!0},x.prototype.Rebalance=function(t){if(void 0===t&&(t=0),null!=this.m_root)for(var e=0;t>e;e++){for(var i=this.m_root,o=0;0==i.IsLeaf();)i=1&this.m_path>>o?i.child2:i.child1,o=31&o+1;++this.m_path,this.RemoveLeaf(i),this.InsertLeaf(i)}},x.prototype.GetFatAABB=function(t){return t.aabb},x.prototype.GetUserData=function(t){return t.userData},x.prototype.Query=function(t,e){if(null!=this.m_root){var i=new Vector,o=0;for(i[o++]=this.m_root;o>0;){var n=i[--o];if(n.aabb.TestOverlap(e))if(n.IsLeaf()){var s=t(n);if(!s)return}else i[o++]=n.child1,i[o++]=n.child2}}},x.prototype.RayCast=function(t,e){if(null!=this.m_root){var i=e.p1,o=e.p2,s=n.SubtractVV(i,o);s.Normalize();var r=n.CrossFV(1,s),a=n.AbsV(r),c=e.maxFraction,m=new l,u=0,h=0;u=i.x+c*(o.x-i.x),h=i.y+c*(o.y-i.y),m.lowerBound.x=Math.min(i.x,u),m.lowerBound.y=Math.min(i.y,h),m.upperBound.x=Math.max(i.x,u),m.upperBound.y=Math.max(i.y,h);var p=new Vector,_=0;for(p[_++]=this.m_root;_>0;){var y=p[--_];if(0!=y.aabb.TestOverlap(m)){var f=y.aabb.GetCenter(),d=y.aabb.GetExtents(),x=Math.abs(r.x*(i.x-f.x)+r.y*(i.y-f.y))-a.x*d.x-a.y*d.y;if(!(x>0))if(y.IsLeaf()){var v=new w;if(v.p1=e.p1,v.p2=e.p2,v.maxFraction=e.maxFraction,c=t(v,y),0==c)return;c>0&&(u=i.x+c*(o.x-i.x),h=i.y+c*(o.y-i.y),m.lowerBound.x=Math.min(i.x,u),m.lowerBound.y=Math.min(i.y,h),m.upperBound.x=Math.max(i.x,u),m.upperBound.y=Math.max(i.y,h))}else p[_++]=y.child1,p[_++]=y.child2}}}},x.prototype.AllocateNode=function(){if(this.m_freeList){var t=this.m_freeList;return this.m_freeList=t.parent,t.parent=null,t.child1=null,t.child2=null,t}return new b},x.prototype.FreeNode=function(t){t.parent=this.m_freeList,this.m_freeList=t},x.prototype.InsertLeaf=function(t){if(++this.m_insertionCount,null==this.m_root)return this.m_root=t,this.m_root.parent=null,void 0;var e=t.aabb.GetCenter(),i=this.m_root;if(0==i.IsLeaf())do{var o=i.child1,n=i.child2,s=Math.abs((o.aabb.lowerBound.x+o.aabb.upperBound.x)/2-e.x)+Math.abs((o.aabb.lowerBound.y+o.aabb.upperBound.y)/2-e.y),r=Math.abs((n.aabb.lowerBound.x+n.aabb.upperBound.x)/2-e.x)+Math.abs((n.aabb.lowerBound.y+n.aabb.upperBound.y)/2-e.y);i=r>s?o:n}while(0==i.IsLeaf());var a=i.parent,l=this.AllocateNode();if(l.parent=a,l.userData=null,l.aabb.Combine(t.aabb,i.aabb),a){i.parent.child1==i?a.child1=l:a.child2=l,l.child1=i,l.child2=t,i.parent=l,t.parent=l;
do{if(a.aabb.Contains(l.aabb))break;a.aabb.Combine(a.child1.aabb,a.child2.aabb),l=a,a=a.parent}while(a)}else l.child1=i,l.child2=t,i.parent=l,t.parent=l,this.m_root=l},x.prototype.RemoveLeaf=function(t){if(t==this.m_root)return this.m_root=null,void 0;var e,i=t.parent,o=i.parent;if(e=i.child1==t?i.child2:i.child1,o)for(o.child1==i?o.child1=e:o.child2=e,e.parent=o,this.FreeNode(i);o;){var n=o.aabb;if(o.aabb=l.Combine(o.child1.aabb,o.child2.aabb),n.Contains(o.aabb))break;o=o.parent}else this.m_root=e,e.parent=null,this.FreeNode(i)},v.b2DynamicTreeBroadPhase=function(){this.m_tree=new x,this.m_moveBuffer=new Vector,this.m_pairBuffer=new Vector,this.m_pairCount=0},v.prototype.CreateProxy=function(t,e){var i=this.m_tree.CreateProxy(t,e);return++this.m_proxyCount,this.BufferMove(i),i},v.prototype.DestroyProxy=function(t){this.UnBufferMove(t),--this.m_proxyCount,this.m_tree.DestroyProxy(t)},v.prototype.MoveProxy=function(t,e,i){var o=this.m_tree.MoveProxy(t,e,i);o&&this.BufferMove(t)},v.prototype.TestOverlap=function(t,e){var i=this.m_tree.GetFatAABB(t),o=this.m_tree.GetFatAABB(e);return i.TestOverlap(o)},v.prototype.GetUserData=function(t){return this.m_tree.GetUserData(t)},v.prototype.GetFatAABB=function(t){return this.m_tree.GetFatAABB(t)},v.prototype.GetProxyCount=function(){return this.m_proxyCount},v.prototype.UpdatePairs=function(t){function e(t){if(t==o)return!0;i.m_pairCount==i.m_pairBuffer.length&&(i.m_pairBuffer[i.m_pairCount]=new g);var e=i.m_pairBuffer[i.m_pairCount];return e.proxyA=o>t?t:o,e.proxyB=t>=o?t:o,++i.m_pairCount,!0}var i=this;i.m_pairCount=0;var o,n=0;for(n=0;i.m_moveBuffer.length>n;++n){o=i.m_moveBuffer[n];var s=i.m_tree.GetFatAABB(o);i.m_tree.Query(e,s)}i.m_moveBuffer.length=0;for(var n=0;i.m_pairCount>n;){var r=i.m_pairBuffer[n],a=i.m_tree.GetUserData(r.proxyA),l=i.m_tree.GetUserData(r.proxyB);for(t(a,l),++n;i.m_pairCount>n;){var c=i.m_pairBuffer[n];if(c.proxyA!=r.proxyA||c.proxyB!=r.proxyB)break;++n}}},v.prototype.Query=function(t,e){this.m_tree.Query(t,e)},v.prototype.RayCast=function(t,e){this.m_tree.RayCast(t,e)},v.prototype.Validate=function(){},v.prototype.Rebalance=function(t){void 0===t&&(t=0),this.m_tree.Rebalance(t)},v.prototype.BufferMove=function(t){this.m_moveBuffer[this.m_moveBuffer.length]=t},v.prototype.UnBufferMove=function(t){var e=parseInt(this.m_moveBuffer.indexOf(t));this.m_moveBuffer.splice(e,1)},v.prototype.ComparePairs=function(){return 0},v.__implements={},v.__implements[J]=!0,b.b2DynamicTreeNode=function(){this.aabb=new l},b.prototype.IsLeaf=function(){return null==this.child1},g.b2DynamicTreePair=function(){},D.b2Manifold=function(){this.m_pointCount=0},D.prototype.b2Manifold=function(){this.m_points=new Vector(o.b2_maxManifoldPoints);for(var t=0;o.b2_maxManifoldPoints>t;t++)this.m_points[t]=new C;this.m_localPlaneNormal=new a,this.m_localPoint=new a},D.prototype.Reset=function(){for(var t=0;o.b2_maxManifoldPoints>t;t++)(this.m_points[t]instanceof C?this.m_points[t]:null).Reset();this.m_localPlaneNormal.SetZero(),this.m_localPoint.SetZero(),this.m_type=0,this.m_pointCount=0},D.prototype.Set=function(t){this.m_pointCount=t.m_pointCount;for(var e=0;o.b2_maxManifoldPoints>e;e++)(this.m_points[e]instanceof C?this.m_points[e]:null).Set(t.m_points[e]);this.m_localPlaneNormal.SetV(t.m_localPlaneNormal),this.m_localPoint.SetV(t.m_localPoint),this.m_type=t.m_type},D.prototype.Copy=function(){var t=new D;return t.Set(this),t},Box2D.postDefs.push(function(){Box2D.Collision.b2Manifold.e_circles=1,Box2D.Collision.b2Manifold.e_faceA=2,Box2D.Collision.b2Manifold.e_faceB=4}),C.b2ManifoldPoint=function(){this.m_localPoint=new a,this.m_id=new h},C.prototype.b2ManifoldPoint=function(){this.Reset()},C.prototype.Reset=function(){this.m_localPoint.SetZero(),this.m_normalImpulse=0,this.m_tangentImpulse=0,this.m_id.key=0},C.prototype.Set=function(t){this.m_localPoint.SetV(t.m_localPoint),this.m_normalImpulse=t.m_normalImpulse,this.m_tangentImpulse=t.m_tangentImpulse,this.m_id.Set(t.m_id)},B.b2Point=function(){this.p=new a},B.prototype.Support=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=0),this.p},B.prototype.GetFirstVertex=function(){return this.p},w.b2RayCastInput=function(){this.p1=new a,this.p2=new a},w.prototype.b2RayCastInput=function(t,e,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=1),t&&this.p1.SetV(t),e&&this.p2.SetV(e),this.maxFraction=i},S.b2RayCastOutput=function(){this.normal=new a},A.b2Segment=function(){this.p1=new a,this.p2=new a},A.prototype.TestSegment=function(t,e,i,o){void 0===o&&(o=0);var n=i.p1,s=i.p2.x-n.x,r=i.p2.y-n.y,a=this.p2.x-this.p1.x,l=this.p2.y-this.p1.y,c=l,m=-a,u=100*Number.MIN_VALUE,h=-(s*c+r*m);if(h>u){var p=n.x-this.p1.x,_=n.y-this.p1.y,y=p*c+_*m;if(y>=0&&o*h>=y){var f=-s*_+r*p;if(f>=-u*h&&h*(1+u)>=f){y/=h;var d=Math.sqrt(c*c+m*m);return c/=d,m/=d,t[0]=y,e.Set(c,m),!0}}}return!1},A.prototype.Extend=function(t){this.ExtendForward(t),this.ExtendBackward(t)},A.prototype.ExtendForward=function(t){var e=this.p2.x-this.p1.x,i=this.p2.y-this.p1.y,o=Math.min(e>0?(t.upperBound.x-this.p1.x)/e:0>e?(t.lowerBound.x-this.p1.x)/e:Number.POSITIVE_INFINITY,i>0?(t.upperBound.y-this.p1.y)/i:0>i?(t.lowerBound.y-this.p1.y)/i:Number.POSITIVE_INFINITY);this.p2.x=this.p1.x+e*o,this.p2.y=this.p1.y+i*o},A.prototype.ExtendBackward=function(t){var e=-this.p2.x+this.p1.x,i=-this.p2.y+this.p1.y,o=Math.min(e>0?(t.upperBound.x-this.p2.x)/e:0>e?(t.lowerBound.x-this.p2.x)/e:Number.POSITIVE_INFINITY,i>0?(t.upperBound.y-this.p2.y)/i:0>i?(t.lowerBound.y-this.p2.y)/i:Number.POSITIVE_INFINITY);this.p1.x=this.p2.x+e*o,this.p1.y=this.p2.y+i*o},M.b2SeparationFunction=function(){this.m_localPoint=new a,this.m_axis=new a},M.prototype.Initialize=function(t,e,i,s,r){this.m_proxyA=e,this.m_proxyB=s;var l=parseInt(t.count);o.b2Assert(l>0&&3>l);var c,m,u,h,p,_,y,f,d=0,x=0,v=0,b=0,g=0,D=0,C=0,B=0;if(1==l)this.m_type=M.e_points,c=this.m_proxyA.GetVertex(t.indexA[0]),h=this.m_proxyB.GetVertex(t.indexB[0]),f=c,y=i.R,d=i.position.x+(y.col1.x*f.x+y.col2.x*f.y),x=i.position.y+(y.col1.y*f.x+y.col2.y*f.y),f=h,y=r.R,v=r.position.x+(y.col1.x*f.x+y.col2.x*f.y),b=r.position.y+(y.col1.y*f.x+y.col2.y*f.y),this.m_axis.x=v-d,this.m_axis.y=b-x,this.m_axis.Normalize();else if(t.indexB[0]==t.indexB[1])this.m_type=M.e_faceA,m=this.m_proxyA.GetVertex(t.indexA[0]),u=this.m_proxyA.GetVertex(t.indexA[1]),h=this.m_proxyB.GetVertex(t.indexB[0]),this.m_localPoint.x=.5*(m.x+u.x),this.m_localPoint.y=.5*(m.y+u.y),this.m_axis=n.CrossVF(n.SubtractVV(u,m),1),this.m_axis.Normalize(),f=this.m_axis,y=i.R,g=y.col1.x*f.x+y.col2.x*f.y,D=y.col1.y*f.x+y.col2.y*f.y,f=this.m_localPoint,y=i.R,d=i.position.x+(y.col1.x*f.x+y.col2.x*f.y),x=i.position.y+(y.col1.y*f.x+y.col2.y*f.y),f=h,y=r.R,v=r.position.x+(y.col1.x*f.x+y.col2.x*f.y),b=r.position.y+(y.col1.y*f.x+y.col2.y*f.y),C=(v-d)*g+(b-x)*D,0>C&&this.m_axis.NegativeSelf();else if(t.indexA[0]==t.indexA[0])this.m_type=M.e_faceB,p=this.m_proxyB.GetVertex(t.indexB[0]),_=this.m_proxyB.GetVertex(t.indexB[1]),c=this.m_proxyA.GetVertex(t.indexA[0]),this.m_localPoint.x=.5*(p.x+_.x),this.m_localPoint.y=.5*(p.y+_.y),this.m_axis=n.CrossVF(n.SubtractVV(_,p),1),this.m_axis.Normalize(),f=this.m_axis,y=r.R,g=y.col1.x*f.x+y.col2.x*f.y,D=y.col1.y*f.x+y.col2.y*f.y,f=this.m_localPoint,y=r.R,v=r.position.x+(y.col1.x*f.x+y.col2.x*f.y),b=r.position.y+(y.col1.y*f.x+y.col2.y*f.y),f=c,y=i.R,d=i.position.x+(y.col1.x*f.x+y.col2.x*f.y),x=i.position.y+(y.col1.y*f.x+y.col2.y*f.y),C=(d-v)*g+(x-b)*D,0>C&&this.m_axis.NegativeSelf();else{m=this.m_proxyA.GetVertex(t.indexA[0]),u=this.m_proxyA.GetVertex(t.indexA[1]),p=this.m_proxyB.GetVertex(t.indexB[0]),_=this.m_proxyB.GetVertex(t.indexB[1]),n.MulX(i,c);var w=n.MulMV(i.R,n.SubtractVV(u,m));n.MulX(r,h);var S=n.MulMV(r.R,n.SubtractVV(_,p)),A=w.x*w.x+w.y*w.y,V=S.x*S.x+S.y*S.y,T=n.SubtractVV(S,w),I=w.x*T.x+w.y*T.y,L=S.x*T.x+S.y*T.y,P=w.x*S.x+w.y*S.y,F=A*V-P*P;C=0,0!=F&&(C=n.Clamp((P*L-I*V)/F,0,1));var G=(P*C+L)/V;0>G&&(G=0,C=n.Clamp((P-I)/A,0,1)),c=new a,c.x=m.x+C*(u.x-m.x),c.y=m.y+C*(u.y-m.y),h=new a,h.x=p.x+C*(_.x-p.x),h.y=p.y+C*(_.y-p.y),0==C||1==C?(this.m_type=M.e_faceB,this.m_axis=n.CrossVF(n.SubtractVV(_,p),1),this.m_axis.Normalize(),this.m_localPoint=h,f=this.m_axis,y=r.R,g=y.col1.x*f.x+y.col2.x*f.y,D=y.col1.y*f.x+y.col2.y*f.y,f=this.m_localPoint,y=r.R,v=r.position.x+(y.col1.x*f.x+y.col2.x*f.y),b=r.position.y+(y.col1.y*f.x+y.col2.y*f.y),f=c,y=i.R,d=i.position.x+(y.col1.x*f.x+y.col2.x*f.y),x=i.position.y+(y.col1.y*f.x+y.col2.y*f.y),B=(d-v)*g+(x-b)*D,0>C&&this.m_axis.NegativeSelf()):(this.m_type=M.e_faceA,this.m_axis=n.CrossVF(n.SubtractVV(u,m),1),this.m_localPoint=c,f=this.m_axis,y=i.R,g=y.col1.x*f.x+y.col2.x*f.y,D=y.col1.y*f.x+y.col2.y*f.y,f=this.m_localPoint,y=i.R,d=i.position.x+(y.col1.x*f.x+y.col2.x*f.y),x=i.position.y+(y.col1.y*f.x+y.col2.y*f.y),f=h,y=r.R,v=r.position.x+(y.col1.x*f.x+y.col2.x*f.y),b=r.position.y+(y.col1.y*f.x+y.col2.y*f.y),B=(v-d)*g+(b-x)*D,0>C&&this.m_axis.NegativeSelf())}},M.prototype.Evaluate=function(t,e){var i,s,r,a,l,c,m,u=0;switch(this.m_type){case M.e_points:return i=n.MulTMV(t.R,this.m_axis),s=n.MulTMV(e.R,this.m_axis.GetNegative()),r=this.m_proxyA.GetSupportVertex(i),a=this.m_proxyB.GetSupportVertex(s),l=n.MulX(t,r),c=n.MulX(e,a),u=(c.x-l.x)*this.m_axis.x+(c.y-l.y)*this.m_axis.y;case M.e_faceA:return m=n.MulMV(t.R,this.m_axis),l=n.MulX(t,this.m_localPoint),s=n.MulTMV(e.R,m.GetNegative()),a=this.m_proxyB.GetSupportVertex(s),c=n.MulX(e,a),u=(c.x-l.x)*m.x+(c.y-l.y)*m.y;case M.e_faceB:return m=n.MulMV(e.R,this.m_axis),c=n.MulX(e,this.m_localPoint),i=n.MulTMV(t.R,m.GetNegative()),r=this.m_proxyA.GetSupportVertex(i),l=n.MulX(t,r),u=(l.x-c.x)*m.x+(l.y-c.y)*m.y;default:return o.b2Assert(!1),0}},Box2D.postDefs.push(function(){Box2D.Collision.b2SeparationFunction.e_points=1,Box2D.Collision.b2SeparationFunction.e_faceA=2,Box2D.Collision.b2SeparationFunction.e_faceB=4}),V.b2Simplex=function(){this.m_v1=new I,this.m_v2=new I,this.m_v3=new I,this.m_vertices=new Vector(3)},V.prototype.b2Simplex=function(){this.m_vertices[0]=this.m_v1,this.m_vertices[1]=this.m_v2,this.m_vertices[2]=this.m_v3},V.prototype.ReadCache=function(t,e,i,s,r){o.b2Assert(t.count>=0&&3>=t.count);var a,l;this.m_count=t.count;for(var c=this.m_vertices,m=0;this.m_count>m;m++){var u=c[m];u.indexA=t.indexA[m],u.indexB=t.indexB[m],a=e.GetVertex(u.indexA),l=s.GetVertex(u.indexB),u.wA=n.MulX(i,a),u.wB=n.MulX(r,l),u.w=n.SubtractVV(u.wB,u.wA),u.a=0}if(this.m_count>1){var h=t.metric,p=this.GetMetric();(.5*h>p||p>2*h||Number.MIN_VALUE>p)&&(this.m_count=0)}0==this.m_count&&(u=c[0],u.indexA=0,u.indexB=0,a=e.GetVertex(0),l=s.GetVertex(0),u.wA=n.MulX(i,a),u.wB=n.MulX(r,l),u.w=n.SubtractVV(u.wB,u.wA),this.m_count=1)},V.prototype.WriteCache=function(t){t.metric=this.GetMetric(),t.count=Box2D.parseUInt(this.m_count);for(var e=this.m_vertices,i=0;this.m_count>i;i++)t.indexA[i]=Box2D.parseUInt(e[i].indexA),t.indexB[i]=Box2D.parseUInt(e[i].indexB)},V.prototype.GetSearchDirection=function(){switch(this.m_count){case 1:return this.m_v1.w.GetNegative();case 2:var t=n.SubtractVV(this.m_v2.w,this.m_v1.w),e=n.CrossVV(t,this.m_v1.w.GetNegative());return e>0?n.CrossFV(1,t):n.CrossVF(t,1);default:return o.b2Assert(!1),new a}},V.prototype.GetClosestPoint=function(){switch(this.m_count){case 0:return o.b2Assert(!1),new a;case 1:return this.m_v1.w;case 2:return new a(this.m_v1.a*this.m_v1.w.x+this.m_v2.a*this.m_v2.w.x,this.m_v1.a*this.m_v1.w.y+this.m_v2.a*this.m_v2.w.y);default:return o.b2Assert(!1),new a}},V.prototype.GetWitnessPoints=function(t,e){switch(this.m_count){case 0:o.b2Assert(!1);break;case 1:t.SetV(this.m_v1.wA),e.SetV(this.m_v1.wB);break;case 2:t.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x,t.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y,e.x=this.m_v1.a*this.m_v1.wB.x+this.m_v2.a*this.m_v2.wB.x,e.y=this.m_v1.a*this.m_v1.wB.y+this.m_v2.a*this.m_v2.wB.y;break;case 3:e.x=t.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x+this.m_v3.a*this.m_v3.wA.x,e.y=t.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y+this.m_v3.a*this.m_v3.wA.y;break;default:o.b2Assert(!1)}},V.prototype.GetMetric=function(){switch(this.m_count){case 0:return o.b2Assert(!1),0;case 1:return 0;case 2:return n.SubtractVV(this.m_v1.w,this.m_v2.w).Length();case 3:return n.CrossVV(n.SubtractVV(this.m_v2.w,this.m_v1.w),n.SubtractVV(this.m_v3.w,this.m_v1.w));default:return o.b2Assert(!1),0}},V.prototype.Solve2=function(){var t=this.m_v1.w,e=this.m_v2.w,i=n.SubtractVV(e,t),o=-(t.x*i.x+t.y*i.y);if(0>=o)return this.m_v1.a=1,this.m_count=1,void 0;var s=e.x*i.x+e.y*i.y;if(0>=s)return this.m_v2.a=1,this.m_count=1,this.m_v1.Set(this.m_v2),void 0;var r=1/(s+o);this.m_v1.a=s*r,this.m_v2.a=o*r,this.m_count=2},V.prototype.Solve3=function(){var t=this.m_v1.w,e=this.m_v2.w,i=this.m_v3.w,o=n.SubtractVV(e,t),s=n.Dot(t,o),r=n.Dot(e,o),a=r,l=-s,c=n.SubtractVV(i,t),m=n.Dot(t,c),u=n.Dot(i,c),h=u,p=-m,_=n.SubtractVV(i,e),y=n.Dot(e,_),f=n.Dot(i,_),d=f,x=-y,v=n.CrossVV(o,c),b=v*n.CrossVV(e,i),g=v*n.CrossVV(i,t),D=v*n.CrossVV(t,e);if(0>=l&&0>=p)return this.m_v1.a=1,this.m_count=1,void 0;if(a>0&&l>0&&0>=D){var C=1/(a+l);return this.m_v1.a=a*C,this.m_v2.a=l*C,this.m_count=2,void 0}if(h>0&&p>0&&0>=g){var B=1/(h+p);return this.m_v1.a=h*B,this.m_v3.a=p*B,this.m_count=2,this.m_v2.Set(this.m_v3),void 0}if(0>=a&&0>=x)return this.m_v2.a=1,this.m_count=1,this.m_v1.Set(this.m_v2),void 0;if(0>=h&&0>=d)return this.m_v3.a=1,this.m_count=1,this.m_v1.Set(this.m_v3),void 0;if(d>0&&x>0&&0>=b){var w=1/(d+x);return this.m_v2.a=d*w,this.m_v3.a=x*w,this.m_count=2,this.m_v1.Set(this.m_v3),void 0}var S=1/(b+g+D);this.m_v1.a=b*S,this.m_v2.a=g*S,this.m_v3.a=D*S,this.m_count=3},T.b2SimplexCache=function(){this.indexA=new Vector_a2j_Number(3),this.indexB=new Vector_a2j_Number(3)},I.b2SimplexVertex=function(){},I.prototype.Set=function(t){this.wA.SetV(t.wA),this.wB.SetV(t.wB),this.w.SetV(t.w),this.a=t.a,this.indexA=t.indexA,this.indexB=t.indexB},L.b2TimeOfImpact=function(){},L.TimeOfImpact=function(t){++L.b2_toiCalls;var e=t.proxyA,i=t.proxyB,s=t.sweepA,r=t.sweepB;o.b2Assert(s.t0==r.t0),o.b2Assert(1-s.t0>Number.MIN_VALUE);var a=e.m_radius+i.m_radius,l=t.tolerance,c=0,m=1e3,u=0,h=0;for(L.s_cache.count=0,L.s_distanceInput.useRadii=!1;;){if(s.GetTransform(L.s_xfA,c),r.GetTransform(L.s_xfB,c),L.s_distanceInput.proxyA=e,L.s_distanceInput.proxyB=i,L.s_distanceInput.transformA=L.s_xfA,L.s_distanceInput.transformB=L.s_xfB,_.Distance(L.s_distanceOutput,L.s_cache,L.s_distanceInput),0>=L.s_distanceOutput.distance){c=1;break}L.s_fcn.Initialize(L.s_cache,e,L.s_xfA,i,L.s_xfB);var p=L.s_fcn.Evaluate(L.s_xfA,L.s_xfB);if(0>=p){c=1;break}if(0==u&&(h=p>a?n.Max(a-l,.75*a):n.Max(p-l,.02*a)),.5*l>p-h){if(0==u){c=1;break}break}var y=c,f=c,d=1,x=p;s.GetTransform(L.s_xfA,d),r.GetTransform(L.s_xfB,d);var v=L.s_fcn.Evaluate(L.s_xfA,L.s_xfB);if(v>=h){c=1;break}for(var b=0;;){var g=0;g=1&b?f+(h-x)*(d-f)/(v-x):.5*(f+d),s.GetTransform(L.s_xfA,g),r.GetTransform(L.s_xfB,g);var D=L.s_fcn.Evaluate(L.s_xfA,L.s_xfB);if(.025*l>n.Abs(D-h)){y=g;break}if(D>h?(f=g,x=D):(d=g,v=D),++b,++L.b2_toiRootIters,50==b)break}if(L.b2_toiMaxRootIters=n.Max(L.b2_toiMaxRootIters,b),(1+100*Number.MIN_VALUE)*c>y)break;if(c=y,u++,++L.b2_toiIters,u==m)break}return L.b2_toiMaxIters=n.Max(L.b2_toiMaxIters,u),c},Box2D.postDefs.push(function(){Box2D.Collision.b2TimeOfImpact.b2_toiCalls=0,Box2D.Collision.b2TimeOfImpact.b2_toiIters=0,Box2D.Collision.b2TimeOfImpact.b2_toiMaxIters=0,Box2D.Collision.b2TimeOfImpact.b2_toiRootIters=0,Box2D.Collision.b2TimeOfImpact.b2_toiMaxRootIters=0,Box2D.Collision.b2TimeOfImpact.s_cache=new T,Box2D.Collision.b2TimeOfImpact.s_distanceInput=new y,Box2D.Collision.b2TimeOfImpact.s_xfA=new r,Box2D.Collision.b2TimeOfImpact.s_xfB=new r,Box2D.Collision.b2TimeOfImpact.s_fcn=new M,Box2D.Collision.b2TimeOfImpact.s_distanceOutput=new f}),P.b2TOIInput=function(){this.proxyA=new d,this.proxyB=new d,this.sweepA=new s,this.sweepB=new s},F.b2WorldManifold=function(){this.m_normal=new a},F.prototype.b2WorldManifold=function(){this.m_points=new Vector(o.b2_maxManifoldPoints);for(var t=0;o.b2_maxManifoldPoints>t;t++)this.m_points[t]=new a},F.prototype.Initialize=function(t,e,i,o,n){if(void 0===i&&(i=0),void 0===n&&(n=0),0!=t.m_pointCount){var s,r,a=0,l=0,c=0,m=0,u=0,h=0,p=0;switch(t.m_type){case D.e_circles:r=e.R,s=t.m_localPoint;var _=e.position.x+r.col1.x*s.x+r.col2.x*s.y,y=e.position.y+r.col1.y*s.x+r.col2.y*s.y;r=o.R,s=t.m_points[0].m_localPoint;var f=o.position.x+r.col1.x*s.x+r.col2.x*s.y,d=o.position.y+r.col1.y*s.x+r.col2.y*s.y,x=f-_,v=d-y,b=x*x+v*v;if(b>Number.MIN_VALUE*Number.MIN_VALUE){var g=Math.sqrt(b);this.m_normal.x=x/g,this.m_normal.y=v/g}else this.m_normal.x=1,this.m_normal.y=0;var C=_+i*this.m_normal.x,B=y+i*this.m_normal.y,w=f-n*this.m_normal.x,S=d-n*this.m_normal.y;this.m_points[0].x=.5*(C+w),this.m_points[0].y=.5*(B+S);break;case D.e_faceA:for(r=e.R,s=t.m_localPlaneNormal,l=r.col1.x*s.x+r.col2.x*s.y,c=r.col1.y*s.x+r.col2.y*s.y,r=e.R,s=t.m_localPoint,m=e.position.x+r.col1.x*s.x+r.col2.x*s.y,u=e.position.y+r.col1.y*s.x+r.col2.y*s.y,this.m_normal.x=l,this.m_normal.y=c,a=0;t.m_pointCount>a;a++)r=o.R,s=t.m_points[a].m_localPoint,h=o.position.x+r.col1.x*s.x+r.col2.x*s.y,p=o.position.y+r.col1.y*s.x+r.col2.y*s.y,this.m_points[a].x=h+.5*(i-(h-m)*l-(p-u)*c-n)*l,this.m_points[a].y=p+.5*(i-(h-m)*l-(p-u)*c-n)*c;break;case D.e_faceB:for(r=o.R,s=t.m_localPlaneNormal,l=r.col1.x*s.x+r.col2.x*s.y,c=r.col1.y*s.x+r.col2.y*s.y,r=o.R,s=t.m_localPoint,m=o.position.x+r.col1.x*s.x+r.col2.x*s.y,u=o.position.y+r.col1.y*s.x+r.col2.y*s.y,this.m_normal.x=-l,this.m_normal.y=-c,a=0;t.m_pointCount>a;a++)r=e.R,s=t.m_points[a].m_localPoint,h=e.position.x+r.col1.x*s.x+r.col2.x*s.y,p=e.position.y+r.col1.y*s.x+r.col2.y*s.y,this.m_points[a].x=h+.5*(n-(h-m)*l-(p-u)*c-i)*l,this.m_points[a].y=p+.5*(n-(h-m)*l-(p-u)*c-i)*c}}},G.ClipVertex=function(){this.v=new a,this.id=new h},G.prototype.Set=function(t){this.v.SetV(t.v),this.id.Set(t.id)},k.Features=function(){},Object.defineProperty(k.prototype,"referenceEdge",{enumerable:!1,configurable:!0,get:function(){return this._referenceEdge}}),Object.defineProperty(k.prototype,"referenceEdge",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._referenceEdge=t,this._m_id._key=4294967040&this._m_id._key|255&this._referenceEdge}}),Object.defineProperty(k.prototype,"incidentEdge",{enumerable:!1,configurable:!0,get:function(){return this._incidentEdge}}),Object.defineProperty(k.prototype,"incidentEdge",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._incidentEdge=t,this._m_id._key=4294902015&this._m_id._key|65280&this._incidentEdge<<8}}),Object.defineProperty(k.prototype,"incidentVertex",{enumerable:!1,configurable:!0,get:function(){return this._incidentVertex}}),Object.defineProperty(k.prototype,"incidentVertex",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._incidentVertex=t,this._m_id._key=4278255615&this._m_id._key|16711680&this._incidentVertex<<16}}),Object.defineProperty(k.prototype,"flip",{enumerable:!1,configurable:!0,get:function(){return this._flip}}),Object.defineProperty(k.prototype,"flip",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._flip=t,this._m_id._key=16777215&this._m_id._key|4278190080&this._flip<<24}})}(),function(){var t=(Box2D.Common.b2Color,Box2D.Common.b2internal,Box2D.Common.b2Settings),e=Box2D.Collision.Shapes.b2CircleShape,i=Box2D.Collision.Shapes.b2EdgeChainDef,o=Box2D.Collision.Shapes.b2EdgeShape,n=Box2D.Collision.Shapes.b2MassData,s=Box2D.Collision.Shapes.b2PolygonShape,r=Box2D.Collision.Shapes.b2Shape,a=Box2D.Common.Math.b2Mat22,l=(Box2D.Common.Math.b2Mat33,Box2D.Common.Math.b2Math),c=(Box2D.Common.Math.b2Sweep,Box2D.Common.Math.b2Transform),m=Box2D.Common.Math.b2Vec2,u=(Box2D.Common.Math.b2Vec3,Box2D.Dynamics.b2Body,Box2D.Dynamics.b2BodyDef,Box2D.Dynamics.b2ContactFilter,Box2D.Dynamics.b2ContactImpulse,Box2D.Dynamics.b2ContactListener,Box2D.Dynamics.b2ContactManager,Box2D.Dynamics.b2DebugDraw,Box2D.Dynamics.b2DestructionListener,Box2D.Dynamics.b2FilterData,Box2D.Dynamics.b2Fixture,Box2D.Dynamics.b2FixtureDef,Box2D.Dynamics.b2Island,Box2D.Dynamics.b2TimeStep,Box2D.Dynamics.b2World,Box2D.Collision.b2AABB,Box2D.Collision.b2Bound,Box2D.Collision.b2BoundValues,Box2D.Collision.b2Collision,Box2D.Collision.b2ContactID,Box2D.Collision.b2ContactPoint,Box2D.Collision.b2Distance),h=Box2D.Collision.b2DistanceInput,p=Box2D.Collision.b2DistanceOutput,_=Box2D.Collision.b2DistanceProxy,y=(Box2D.Collision.b2DynamicTree,Box2D.Collision.b2DynamicTreeBroadPhase,Box2D.Collision.b2DynamicTreeNode,Box2D.Collision.b2DynamicTreePair,Box2D.Collision.b2Manifold,Box2D.Collision.b2ManifoldPoint,Box2D.Collision.b2Point,Box2D.Collision.b2RayCastInput,Box2D.Collision.b2RayCastOutput,Box2D.Collision.b2Segment,Box2D.Collision.b2SeparationFunction,Box2D.Collision.b2Simplex,Box2D.Collision.b2SimplexCache);Box2D.Collision.b2SimplexVertex,Box2D.Collision.b2TimeOfImpact,Box2D.Collision.b2TOIInput,Box2D.Collision.b2WorldManifold,Box2D.Collision.ClipVertex,Box2D.Collision.Features,Box2D.Collision.IBroadPhase,Box2D.inherit(e,Box2D.Collision.Shapes.b2Shape),e.prototype.__super=Box2D.Collision.Shapes.b2Shape.prototype,e.b2CircleShape=function(){Box2D.Collision.Shapes.b2Shape.b2Shape.apply(this,arguments),this.m_p=new m},e.prototype.Copy=function(){var t=new e;return t.Set(this),t},e.prototype.Set=function(t){if(this.__super.Set.call(this,t),Box2D.is(t,e)){var i=t instanceof e?t:null;this.m_p.SetV(i.m_p)}},e.prototype.TestPoint=function(t,e){var i=t.R,o=t.position.x+(i.col1.x*this.m_p.x+i.col2.x*this.m_p.y),n=t.position.y+(i.col1.y*this.m_p.x+i.col2.y*this.m_p.y);return o=e.x-o,n=e.y-n,this.m_radius*this.m_radius>=o*o+n*n},e.prototype.RayCast=function(t,e,i){var o=i.R,n=i.position.x+(o.col1.x*this.m_p.x+o.col2.x*this.m_p.y),s=i.position.y+(o.col1.y*this.m_p.x+o.col2.y*this.m_p.y),r=e.p1.x-n,a=e.p1.y-s,l=r*r+a*a-this.m_radius*this.m_radius,c=e.p2.x-e.p1.x,m=e.p2.y-e.p1.y,u=r*c+a*m,h=c*c+m*m,p=u*u-h*l;if(0>p||Number.MIN_VALUE>h)return!1;var _=-(u+Math.sqrt(p));return _>=0&&e.maxFraction*h>=_?(_/=h,t.fraction=_,t.normal.x=r+_*c,t.normal.y=a+_*m,t.normal.Normalize(),!0):!1},e.prototype.ComputeAABB=function(t,e){var i=e.R,o=e.position.x+(i.col1.x*this.m_p.x+i.col2.x*this.m_p.y),n=e.position.y+(i.col1.y*this.m_p.x+i.col2.y*this.m_p.y);t.lowerBound.Set(o-this.m_radius,n-this.m_radius),t.upperBound.Set(o+this.m_radius,n+this.m_radius)},e.prototype.ComputeMass=function(e,i){void 0===i&&(i=0),e.mass=i*t.b2_pi*this.m_radius*this.m_radius,e.center.SetV(this.m_p),e.I=e.mass*(.5*this.m_radius*this.m_radius+(this.m_p.x*this.m_p.x+this.m_p.y*this.m_p.y))},e.prototype.ComputeSubmergedArea=function(t,e,i,o){void 0===e&&(e=0);var n=l.MulX(i,this.m_p),s=-(l.Dot(t,n)-e);if(-this.m_radius+Number.MIN_VALUE>s)return 0;if(s>this.m_radius)return o.SetV(n),Math.PI*this.m_radius*this.m_radius;var r=this.m_radius*this.m_radius,a=s*s,c=r*(Math.asin(s/this.m_radius)+Math.PI/2)+s*Math.sqrt(r-a),m=-2/3*Math.pow(r-a,1.5)/c;return o.x=n.x+t.x*m,o.y=n.y+t.y*m,c},e.prototype.GetLocalPosition=function(){return this.m_p},e.prototype.SetLocalPosition=function(t){this.m_p.SetV(t)},e.prototype.GetRadius=function(){return this.m_radius},e.prototype.SetRadius=function(t){void 0===t&&(t=0),this.m_radius=t},e.prototype.b2CircleShape=function(t){void 0===t&&(t=0),this.__super.b2Shape.call(this),this.m_type=r.e_circleShape,this.m_radius=t},i.b2EdgeChainDef=function(){},i.prototype.b2EdgeChainDef=function(){this.vertexCount=0,this.isALoop=!0,this.vertices=[]},Box2D.inherit(o,Box2D.Collision.Shapes.b2Shape),o.prototype.__super=Box2D.Collision.Shapes.b2Shape.prototype,o.b2EdgeShape=function(){Box2D.Collision.Shapes.b2Shape.b2Shape.apply(this,arguments),this.s_supportVec=new m,this.m_v1=new m,this.m_v2=new m,this.m_coreV1=new m,this.m_coreV2=new m,this.m_normal=new m,this.m_direction=new m,this.m_cornerDir1=new m,this.m_cornerDir2=new m},o.prototype.TestPoint=function(){return!1},o.prototype.RayCast=function(t,e,i){var o,n=e.p2.x-e.p1.x,s=e.p2.y-e.p1.y;o=i.R;var r=i.position.x+(o.col1.x*this.m_v1.x+o.col2.x*this.m_v1.y),a=i.position.y+(o.col1.y*this.m_v1.x+o.col2.y*this.m_v1.y),l=i.position.y+(o.col1.y*this.m_v2.x+o.col2.y*this.m_v2.y)-a,c=-(i.position.x+(o.col1.x*this.m_v2.x+o.col2.x*this.m_v2.y)-r),m=100*Number.MIN_VALUE,u=-(n*l+s*c);if(u>m){var h=e.p1.x-r,p=e.p1.y-a,_=h*l+p*c;if(_>=0&&e.maxFraction*u>=_){var y=-n*p+s*h;if(y>=-m*u&&u*(1+m)>=y){_/=u,t.fraction=_;var f=Math.sqrt(l*l+c*c);return t.normal.x=l/f,t.normal.y=c/f,!0}}}return!1},o.prototype.ComputeAABB=function(t,e){var i=e.R,o=e.position.x+(i.col1.x*this.m_v1.x+i.col2.x*this.m_v1.y),n=e.position.y+(i.col1.y*this.m_v1.x+i.col2.y*this.m_v1.y),s=e.position.x+(i.col1.x*this.m_v2.x+i.col2.x*this.m_v2.y),r=e.position.y+(i.col1.y*this.m_v2.x+i.col2.y*this.m_v2.y);s>o?(t.lowerBound.x=o,t.upperBound.x=s):(t.lowerBound.x=s,t.upperBound.x=o),r>n?(t.lowerBound.y=n,t.upperBound.y=r):(t.lowerBound.y=r,t.upperBound.y=n)},o.prototype.ComputeMass=function(t,e){void 0===e&&(e=0),t.mass=0,t.center.SetV(this.m_v1),t.I=0},o.prototype.ComputeSubmergedArea=function(t,e,i,o){void 0===e&&(e=0);var n=new m(t.x*e,t.y*e),s=l.MulX(i,this.m_v1),r=l.MulX(i,this.m_v2),a=l.Dot(t,s)-e,c=l.Dot(t,r)-e;if(a>0){if(c>0)return 0;s.x=-c/(a-c)*s.x+a/(a-c)*r.x,s.y=-c/(a-c)*s.y+a/(a-c)*r.y}else c>0&&(r.x=-c/(a-c)*s.x+a/(a-c)*r.x,r.y=-c/(a-c)*s.y+a/(a-c)*r.y);return o.x=(n.x+s.x+r.x)/3,o.y=(n.y+s.y+r.y)/3,.5*((s.x-n.x)*(r.y-n.y)-(s.y-n.y)*(r.x-n.x))},o.prototype.GetLength=function(){return this.m_length},o.prototype.GetVertex1=function(){return this.m_v1},o.prototype.GetVertex2=function(){return this.m_v2},o.prototype.GetCoreVertex1=function(){return this.m_coreV1},o.prototype.GetCoreVertex2=function(){return this.m_coreV2},o.prototype.GetNormalVector=function(){return this.m_normal},o.prototype.GetDirectionVector=function(){return this.m_direction},o.prototype.GetCorner1Vector=function(){return this.m_cornerDir1},o.prototype.GetCorner2Vector=function(){return this.m_cornerDir2},o.prototype.Corner1IsConvex=function(){return this.m_cornerConvex1},o.prototype.Corner2IsConvex=function(){return this.m_cornerConvex2},o.prototype.GetFirstVertex=function(t){var e=t.R;return new m(t.position.x+(e.col1.x*this.m_coreV1.x+e.col2.x*this.m_coreV1.y),t.position.y+(e.col1.y*this.m_coreV1.x+e.col2.y*this.m_coreV1.y))},o.prototype.GetNextEdge=function(){return this.m_nextEdge},o.prototype.GetPrevEdge=function(){return this.m_prevEdge},o.prototype.Support=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var o=t.R,n=t.position.x+(o.col1.x*this.m_coreV1.x+o.col2.x*this.m_coreV1.y),s=t.position.y+(o.col1.y*this.m_coreV1.x+o.col2.y*this.m_coreV1.y),r=t.position.x+(o.col1.x*this.m_coreV2.x+o.col2.x*this.m_coreV2.y),a=t.position.y+(o.col1.y*this.m_coreV2.x+o.col2.y*this.m_coreV2.y);return n*e+s*i>r*e+a*i?(this.s_supportVec.x=n,this.s_supportVec.y=s):(this.s_supportVec.x=r,this.s_supportVec.y=a),this.s_supportVec},o.prototype.b2EdgeShape=function(e,i){this.__super.b2Shape.call(this),this.m_type=r.e_edgeShape,this.m_prevEdge=null,this.m_nextEdge=null,this.m_v1=e,this.m_v2=i,this.m_direction.Set(this.m_v2.x-this.m_v1.x,this.m_v2.y-this.m_v1.y),this.m_length=this.m_direction.Normalize(),this.m_normal.Set(this.m_direction.y,-this.m_direction.x),this.m_coreV1.Set(-t.b2_toiSlop*(this.m_normal.x-this.m_direction.x)+this.m_v1.x,-t.b2_toiSlop*(this.m_normal.y-this.m_direction.y)+this.m_v1.y),this.m_coreV2.Set(-t.b2_toiSlop*(this.m_normal.x+this.m_direction.x)+this.m_v2.x,-t.b2_toiSlop*(this.m_normal.y+this.m_direction.y)+this.m_v2.y),this.m_cornerDir1=this.m_normal,this.m_cornerDir2.Set(-this.m_normal.x,-this.m_normal.y)},o.prototype.SetPrevEdge=function(t,e,i,o){this.m_prevEdge=t,this.m_coreV1=e,this.m_cornerDir1=i,this.m_cornerConvex1=o},o.prototype.SetNextEdge=function(t,e,i,o){this.m_nextEdge=t,this.m_coreV2=e,this.m_cornerDir2=i,this.m_cornerConvex2=o},n.b2MassData=function(){this.mass=0,this.center=new m(0,0),this.I=0},Box2D.inherit(s,Box2D.Collision.Shapes.b2Shape),s.prototype.__super=Box2D.Collision.Shapes.b2Shape.prototype,s.b2PolygonShape=function(){Box2D.Collision.Shapes.b2Shape.b2Shape.apply(this,arguments)},s.prototype.Copy=function(){var t=new s;return t.Set(this),t},s.prototype.Set=function(t){if(this.__super.Set.call(this,t),Box2D.is(t,s)){var e=t instanceof s?t:null;this.m_centroid.SetV(e.m_centroid),this.m_vertexCount=e.m_vertexCount,this.Reserve(this.m_vertexCount);for(var i=0;this.m_vertexCount>i;i++)this.m_vertices[i].SetV(e.m_vertices[i]),this.m_normals[i].SetV(e.m_normals[i])}},s.prototype.SetAsArray=function(t,e){void 0===e&&(e=0);var i,o=new Vector,n=0;for(n=0;t.length>n;++n)i=t[n],o.push(i);this.SetAsVector(o,e)},s.AsArray=function(t,e){void 0===e&&(e=0);var i=new s;return i.SetAsArray(t,e),i},s.prototype.SetAsVector=function(e,i){void 0===i&&(i=0),0==i&&(i=e.length),t.b2Assert(i>=2),this.m_vertexCount=i,this.Reserve(i);var o=0;for(o=0;this.m_vertexCount>o;o++)this.m_vertices[o].SetV(e[o]);for(o=0;this.m_vertexCount>o;++o){var n=parseInt(o),r=parseInt(this.m_vertexCount>o+1?o+1:0),a=l.SubtractVV(this.m_vertices[r],this.m_vertices[n]);t.b2Assert(a.LengthSquared()>Number.MIN_VALUE),this.m_normals[o].SetV(l.CrossVF(a,1)),this.m_normals[o].Normalize()}this.m_centroid=s.ComputeCentroid(this.m_vertices,this.m_vertexCount)},s.AsVector=function(t,e){void 0===e&&(e=0);var i=new s;return i.SetAsVector(t,e),i},s.prototype.SetAsBox=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.m_vertexCount=4,this.Reserve(4),this.m_vertices[0].Set(-t,-e),this.m_vertices[1].Set(t,-e),this.m_vertices[2].Set(t,e),this.m_vertices[3].Set(-t,e),this.m_normals[0].Set(0,-1),this.m_normals[1].Set(1,0),this.m_normals[2].Set(0,1),this.m_normals[3].Set(-1,0),this.m_centroid.SetZero()},s.AsBox=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var i=new s;return i.SetAsBox(t,e),i},s.prototype.SetAsOrientedBox=function(t,e,i,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=null),void 0===o&&(o=0),this.m_vertexCount=4,this.Reserve(4),this.m_vertices[0].Set(-t,-e),this.m_vertices[1].Set(t,-e),this.m_vertices[2].Set(t,e),this.m_vertices[3].Set(-t,e),this.m_normals[0].Set(0,-1),this.m_normals[1].Set(1,0),this.m_normals[2].Set(0,1),this.m_normals[3].Set(-1,0),this.m_centroid=i;var n=new c;n.position=i,n.R.Set(o);for(var s=0;this.m_vertexCount>s;++s)this.m_vertices[s]=l.MulX(n,this.m_vertices[s]),this.m_normals[s]=l.MulMV(n.R,this.m_normals[s])},s.AsOrientedBox=function(t,e,i,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=null),void 0===o&&(o=0);var n=new s;return n.SetAsOrientedBox(t,e,i,o),n},s.prototype.SetAsEdge=function(t,e){this.m_vertexCount=2,this.Reserve(2),this.m_vertices[0].SetV(t),this.m_vertices[1].SetV(e),this.m_centroid.x=.5*(t.x+e.x),this.m_centroid.y=.5*(t.y+e.y),this.m_normals[0]=l.CrossVF(l.SubtractVV(e,t),1),this.m_normals[0].Normalize(),this.m_normals[1].x=-this.m_normals[0].x,this.m_normals[1].y=-this.m_normals[0].y},s.AsEdge=function(t,e){var i=new s;return i.SetAsEdge(t,e),i},s.prototype.TestPoint=function(t,e){for(var i,o=t.R,n=e.x-t.position.x,s=e.y-t.position.y,r=n*o.col1.x+s*o.col1.y,a=n*o.col2.x+s*o.col2.y,l=0;this.m_vertexCount>l;++l){i=this.m_vertices[l],n=r-i.x,s=a-i.y,i=this.m_normals[l];var c=i.x*n+i.y*s;if(c>0)return!1}return!0},s.prototype.RayCast=function(t,e,i){var o,n,s=0,r=e.maxFraction,a=0,l=0;a=e.p1.x-i.position.x,l=e.p1.y-i.position.y,o=i.R;var c=a*o.col1.x+l*o.col1.y,m=a*o.col2.x+l*o.col2.y;a=e.p2.x-i.position.x,l=e.p2.y-i.position.y,o=i.R;for(var u=a*o.col1.x+l*o.col1.y,h=a*o.col2.x+l*o.col2.y,p=u-c,_=h-m,y=parseInt(-1),f=0;this.m_vertexCount>f;++f){n=this.m_vertices[f],a=n.x-c,l=n.y-m,n=this.m_normals[f];var d=n.x*a+n.y*l,x=n.x*p+n.y*_;if(0==x){if(0>d)return!1}else 0>x&&s*x>d?(s=d/x,y=f):x>0&&r*x>d&&(r=d/x);if(s-Number.MIN_VALUE>r)return!1}return y>=0?(t.fraction=s,o=i.R,n=this.m_normals[y],t.normal.x=o.col1.x*n.x+o.col2.x*n.y,t.normal.y=o.col1.y*n.x+o.col2.y*n.y,!0):!1},s.prototype.ComputeAABB=function(t,e){for(var i=e.R,o=this.m_vertices[0],n=e.position.x+(i.col1.x*o.x+i.col2.x*o.y),s=e.position.y+(i.col1.y*o.x+i.col2.y*o.y),r=n,a=s,l=1;this.m_vertexCount>l;++l){o=this.m_vertices[l];
var c=e.position.x+(i.col1.x*o.x+i.col2.x*o.y),m=e.position.y+(i.col1.y*o.x+i.col2.y*o.y);n=c>n?n:c,s=m>s?s:m,r=r>c?r:c,a=a>m?a:m}t.lowerBound.x=n-this.m_radius,t.lowerBound.y=s-this.m_radius,t.upperBound.x=r+this.m_radius,t.upperBound.y=a+this.m_radius},s.prototype.ComputeMass=function(t,e){if(void 0===e&&(e=0),2==this.m_vertexCount)return t.center.x=.5*(this.m_vertices[0].x+this.m_vertices[1].x),t.center.y=.5*(this.m_vertices[0].y+this.m_vertices[1].y),t.mass=0,t.I=0,void 0;for(var i=0,o=0,n=0,s=0,r=0,a=0,l=1/3,c=0;this.m_vertexCount>c;++c){var m=this.m_vertices[c],u=this.m_vertexCount>c+1?this.m_vertices[parseInt(c+1)]:this.m_vertices[0],h=m.x-r,p=m.y-a,_=u.x-r,y=u.y-a,f=h*y-p*_,d=.5*f;n+=d,i+=d*l*(r+m.x+u.x),o+=d*l*(a+m.y+u.y);var x=r,v=a,b=h,g=p,D=_,C=y,B=l*(.25*(b*b+D*b+D*D)+(x*b+x*D))+.5*x*x,w=l*(.25*(g*g+C*g+C*C)+(v*g+v*C))+.5*v*v;s+=f*(B+w)}t.mass=e*n,i*=1/n,o*=1/n,t.center.Set(i,o),t.I=e*s},s.prototype.ComputeSubmergedArea=function(t,e,i,o){void 0===e&&(e=0);var s=l.MulTMV(i.R,t),r=e-l.Dot(t,i.position),a=new Vector_a2j_Number,c=0,u=parseInt(-1),h=parseInt(-1),p=!1,_=0;for(_=0;this.m_vertexCount>_;++_){a[_]=l.Dot(s,this.m_vertices[_])-r;var y=a[_]<-Number.MIN_VALUE;_>0&&(y?p||(u=_-1,c++):p&&(h=_-1,c++)),p=y}switch(c){case 0:if(p){var f=new n;return this.ComputeMass(f,1),o.SetV(l.MulX(i,f.center)),f.mass}return 0;case 1:-1==u?u=this.m_vertexCount-1:h=this.m_vertexCount-1}var d,x=parseInt((u+1)%this.m_vertexCount),v=parseInt((h+1)%this.m_vertexCount),b=(0-a[u])/(a[x]-a[u]),g=(0-a[h])/(a[v]-a[h]),D=new m(this.m_vertices[u].x*(1-b)+this.m_vertices[x].x*b,this.m_vertices[u].y*(1-b)+this.m_vertices[x].y*b),C=new m(this.m_vertices[h].x*(1-g)+this.m_vertices[v].x*g,this.m_vertices[h].y*(1-g)+this.m_vertices[v].y*g),B=0,w=new m,S=this.m_vertices[x];for(_=x;_!=v;){_=(_+1)%this.m_vertexCount,d=_==v?C:this.m_vertices[_];var A=.5*((S.x-D.x)*(d.y-D.y)-(S.y-D.y)*(d.x-D.x));B+=A,w.x+=A*(D.x+S.x+d.x)/3,w.y+=A*(D.y+S.y+d.y)/3,S=d}return w.Multiply(1/B),o.SetV(l.MulX(i,w)),B},s.prototype.GetVertexCount=function(){return this.m_vertexCount},s.prototype.GetVertices=function(){return this.m_vertices},s.prototype.GetNormals=function(){return this.m_normals},s.prototype.GetSupport=function(t){for(var e=0,i=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y,o=1;this.m_vertexCount>o;++o){var n=this.m_vertices[o].x*t.x+this.m_vertices[o].y*t.y;n>i&&(e=o,i=n)}return e},s.prototype.GetSupportVertex=function(t){for(var e=0,i=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y,o=1;this.m_vertexCount>o;++o){var n=this.m_vertices[o].x*t.x+this.m_vertices[o].y*t.y;n>i&&(e=o,i=n)}return this.m_vertices[e]},s.prototype.Validate=function(){return!1},s.prototype.b2PolygonShape=function(){this.__super.b2Shape.call(this),this.m_type=r.e_polygonShape,this.m_centroid=new m,this.m_vertices=new Vector,this.m_normals=new Vector},s.prototype.Reserve=function(t){void 0===t&&(t=0);for(var e=parseInt(this.m_vertices.length);t>e;e++)this.m_vertices[e]=new m,this.m_normals[e]=new m},s.ComputeCentroid=function(t,e){void 0===e&&(e=0);for(var i=new m,o=0,n=0,s=0,r=1/3,a=0;e>a;++a){var l=t[a],c=e>a+1?t[parseInt(a+1)]:t[0],u=l.x-n,h=l.y-s,p=c.x-n,_=c.y-s,y=u*_-h*p,f=.5*y;o+=f,i.x+=f*r*(n+l.x+c.x),i.y+=f*r*(s+l.y+c.y)}return i.x*=1/o,i.y*=1/o,i},s.ComputeOBB=function(t,e,i){void 0===i&&(i=0);var o=0,n=new Vector(i+1);for(o=0;i>o;++o)n[o]=e[o];n[i]=n[0];var s=Number.MAX_VALUE;for(o=1;i>=o;++o){var r=n[parseInt(o-1)],a=n[o].x-r.x,l=n[o].y-r.y,c=Math.sqrt(a*a+l*l);a/=c,l/=c;for(var m=-l,u=a,h=Number.MAX_VALUE,p=Number.MAX_VALUE,_=-Number.MAX_VALUE,y=-Number.MAX_VALUE,f=0;i>f;++f){var d=n[f].x-r.x,x=n[f].y-r.y,v=a*d+l*x,b=m*d+u*x;h>v&&(h=v),p>b&&(p=b),v>_&&(_=v),b>y&&(y=b)}var g=(_-h)*(y-p);if(.95*s>g){s=g,t.R.col1.x=a,t.R.col1.y=l,t.R.col2.x=m,t.R.col2.y=u;var D=.5*(h+_),C=.5*(p+y),B=t.R;t.center.x=r.x+(B.col1.x*D+B.col2.x*C),t.center.y=r.y+(B.col1.y*D+B.col2.y*C),t.extents.x=.5*(_-h),t.extents.y=.5*(y-p)}}},Box2D.postDefs.push(function(){Box2D.Collision.Shapes.b2PolygonShape.s_mat=new a}),r.b2Shape=function(){},r.prototype.Copy=function(){return null},r.prototype.Set=function(t){this.m_radius=t.m_radius},r.prototype.GetType=function(){return this.m_type},r.prototype.TestPoint=function(){return!1},r.prototype.RayCast=function(){return!1},r.prototype.ComputeAABB=function(){},r.prototype.ComputeMass=function(t,e){void 0===e&&(e=0)},r.prototype.ComputeSubmergedArea=function(t,e){return void 0===e&&(e=0),0},r.TestOverlap=function(t,e,i,o){var n=new h;n.proxyA=new _,n.proxyA.Set(t),n.proxyB=new _,n.proxyB.Set(i),n.transformA=e,n.transformB=o,n.useRadii=!0;var s=new y;s.count=0;var r=new p;return u.Distance(r,s,n),r.distance<10*Number.MIN_VALUE},r.prototype.b2Shape=function(){this.m_type=r.e_unknownShape,this.m_radius=t.b2_linearSlop},Box2D.postDefs.push(function(){Box2D.Collision.Shapes.b2Shape.e_unknownShape=parseInt(-1),Box2D.Collision.Shapes.b2Shape.e_circleShape=0,Box2D.Collision.Shapes.b2Shape.e_polygonShape=1,Box2D.Collision.Shapes.b2Shape.e_edgeShape=2,Box2D.Collision.Shapes.b2Shape.e_shapeTypeCount=3,Box2D.Collision.Shapes.b2Shape.e_hitCollide=1,Box2D.Collision.Shapes.b2Shape.e_missCollide=0,Box2D.Collision.Shapes.b2Shape.e_startsInsideCollide=parseInt(-1)})}(),function(){var t=Box2D.Common.b2Color,e=(Box2D.Common.b2internal,Box2D.Common.b2Settings),i=(Box2D.Common.Math.b2Mat22,Box2D.Common.Math.b2Mat33,Box2D.Common.Math.b2Math);Box2D.Common.Math.b2Sweep,Box2D.Common.Math.b2Transform,Box2D.Common.Math.b2Vec2,Box2D.Common.Math.b2Vec3,t.b2Color=function(){this._r=0,this._g=0,this._b=0},t.prototype.b2Color=function(t,e,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===o&&(o=0),this._r=Box2D.parseUInt(255*i.Clamp(t,0,1)),this._g=Box2D.parseUInt(255*i.Clamp(e,0,1)),this._b=Box2D.parseUInt(255*i.Clamp(o,0,1))},t.prototype.Set=function(t,e,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===o&&(o=0),this._r=Box2D.parseUInt(255*i.Clamp(t,0,1)),this._g=Box2D.parseUInt(255*i.Clamp(e,0,1)),this._b=Box2D.parseUInt(255*i.Clamp(o,0,1))},Object.defineProperty(t.prototype,"r",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._r=Box2D.parseUInt(255*i.Clamp(t,0,1))}}),Object.defineProperty(t.prototype,"g",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._g=Box2D.parseUInt(255*i.Clamp(t,0,1))}}),Object.defineProperty(t.prototype,"b",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._b=Box2D.parseUInt(255*i.Clamp(t,0,1))}}),Object.defineProperty(t.prototype,"color",{enumerable:!1,configurable:!0,get:function(){return this._r<<16|this._g<<8|this._b}}),e.b2Settings=function(){},e.b2MixFriction=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),Math.sqrt(t*e)},e.b2MixRestitution=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),t>e?t:e},e.b2Assert=function(t){if(!t)throw"Assertion Failed"},Box2D.postDefs.push(function(){Box2D.Common.b2Settings.VERSION="2.1alpha",Box2D.Common.b2Settings.USHRT_MAX=65535,Box2D.Common.b2Settings.b2_pi=Math.PI,Box2D.Common.b2Settings.b2_maxManifoldPoints=2,Box2D.Common.b2Settings.b2_aabbExtension=.1,Box2D.Common.b2Settings.b2_aabbMultiplier=2,Box2D.Common.b2Settings.b2_polygonRadius=2*e.b2_linearSlop,Box2D.Common.b2Settings.b2_linearSlop=.005,Box2D.Common.b2Settings.b2_angularSlop=2/180*e.b2_pi,Box2D.Common.b2Settings.b2_toiSlop=8*e.b2_linearSlop,Box2D.Common.b2Settings.b2_maxTOIContactsPerIsland=32,Box2D.Common.b2Settings.b2_maxTOIJointsPerIsland=32,Box2D.Common.b2Settings.b2_velocityThreshold=1,Box2D.Common.b2Settings.b2_maxLinearCorrection=.2,Box2D.Common.b2Settings.b2_maxAngularCorrection=8/180*e.b2_pi,Box2D.Common.b2Settings.b2_maxTranslation=2,Box2D.Common.b2Settings.b2_maxTranslationSquared=e.b2_maxTranslation*e.b2_maxTranslation,Box2D.Common.b2Settings.b2_maxRotation=.5*e.b2_pi,Box2D.Common.b2Settings.b2_maxRotationSquared=e.b2_maxRotation*e.b2_maxRotation,Box2D.Common.b2Settings.b2_contactBaumgarte=.2,Box2D.Common.b2Settings.b2_timeToSleep=.5,Box2D.Common.b2Settings.b2_linearSleepTolerance=.01,Box2D.Common.b2Settings.b2_angularSleepTolerance=2/180*e.b2_pi})}(),function(){var t=(Box2D.Collision.b2AABB,Box2D.Common.b2Color,Box2D.Common.b2internal,Box2D.Common.b2Settings,Box2D.Common.Math.b2Mat22),e=Box2D.Common.Math.b2Mat33,i=Box2D.Common.Math.b2Math,o=Box2D.Common.Math.b2Sweep,n=Box2D.Common.Math.b2Transform,s=Box2D.Common.Math.b2Vec2,r=Box2D.Common.Math.b2Vec3;t.b2Mat22=function(){this.col1=new s,this.col2=new s},t.prototype.b2Mat22=function(){this.SetIdentity()},t.FromAngle=function(e){void 0===e&&(e=0);var i=new t;return i.Set(e),i},t.FromVV=function(e,i){var o=new t;return o.SetVV(e,i),o},t.prototype.Set=function(t){void 0===t&&(t=0);var e=Math.cos(t),i=Math.sin(t);this.col1.x=e,this.col2.x=-i,this.col1.y=i,this.col2.y=e},t.prototype.SetVV=function(t,e){this.col1.SetV(t),this.col2.SetV(e)},t.prototype.Copy=function(){var e=new t;return e.SetM(this),e},t.prototype.SetM=function(t){this.col1.SetV(t.col1),this.col2.SetV(t.col2)},t.prototype.AddM=function(t){this.col1.x+=t.col1.x,this.col1.y+=t.col1.y,this.col2.x+=t.col2.x,this.col2.y+=t.col2.y},t.prototype.SetIdentity=function(){this.col1.x=1,this.col2.x=0,this.col1.y=0,this.col2.y=1},t.prototype.SetZero=function(){this.col1.x=0,this.col2.x=0,this.col1.y=0,this.col2.y=0},t.prototype.GetAngle=function(){return Math.atan2(this.col1.y,this.col1.x)},t.prototype.GetInverse=function(t){var e=this.col1.x,i=this.col2.x,o=this.col1.y,n=this.col2.y,s=e*n-i*o;return 0!=s&&(s=1/s),t.col1.x=s*n,t.col2.x=-s*i,t.col1.y=-s*o,t.col2.y=s*e,t},t.prototype.Solve=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var o=this.col1.x,n=this.col2.x,s=this.col1.y,r=this.col2.y,a=o*r-n*s;return 0!=a&&(a=1/a),t.x=a*(r*e-n*i),t.y=a*(o*i-s*e),t},t.prototype.Abs=function(){this.col1.Abs(),this.col2.Abs()},e.b2Mat33=function(){this.col1=new r,this.col2=new r,this.col3=new r},e.prototype.b2Mat33=function(t,e,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null),t||e||i?(this.col1.SetV(t),this.col2.SetV(e),this.col3.SetV(i)):(this.col1.SetZero(),this.col2.SetZero(),this.col3.SetZero())},e.prototype.SetVVV=function(t,e,i){this.col1.SetV(t),this.col2.SetV(e),this.col3.SetV(i)},e.prototype.Copy=function(){return new e(this.col1,this.col2,this.col3)},e.prototype.SetM=function(t){this.col1.SetV(t.col1),this.col2.SetV(t.col2),this.col3.SetV(t.col3)},e.prototype.AddM=function(t){this.col1.x+=t.col1.x,this.col1.y+=t.col1.y,this.col1.z+=t.col1.z,this.col2.x+=t.col2.x,this.col2.y+=t.col2.y,this.col2.z+=t.col2.z,this.col3.x+=t.col3.x,this.col3.y+=t.col3.y,this.col3.z+=t.col3.z},e.prototype.SetIdentity=function(){this.col1.x=1,this.col2.x=0,this.col3.x=0,this.col1.y=0,this.col2.y=1,this.col3.y=0,this.col1.z=0,this.col2.z=0,this.col3.z=1},e.prototype.SetZero=function(){this.col1.x=0,this.col2.x=0,this.col3.x=0,this.col1.y=0,this.col2.y=0,this.col3.y=0,this.col1.z=0,this.col2.z=0,this.col3.z=0},e.prototype.Solve22=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var o=this.col1.x,n=this.col2.x,s=this.col1.y,r=this.col2.y,a=o*r-n*s;return 0!=a&&(a=1/a),t.x=a*(r*e-n*i),t.y=a*(o*i-s*e),t},e.prototype.Solve33=function(t,e,i,o){void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=0);var n=this.col1.x,s=this.col1.y,r=this.col1.z,a=this.col2.x,l=this.col2.y,c=this.col2.z,m=this.col3.x,u=this.col3.y,h=this.col3.z,p=n*(l*h-c*u)+s*(c*m-a*h)+r*(a*u-l*m);return 0!=p&&(p=1/p),t.x=p*(e*(l*h-c*u)+i*(c*m-a*h)+o*(a*u-l*m)),t.y=p*(n*(i*h-o*u)+s*(o*m-e*h)+r*(e*u-i*m)),t.z=p*(n*(l*o-c*i)+s*(c*e-a*o)+r*(a*i-l*e)),t},i.b2Math=function(){},i.IsValid=function(t){return void 0===t&&(t=0),isFinite(t)},i.Dot=function(t,e){return t.x*e.x+t.y*e.y},i.CrossVV=function(t,e){return t.x*e.y-t.y*e.x},i.CrossVF=function(t,e){void 0===e&&(e=0);var i=new s(e*t.y,-e*t.x);return i},i.CrossFV=function(t,e){void 0===t&&(t=0);var i=new s(-t*e.y,t*e.x);return i},i.MulMV=function(t,e){var i=new s(t.col1.x*e.x+t.col2.x*e.y,t.col1.y*e.x+t.col2.y*e.y);return i},i.MulTMV=function(t,e){var o=new s(i.Dot(e,t.col1),i.Dot(e,t.col2));return o},i.MulX=function(t,e){var o=i.MulMV(t.R,e);return o.x+=t.position.x,o.y+=t.position.y,o},i.MulXT=function(t,e){var o=i.SubtractVV(e,t.position),n=o.x*t.R.col1.x+o.y*t.R.col1.y;return o.y=o.x*t.R.col2.x+o.y*t.R.col2.y,o.x=n,o},i.AddVV=function(t,e){var i=new s(t.x+e.x,t.y+e.y);return i},i.SubtractVV=function(t,e){var i=new s(t.x-e.x,t.y-e.y);return i},i.Distance=function(t,e){var i=t.x-e.x,o=t.y-e.y;return Math.sqrt(i*i+o*o)},i.DistanceSquared=function(t,e){var i=t.x-e.x,o=t.y-e.y;return i*i+o*o},i.MulFV=function(t,e){void 0===t&&(t=0);var i=new s(t*e.x,t*e.y);return i},i.AddMM=function(e,o){var n=t.FromVV(i.AddVV(e.col1,o.col1),i.AddVV(e.col2,o.col2));return n},i.MulMM=function(e,o){var n=t.FromVV(i.MulMV(e,o.col1),i.MulMV(e,o.col2));return n},i.MulTMM=function(e,o){var n=new s(i.Dot(e.col1,o.col1),i.Dot(e.col2,o.col1)),r=new s(i.Dot(e.col1,o.col2),i.Dot(e.col2,o.col2)),a=t.FromVV(n,r);return a},i.Abs=function(t){return void 0===t&&(t=0),t>0?t:-t},i.AbsV=function(t){var e=new s(i.Abs(t.x),i.Abs(t.y));return e},i.AbsM=function(e){var o=t.FromVV(i.AbsV(e.col1),i.AbsV(e.col2));return o},i.Min=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),e>t?t:e},i.MinV=function(t,e){var o=new s(i.Min(t.x,e.x),i.Min(t.y,e.y));return o},i.Max=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),t>e?t:e},i.MaxV=function(t,e){var o=new s(i.Max(t.x,e.x),i.Max(t.y,e.y));return o},i.Clamp=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),e>t?e:t>i?i:t},i.ClampV=function(t,e,o){return i.MaxV(e,i.MinV(t,o))},i.Swap=function(t,e){var i=t[0];t[0]=e[0],e[0]=i},i.Random=function(){return 2*Math.random()-1},i.RandomRange=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var i=Math.random();return i=(e-t)*i+t},i.NextPowerOfTwo=function(t){return void 0===t&&(t=0),t|=2147483647&t>>1,t|=1073741823&t>>2,t|=268435455&t>>4,t|=16777215&t>>8,t|=65535&t>>16,t+1},i.IsPowerOfTwo=function(t){void 0===t&&(t=0);var e=t>0&&0==(t&t-1);return e},Box2D.postDefs.push(function(){Box2D.Common.Math.b2Math.b2Vec2_zero=new s(0,0),Box2D.Common.Math.b2Math.b2Mat22_identity=t.FromVV(new s(1,0),new s(0,1)),Box2D.Common.Math.b2Math.b2Transform_identity=new n(i.b2Vec2_zero,i.b2Mat22_identity)}),o.b2Sweep=function(){this.localCenter=new s,this.c0=new s,this.c=new s},o.prototype.Set=function(t){this.localCenter.SetV(t.localCenter),this.c0.SetV(t.c0),this.c.SetV(t.c),this.a0=t.a0,this.a=t.a,this.t0=t.t0},o.prototype.Copy=function(){var t=new o;return t.localCenter.SetV(this.localCenter),t.c0.SetV(this.c0),t.c.SetV(this.c),t.a0=this.a0,t.a=this.a,t.t0=this.t0,t},o.prototype.GetTransform=function(t,e){void 0===e&&(e=0),t.position.x=(1-e)*this.c0.x+e*this.c.x,t.position.y=(1-e)*this.c0.y+e*this.c.y;var i=(1-e)*this.a0+e*this.a;t.R.Set(i);var o=t.R;t.position.x-=o.col1.x*this.localCenter.x+o.col2.x*this.localCenter.y,t.position.y-=o.col1.y*this.localCenter.x+o.col2.y*this.localCenter.y},o.prototype.Advance=function(t){if(void 0===t&&(t=0),t>this.t0&&1-this.t0>Number.MIN_VALUE){var e=(t-this.t0)/(1-this.t0);this.c0.x=(1-e)*this.c0.x+e*this.c.x,this.c0.y=(1-e)*this.c0.y+e*this.c.y,this.a0=(1-e)*this.a0+e*this.a,this.t0=t}},n.b2Transform=function(){this.position=new s,this.R=new t},n.prototype.b2Transform=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),t&&(this.position.SetV(t),this.R.SetM(e))},n.prototype.Initialize=function(t,e){this.position.SetV(t),this.R.SetM(e)},n.prototype.SetIdentity=function(){this.position.SetZero(),this.R.SetIdentity()},n.prototype.Set=function(t){this.position.SetV(t.position),this.R.SetM(t.R)},n.prototype.GetAngle=function(){return Math.atan2(this.R.col1.y,this.R.col1.x)},s.b2Vec2=function(){},s.prototype.b2Vec2=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e},s.prototype.SetZero=function(){this.x=0,this.y=0},s.prototype.Set=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e},s.prototype.SetV=function(t){this.x=t.x,this.y=t.y},s.prototype.GetNegative=function(){return new s(-this.x,-this.y)},s.prototype.NegativeSelf=function(){this.x=-this.x,this.y=-this.y},s.Make=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),new s(t,e)},s.prototype.Copy=function(){return new s(this.x,this.y)},s.prototype.Add=function(t){this.x+=t.x,this.y+=t.y},s.prototype.Subtract=function(t){this.x-=t.x,this.y-=t.y},s.prototype.Multiply=function(t){void 0===t&&(t=0),this.x*=t,this.y*=t},s.prototype.MulM=function(t){var e=this.x;this.x=t.col1.x*e+t.col2.x*this.y,this.y=t.col1.y*e+t.col2.y*this.y},s.prototype.MulTM=function(t){var e=i.Dot(this,t.col1);this.y=i.Dot(this,t.col2),this.x=e},s.prototype.CrossVF=function(t){void 0===t&&(t=0);var e=this.x;this.x=t*this.y,this.y=-t*e},s.prototype.CrossFV=function(t){void 0===t&&(t=0);var e=this.x;this.x=-t*this.y,this.y=t*e},s.prototype.MinV=function(t){this.x=this.x<t.x?this.x:t.x,this.y=this.y<t.y?this.y:t.y},s.prototype.MaxV=function(t){this.x=this.x>t.x?this.x:t.x,this.y=this.y>t.y?this.y:t.y},s.prototype.Abs=function(){0>this.x&&(this.x=-this.x),0>this.y&&(this.y=-this.y)},s.prototype.Length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},s.prototype.LengthSquared=function(){return this.x*this.x+this.y*this.y},s.prototype.Normalize=function(){var t=Math.sqrt(this.x*this.x+this.y*this.y);if(Number.MIN_VALUE>t)return 0;var e=1/t;return this.x*=e,this.y*=e,t},s.prototype.IsValid=function(){return i.IsValid(this.x)&&i.IsValid(this.y)},r.b2Vec3=function(){},r.prototype.b2Vec3=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=t,this.y=e,this.z=i},r.prototype.SetZero=function(){this.x=this.y=this.z=0},r.prototype.Set=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=t,this.y=e,this.z=i},r.prototype.SetV=function(t){this.x=t.x,this.y=t.y,this.z=t.z},r.prototype.GetNegative=function(){return new r(-this.x,-this.y,-this.z)},r.prototype.NegativeSelf=function(){this.x=-this.x,this.y=-this.y,this.z=-this.z},r.prototype.Copy=function(){return new r(this.x,this.y,this.z)},r.prototype.Add=function(t){this.x+=t.x,this.y+=t.y,this.z+=t.z},r.prototype.Subtract=function(t){this.x-=t.x,this.y-=t.y,this.z-=t.z},r.prototype.Multiply=function(t){void 0===t&&(t=0),this.x*=t,this.y*=t,this.z*=t}}(),function(){var t=(Box2D.Dynamics.Controllers.b2ControllerEdge,Box2D.Common.Math.b2Mat22,Box2D.Common.Math.b2Mat33,Box2D.Common.Math.b2Math),e=Box2D.Common.Math.b2Sweep,i=Box2D.Common.Math.b2Transform,o=Box2D.Common.Math.b2Vec2,n=(Box2D.Common.Math.b2Vec3,Box2D.Common.b2Color),s=(Box2D.Common.b2internal,Box2D.Common.b2Settings),r=Box2D.Collision.b2AABB,a=(Box2D.Collision.b2Bound,Box2D.Collision.b2BoundValues,Box2D.Collision.b2Collision,Box2D.Collision.b2ContactID,Box2D.Collision.b2ContactPoint),l=(Box2D.Collision.b2Distance,Box2D.Collision.b2DistanceInput,Box2D.Collision.b2DistanceOutput,Box2D.Collision.b2DistanceProxy,Box2D.Collision.b2DynamicTree,Box2D.Collision.b2DynamicTreeBroadPhase),c=(Box2D.Collision.b2DynamicTreeNode,Box2D.Collision.b2DynamicTreePair,Box2D.Collision.b2Manifold,Box2D.Collision.b2ManifoldPoint,Box2D.Collision.b2Point,Box2D.Collision.b2RayCastInput),m=Box2D.Collision.b2RayCastOutput,u=(Box2D.Collision.b2Segment,Box2D.Collision.b2SeparationFunction,Box2D.Collision.b2Simplex,Box2D.Collision.b2SimplexCache,Box2D.Collision.b2SimplexVertex,Box2D.Collision.b2TimeOfImpact,Box2D.Collision.b2TOIInput,Box2D.Collision.b2WorldManifold,Box2D.Collision.ClipVertex,Box2D.Collision.Features,Box2D.Collision.IBroadPhase,Box2D.Collision.Shapes.b2CircleShape),h=(Box2D.Collision.Shapes.b2EdgeChainDef,Box2D.Collision.Shapes.b2EdgeShape),p=Box2D.Collision.Shapes.b2MassData,_=Box2D.Collision.Shapes.b2PolygonShape,y=Box2D.Collision.Shapes.b2Shape,f=Box2D.Dynamics.b2Body,d=Box2D.Dynamics.b2BodyDef,x=Box2D.Dynamics.b2ContactFilter,v=Box2D.Dynamics.b2ContactImpulse,b=Box2D.Dynamics.b2ContactListener,g=Box2D.Dynamics.b2ContactManager,D=Box2D.Dynamics.b2DebugDraw,C=Box2D.Dynamics.b2DestructionListener,B=Box2D.Dynamics.b2FilterData,w=Box2D.Dynamics.b2Fixture,S=Box2D.Dynamics.b2FixtureDef,A=Box2D.Dynamics.b2Island,M=Box2D.Dynamics.b2TimeStep,V=Box2D.Dynamics.b2World,T=(Box2D.Dynamics.Contacts.b2CircleContact,Box2D.Dynamics.Contacts.b2Contact),I=(Box2D.Dynamics.Contacts.b2ContactConstraint,Box2D.Dynamics.Contacts.b2ContactConstraintPoint,Box2D.Dynamics.Contacts.b2ContactEdge,Box2D.Dynamics.Contacts.b2ContactFactory),L=(Box2D.Dynamics.Contacts.b2ContactRegister,Box2D.Dynamics.Contacts.b2ContactResult,Box2D.Dynamics.Contacts.b2ContactSolver),P=(Box2D.Dynamics.Contacts.b2EdgeAndCircleContact,Box2D.Dynamics.Contacts.b2NullContact,Box2D.Dynamics.Contacts.b2PolyAndCircleContact,Box2D.Dynamics.Contacts.b2PolyAndEdgeContact,Box2D.Dynamics.Contacts.b2PolygonContact,Box2D.Dynamics.Contacts.b2PositionSolverManifold,Box2D.Dynamics.Controllers.b2Controller,Box2D.Dynamics.Joints.b2DistanceJoint,Box2D.Dynamics.Joints.b2DistanceJointDef,Box2D.Dynamics.Joints.b2FrictionJoint,Box2D.Dynamics.Joints.b2FrictionJointDef,Box2D.Dynamics.Joints.b2GearJoint,Box2D.Dynamics.Joints.b2GearJointDef,Box2D.Dynamics.Joints.b2Jacobian,Box2D.Dynamics.Joints.b2Joint),F=(Box2D.Dynamics.Joints.b2JointDef,Box2D.Dynamics.Joints.b2JointEdge,Box2D.Dynamics.Joints.b2LineJoint,Box2D.Dynamics.Joints.b2LineJointDef,Box2D.Dynamics.Joints.b2MouseJoint,Box2D.Dynamics.Joints.b2MouseJointDef,Box2D.Dynamics.Joints.b2PrismaticJoint,Box2D.Dynamics.Joints.b2PrismaticJointDef,Box2D.Dynamics.Joints.b2PulleyJoint);Box2D.Dynamics.Joints.b2PulleyJointDef,Box2D.Dynamics.Joints.b2RevoluteJoint,Box2D.Dynamics.Joints.b2RevoluteJointDef,Box2D.Dynamics.Joints.b2WeldJoint,Box2D.Dynamics.Joints.b2WeldJointDef,f.b2Body=function(){this.m_xf=new i,this.m_sweep=new e,this.m_linearVelocity=new o,this.m_force=new o},f.prototype.connectEdges=function(e,i,o){void 0===o&&(o=0);var n=Math.atan2(i.GetDirectionVector().y,i.GetDirectionVector().x),r=Math.tan(.5*(n-o)),a=t.MulFV(r,i.GetDirectionVector());a=t.SubtractVV(a,i.GetNormalVector()),a=t.MulFV(s.b2_toiSlop,a),a=t.AddVV(a,i.GetVertex1());var l=t.AddVV(e.GetDirectionVector(),i.GetDirectionVector());l.Normalize();var c=t.Dot(e.GetDirectionVector(),i.GetNormalVector())>0;return e.SetNextEdge(i,a,l,c),i.SetPrevEdge(e,a,l,c),n},f.prototype.CreateFixture=function(t){if(1==this.m_world.IsLocked())return null;var e=new w;if(e.Create(this,this.m_xf,t),this.m_flags&f.e_activeFlag){var i=this.m_world.m_contactManager.m_broadPhase;e.CreateProxy(i,this.m_xf)}return e.m_next=this.m_fixtureList,this.m_fixtureList=e,++this.m_fixtureCount,e.m_body=this,e.m_density>0&&this.ResetMassData(),this.m_world.m_flags|=V.e_newFixture,e},f.prototype.CreateFixture2=function(t,e){void 0===e&&(e=0);var i=new S;return i.shape=t,i.density=e,this.CreateFixture(i)},f.prototype.DestroyFixture=function(t){if(1!=this.m_world.IsLocked()){for(var e=this.m_fixtureList,i=null,o=!1;null!=e;){if(e==t){i?i.m_next=t.m_next:this.m_fixtureList=t.m_next,o=!0;break}i=e,e=e.m_next}for(var n=this.m_contactList;n;){var s=n.contact;n=n.next;var r=s.GetFixtureA(),a=s.GetFixtureB();(t==r||t==a)&&this.m_world.m_contactManager.Destroy(s)}if(this.m_flags&f.e_activeFlag){var l=this.m_world.m_contactManager.m_broadPhase;t.DestroyProxy(l)}t.Destroy(),t.m_body=null,t.m_next=null,--this.m_fixtureCount,this.ResetMassData()}},f.prototype.SetPositionAndAngle=function(t,e){void 0===e&&(e=0);var i;if(1!=this.m_world.IsLocked()){this.m_xf.R.Set(e),this.m_xf.position.SetV(t);var o=this.m_xf.R,n=this.m_sweep.localCenter;this.m_sweep.c.x=o.col1.x*n.x+o.col2.x*n.y,this.m_sweep.c.y=o.col1.y*n.x+o.col2.y*n.y,this.m_sweep.c.x+=this.m_xf.position.x,this.m_sweep.c.y+=this.m_xf.position.y,this.m_sweep.c0.SetV(this.m_sweep.c),this.m_sweep.a0=this.m_sweep.a=e;var s=this.m_world.m_contactManager.m_broadPhase;for(i=this.m_fixtureList;i;i=i.m_next)i.Synchronize(s,this.m_xf,this.m_xf);this.m_world.m_contactManager.FindNewContacts()}},f.prototype.SetTransform=function(t){this.SetPositionAndAngle(t.position,t.GetAngle())},f.prototype.GetTransform=function(){return this.m_xf},f.prototype.GetPosition=function(){return this.m_xf.position},f.prototype.SetPosition=function(t){this.SetPositionAndAngle(t,this.GetAngle())},f.prototype.GetAngle=function(){return this.m_sweep.a},f.prototype.SetAngle=function(t){void 0===t&&(t=0),this.SetPositionAndAngle(this.GetPosition(),t)},f.prototype.GetWorldCenter=function(){return this.m_sweep.c},f.prototype.GetLocalCenter=function(){return this.m_sweep.localCenter},f.prototype.SetLinearVelocity=function(t){this.m_type!=f.b2_staticBody&&this.m_linearVelocity.SetV(t)},f.prototype.GetLinearVelocity=function(){return this.m_linearVelocity},f.prototype.SetAngularVelocity=function(t){void 0===t&&(t=0),this.m_type!=f.b2_staticBody&&(this.m_angularVelocity=t)},f.prototype.GetAngularVelocity=function(){return this.m_angularVelocity},f.prototype.GetDefinition=function(){var t=new d;return t.type=this.GetType(),t.allowSleep=(this.m_flags&f.e_allowSleepFlag)==f.e_allowSleepFlag,t.angle=this.GetAngle(),t.angularDamping=this.m_angularDamping,t.angularVelocity=this.m_angularVelocity,t.fixedRotation=(this.m_flags&f.e_fixedRotationFlag)==f.e_fixedRotationFlag,t.bullet=(this.m_flags&f.e_bulletFlag)==f.e_bulletFlag,t.awake=(this.m_flags&f.e_awakeFlag)==f.e_awakeFlag,t.linearDamping=this.m_linearDamping,t.linearVelocity.SetV(this.GetLinearVelocity()),t.position=this.GetPosition(),t.userData=this.GetUserData(),t},f.prototype.ApplyForce=function(t,e){this.m_type==f.b2_dynamicBody&&(0==this.IsAwake()&&this.SetAwake(!0),this.m_force.x+=t.x,this.m_force.y+=t.y,this.m_torque+=(e.x-this.m_sweep.c.x)*t.y-(e.y-this.m_sweep.c.y)*t.x)},f.prototype.ApplyTorque=function(t){void 0===t&&(t=0),this.m_type==f.b2_dynamicBody&&(0==this.IsAwake()&&this.SetAwake(!0),this.m_torque+=t)},f.prototype.ApplyImpulse=function(t,e){this.m_type==f.b2_dynamicBody&&(0==this.IsAwake()&&this.SetAwake(!0),this.m_linearVelocity.x+=this.m_invMass*t.x,this.m_linearVelocity.y+=this.m_invMass*t.y,this.m_angularVelocity+=this.m_invI*((e.x-this.m_sweep.c.x)*t.y-(e.y-this.m_sweep.c.y)*t.x))},f.prototype.Split=function(e){for(var i,o=this.GetLinearVelocity().Copy(),n=this.GetAngularVelocity(),s=this.GetWorldCenter(),r=this,a=this.m_world.CreateBody(this.GetDefinition()),l=r.m_fixtureList;l;)if(e(l)){var c=l.m_next;i?i.m_next=c:r.m_fixtureList=c,r.m_fixtureCount--,l.m_next=a.m_fixtureList,a.m_fixtureList=l,a.m_fixtureCount++,l.m_body=a,l=c}else i=l,l=l.m_next;r.ResetMassData(),a.ResetMassData();var m=r.GetWorldCenter(),u=a.GetWorldCenter(),h=t.AddVV(o,t.CrossFV(n,t.SubtractVV(m,s))),p=t.AddVV(o,t.CrossFV(n,t.SubtractVV(u,s)));return r.SetLinearVelocity(h),a.SetLinearVelocity(p),r.SetAngularVelocity(n),a.SetAngularVelocity(n),r.SynchronizeFixtures(),a.SynchronizeFixtures(),a},f.prototype.Merge=function(t){var e;for(e=t.m_fixtureList;e;){var i=e.m_next;t.m_fixtureCount--,e.m_next=this.m_fixtureList,this.m_fixtureList=e,this.m_fixtureCount++,e.m_body=n,e=i}o.m_fixtureCount=0;var o=this,n=t;o.GetWorldCenter(),n.GetWorldCenter(),o.GetLinearVelocity().Copy(),n.GetLinearVelocity().Copy(),o.GetAngularVelocity(),n.GetAngularVelocity(),o.ResetMassData(),this.SynchronizeFixtures()},f.prototype.GetMass=function(){return this.m_mass},f.prototype.GetInertia=function(){return this.m_I},f.prototype.GetMassData=function(t){t.mass=this.m_mass,t.I=this.m_I,t.center.SetV(this.m_sweep.localCenter)},f.prototype.SetMassData=function(e){if(s.b2Assert(0==this.m_world.IsLocked()),1!=this.m_world.IsLocked()&&this.m_type==f.b2_dynamicBody){this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_mass=e.mass,0>=this.m_mass&&(this.m_mass=1),this.m_invMass=1/this.m_mass,e.I>0&&0==(this.m_flags&f.e_fixedRotationFlag)&&(this.m_I=e.I-this.m_mass*(e.center.x*e.center.x+e.center.y*e.center.y),this.m_invI=1/this.m_I);var i=this.m_sweep.c.Copy();this.m_sweep.localCenter.SetV(e.center),this.m_sweep.c0.SetV(t.MulX(this.m_xf,this.m_sweep.localCenter)),this.m_sweep.c.SetV(this.m_sweep.c0),this.m_linearVelocity.x+=this.m_angularVelocity*-(this.m_sweep.c.y-i.y),this.m_linearVelocity.y+=this.m_angularVelocity*+(this.m_sweep.c.x-i.x)}},f.prototype.ResetMassData=function(){if(this.m_mass=0,this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_sweep.localCenter.SetZero(),this.m_type!=f.b2_staticBody&&this.m_type!=f.b2_kinematicBody){for(var e=o.Make(0,0),i=this.m_fixtureList;i;i=i.m_next)if(0!=i.m_density){var n=i.GetMassData();this.m_mass+=n.mass,e.x+=n.center.x*n.mass,e.y+=n.center.y*n.mass,this.m_I+=n.I}this.m_mass>0?(this.m_invMass=1/this.m_mass,e.x*=this.m_invMass,e.y*=this.m_invMass):(this.m_mass=1,this.m_invMass=1),this.m_I>0&&0==(this.m_flags&f.e_fixedRotationFlag)?(this.m_I-=this.m_mass*(e.x*e.x+e.y*e.y),this.m_I*=this.m_inertiaScale,s.b2Assert(this.m_I>0),this.m_invI=1/this.m_I):(this.m_I=0,this.m_invI=0);var r=this.m_sweep.c.Copy();this.m_sweep.localCenter.SetV(e),this.m_sweep.c0.SetV(t.MulX(this.m_xf,this.m_sweep.localCenter)),this.m_sweep.c.SetV(this.m_sweep.c0),this.m_linearVelocity.x+=this.m_angularVelocity*-(this.m_sweep.c.y-r.y),this.m_linearVelocity.y+=this.m_angularVelocity*+(this.m_sweep.c.x-r.x)}},f.prototype.GetWorldPoint=function(t){var e=this.m_xf.R,i=new o(e.col1.x*t.x+e.col2.x*t.y,e.col1.y*t.x+e.col2.y*t.y);return i.x+=this.m_xf.position.x,i.y+=this.m_xf.position.y,i},f.prototype.GetWorldVector=function(e){return t.MulMV(this.m_xf.R,e)},f.prototype.GetLocalPoint=function(e){return t.MulXT(this.m_xf,e)},f.prototype.GetLocalVector=function(e){return t.MulTMV(this.m_xf.R,e)},f.prototype.GetLinearVelocityFromWorldPoint=function(t){return new o(this.m_linearVelocity.x-this.m_angularVelocity*(t.y-this.m_sweep.c.y),this.m_linearVelocity.y+this.m_angularVelocity*(t.x-this.m_sweep.c.x))},f.prototype.GetLinearVelocityFromLocalPoint=function(t){var e=this.m_xf.R,i=new o(e.col1.x*t.x+e.col2.x*t.y,e.col1.y*t.x+e.col2.y*t.y);return i.x+=this.m_xf.position.x,i.y+=this.m_xf.position.y,new o(this.m_linearVelocity.x-this.m_angularVelocity*(i.y-this.m_sweep.c.y),this.m_linearVelocity.y+this.m_angularVelocity*(i.x-this.m_sweep.c.x))},f.prototype.GetLinearDamping=function(){return this.m_linearDamping},f.prototype.SetLinearDamping=function(t){void 0===t&&(t=0),this.m_linearDamping=t},f.prototype.GetAngularDamping=function(){return this.m_angularDamping},f.prototype.SetAngularDamping=function(t){void 0===t&&(t=0),this.m_angularDamping=t},f.prototype.SetType=function(t){if(void 0===t&&(t=0),this.m_type!=t){this.m_type=t,this.ResetMassData(),this.m_type==f.b2_staticBody&&(this.m_linearVelocity.SetZero(),this.m_angularVelocity=0),this.SetAwake(!0),this.m_force.SetZero(),this.m_torque=0;for(var e=this.m_contactList;e;e=e.next)e.contact.FlagForFiltering()}},f.prototype.GetType=function(){return this.m_type},f.prototype.SetBullet=function(t){t?this.m_flags|=f.e_bulletFlag:this.m_flags&=~f.e_bulletFlag},f.prototype.IsBullet=function(){return(this.m_flags&f.e_bulletFlag)==f.e_bulletFlag},f.prototype.SetSleepingAllowed=function(t){t?this.m_flags|=f.e_allowSleepFlag:(this.m_flags&=~f.e_allowSleepFlag,this.SetAwake(!0))},f.prototype.SetAwake=function(t){t?(this.m_flags|=f.e_awakeFlag,this.m_sleepTime=0):(this.m_flags&=~f.e_awakeFlag,this.m_sleepTime=0,this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_force.SetZero(),this.m_torque=0)},f.prototype.IsAwake=function(){return(this.m_flags&f.e_awakeFlag)==f.e_awakeFlag},f.prototype.SetFixedRotation=function(t){t?this.m_flags|=f.e_fixedRotationFlag:this.m_flags&=~f.e_fixedRotationFlag,this.ResetMassData()},f.prototype.IsFixedRotation=function(){return(this.m_flags&f.e_fixedRotationFlag)==f.e_fixedRotationFlag},f.prototype.SetActive=function(t){if(t!=this.IsActive()){var e,i;if(t)for(this.m_flags|=f.e_activeFlag,e=this.m_world.m_contactManager.m_broadPhase,i=this.m_fixtureList;i;i=i.m_next)i.CreateProxy(e,this.m_xf);else{for(this.m_flags&=~f.e_activeFlag,e=this.m_world.m_contactManager.m_broadPhase,i=this.m_fixtureList;i;i=i.m_next)i.DestroyProxy(e);for(var o=this.m_contactList;o;){var n=o;o=o.next,this.m_world.m_contactManager.Destroy(n.contact)}this.m_contactList=null}}},f.prototype.IsActive=function(){return(this.m_flags&f.e_activeFlag)==f.e_activeFlag
},f.prototype.IsSleepingAllowed=function(){return(this.m_flags&f.e_allowSleepFlag)==f.e_allowSleepFlag},f.prototype.GetFixtureList=function(){return this.m_fixtureList},f.prototype.GetJointList=function(){return this.m_jointList},f.prototype.GetControllerList=function(){return this.m_controllerList},f.prototype.GetContactList=function(){return this.m_contactList},f.prototype.GetNext=function(){return this.m_next},f.prototype.GetUserData=function(){return this.m_userData},f.prototype.SetUserData=function(t){this.m_userData=t},f.prototype.GetWorld=function(){return this.m_world},f.prototype.b2Body=function(t,e){this.m_flags=0,t.bullet&&(this.m_flags|=f.e_bulletFlag),t.fixedRotation&&(this.m_flags|=f.e_fixedRotationFlag),t.allowSleep&&(this.m_flags|=f.e_allowSleepFlag),t.awake&&(this.m_flags|=f.e_awakeFlag),t.active&&(this.m_flags|=f.e_activeFlag),this.m_world=e,this.m_xf.position.SetV(t.position),this.m_xf.R.Set(t.angle),this.m_sweep.localCenter.SetZero(),this.m_sweep.t0=1,this.m_sweep.a0=this.m_sweep.a=t.angle;var i=this.m_xf.R,o=this.m_sweep.localCenter;this.m_sweep.c.x=i.col1.x*o.x+i.col2.x*o.y,this.m_sweep.c.y=i.col1.y*o.x+i.col2.y*o.y,this.m_sweep.c.x+=this.m_xf.position.x,this.m_sweep.c.y+=this.m_xf.position.y,this.m_sweep.c0.SetV(this.m_sweep.c),this.m_jointList=null,this.m_controllerList=null,this.m_contactList=null,this.m_controllerCount=0,this.m_prev=null,this.m_next=null,this.m_linearVelocity.SetV(t.linearVelocity),this.m_angularVelocity=t.angularVelocity,this.m_linearDamping=t.linearDamping,this.m_angularDamping=t.angularDamping,this.m_force.Set(0,0),this.m_torque=0,this.m_sleepTime=0,this.m_type=t.type,this.m_type==f.b2_dynamicBody?(this.m_mass=1,this.m_invMass=1):(this.m_mass=0,this.m_invMass=0),this.m_I=0,this.m_invI=0,this.m_inertiaScale=t.inertiaScale,this.m_userData=t.userData,this.m_fixtureList=null,this.m_fixtureCount=0},f.prototype.SynchronizeFixtures=function(){var t=f.s_xf1;t.R.Set(this.m_sweep.a0);var e=t.R,i=this.m_sweep.localCenter;t.position.x=this.m_sweep.c0.x-(e.col1.x*i.x+e.col2.x*i.y),t.position.y=this.m_sweep.c0.y-(e.col1.y*i.x+e.col2.y*i.y);var o,n=this.m_world.m_contactManager.m_broadPhase;for(o=this.m_fixtureList;o;o=o.m_next)o.Synchronize(n,t,this.m_xf)},f.prototype.SynchronizeTransform=function(){this.m_xf.R.Set(this.m_sweep.a);var t=this.m_xf.R,e=this.m_sweep.localCenter;this.m_xf.position.x=this.m_sweep.c.x-(t.col1.x*e.x+t.col2.x*e.y),this.m_xf.position.y=this.m_sweep.c.y-(t.col1.y*e.x+t.col2.y*e.y)},f.prototype.ShouldCollide=function(t){if(this.m_type!=f.b2_dynamicBody&&t.m_type!=f.b2_dynamicBody)return!1;for(var e=this.m_jointList;e;e=e.next)if(e.other==t&&0==e.joint.m_collideConnected)return!1;return!0},f.prototype.Advance=function(t){void 0===t&&(t=0),this.m_sweep.Advance(t),this.m_sweep.c.SetV(this.m_sweep.c0),this.m_sweep.a=this.m_sweep.a0,this.SynchronizeTransform()},Box2D.postDefs.push(function(){Box2D.Dynamics.b2Body.s_xf1=new i,Box2D.Dynamics.b2Body.e_islandFlag=1,Box2D.Dynamics.b2Body.e_awakeFlag=2,Box2D.Dynamics.b2Body.e_allowSleepFlag=4,Box2D.Dynamics.b2Body.e_bulletFlag=8,Box2D.Dynamics.b2Body.e_fixedRotationFlag=16,Box2D.Dynamics.b2Body.e_activeFlag=32,Box2D.Dynamics.b2Body.b2_staticBody=0,Box2D.Dynamics.b2Body.b2_kinematicBody=1,Box2D.Dynamics.b2Body.b2_dynamicBody=2}),d.b2BodyDef=function(){this.position=new o,this.linearVelocity=new o},d.prototype.b2BodyDef=function(){this.userData=null,this.position.Set(0,0),this.angle=0,this.linearVelocity.Set(0,0),this.angularVelocity=0,this.linearDamping=0,this.angularDamping=0,this.allowSleep=!0,this.awake=!0,this.fixedRotation=!1,this.bullet=!1,this.type=f.b2_staticBody,this.active=!0,this.inertiaScale=1},x.b2ContactFilter=function(){},x.prototype.ShouldCollide=function(t,e){var i=t.GetFilterData(),o=e.GetFilterData();if(i.groupIndex==o.groupIndex&&0!=i.groupIndex)return i.groupIndex>0;var n=0!=(i.maskBits&o.categoryBits)&&0!=(i.categoryBits&o.maskBits);return n},x.prototype.RayCollide=function(t,e){return t?this.ShouldCollide(t instanceof w?t:null,e):!0},Box2D.postDefs.push(function(){Box2D.Dynamics.b2ContactFilter.b2_defaultFilter=new x}),v.b2ContactImpulse=function(){this.normalImpulses=new Vector_a2j_Number(s.b2_maxManifoldPoints),this.tangentImpulses=new Vector_a2j_Number(s.b2_maxManifoldPoints)},b.b2ContactListener=function(){},b.prototype.BeginContact=function(){},b.prototype.EndContact=function(){},b.prototype.PreSolve=function(){},b.prototype.PostSolve=function(){},Box2D.postDefs.push(function(){Box2D.Dynamics.b2ContactListener.b2_defaultListener=new b}),g.b2ContactManager=function(){},g.prototype.b2ContactManager=function(){this.m_world=null,this.m_contactCount=0,this.m_contactFilter=x.b2_defaultFilter,this.m_contactListener=b.b2_defaultListener,this.m_contactFactory=new I(this.m_allocator),this.m_broadPhase=new l},g.prototype.AddPair=function(t,e){var i=t instanceof w?t:null,o=e instanceof w?e:null,n=i.GetBody(),s=o.GetBody();if(n!=s){for(var r=s.GetContactList();r;){if(r.other==n){var a=r.contact.GetFixtureA(),l=r.contact.GetFixtureB();if(a==i&&l==o)return;if(a==o&&l==i)return}r=r.next}if(0!=s.ShouldCollide(n)&&0!=this.m_contactFilter.ShouldCollide(i,o)){var c=this.m_contactFactory.Create(i,o);i=c.GetFixtureA(),o=c.GetFixtureB(),n=i.m_body,s=o.m_body,c.m_prev=null,c.m_next=this.m_world.m_contactList,null!=this.m_world.m_contactList&&(this.m_world.m_contactList.m_prev=c),this.m_world.m_contactList=c,c.m_nodeA.contact=c,c.m_nodeA.other=s,c.m_nodeA.prev=null,c.m_nodeA.next=n.m_contactList,null!=n.m_contactList&&(n.m_contactList.prev=c.m_nodeA),n.m_contactList=c.m_nodeA,c.m_nodeB.contact=c,c.m_nodeB.other=n,c.m_nodeB.prev=null,c.m_nodeB.next=s.m_contactList,null!=s.m_contactList&&(s.m_contactList.prev=c.m_nodeB),s.m_contactList=c.m_nodeB,++this.m_world.m_contactCount}}},g.prototype.FindNewContacts=function(){this.m_broadPhase.UpdatePairs(Box2D.generateCallback(this,this.AddPair))},g.prototype.Destroy=function(t){var e=t.GetFixtureA(),i=t.GetFixtureB(),o=e.GetBody(),n=i.GetBody();t.IsTouching()&&this.m_contactListener.EndContact(t),t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_world.m_contactList&&(this.m_world.m_contactList=t.m_next),t.m_nodeA.prev&&(t.m_nodeA.prev.next=t.m_nodeA.next),t.m_nodeA.next&&(t.m_nodeA.next.prev=t.m_nodeA.prev),t.m_nodeA==o.m_contactList&&(o.m_contactList=t.m_nodeA.next),t.m_nodeB.prev&&(t.m_nodeB.prev.next=t.m_nodeB.next),t.m_nodeB.next&&(t.m_nodeB.next.prev=t.m_nodeB.prev),t.m_nodeB==n.m_contactList&&(n.m_contactList=t.m_nodeB.next),this.m_contactFactory.Destroy(t),--this.m_contactCount},g.prototype.Collide=function(){for(var t=this.m_world.m_contactList;t;){var e=t.GetFixtureA(),i=t.GetFixtureB(),o=e.GetBody(),n=i.GetBody();if(0!=o.IsAwake()||0!=n.IsAwake()){if(t.m_flags&T.e_filterFlag){if(0==n.ShouldCollide(o)){var s=t;t=s.GetNext(),this.Destroy(s);continue}if(0==this.m_contactFilter.ShouldCollide(e,i)){s=t,t=s.GetNext(),this.Destroy(s);continue}t.m_flags&=~T.e_filterFlag}var r=e.m_proxy,a=i.m_proxy,l=this.m_broadPhase.TestOverlap(r,a);0!=l?(t.Update(this.m_contactListener),t=t.GetNext()):(s=t,t=s.GetNext(),this.Destroy(s))}else t=t.GetNext()}},Box2D.postDefs.push(function(){Box2D.Dynamics.b2ContactManager.s_evalCP=new a}),D.b2DebugDraw=function(){},D.prototype.b2DebugDraw=function(){},D.prototype.SetFlags=function(t){void 0===t&&(t=0)},D.prototype.GetFlags=function(){},D.prototype.AppendFlags=function(t){void 0===t&&(t=0)},D.prototype.ClearFlags=function(t){void 0===t&&(t=0)},D.prototype.SetSprite=function(){},D.prototype.GetSprite=function(){},D.prototype.SetDrawScale=function(t){void 0===t&&(t=0)},D.prototype.GetDrawScale=function(){},D.prototype.SetLineThickness=function(t){void 0===t&&(t=0)},D.prototype.GetLineThickness=function(){},D.prototype.SetAlpha=function(t){void 0===t&&(t=0)},D.prototype.GetAlpha=function(){},D.prototype.SetFillAlpha=function(t){void 0===t&&(t=0)},D.prototype.GetFillAlpha=function(){},D.prototype.SetXFormScale=function(t){void 0===t&&(t=0)},D.prototype.GetXFormScale=function(){},D.prototype.DrawPolygon=function(t,e){void 0===e&&(e=0)},D.prototype.DrawSolidPolygon=function(t,e){void 0===e&&(e=0)},D.prototype.DrawCircle=function(t,e){void 0===e&&(e=0)},D.prototype.DrawSolidCircle=function(t,e){void 0===e&&(e=0)},D.prototype.DrawSegment=function(){},D.prototype.DrawTransform=function(){},Box2D.postDefs.push(function(){Box2D.Dynamics.b2DebugDraw.e_shapeBit=1,Box2D.Dynamics.b2DebugDraw.e_jointBit=2,Box2D.Dynamics.b2DebugDraw.e_aabbBit=4,Box2D.Dynamics.b2DebugDraw.e_pairBit=8,Box2D.Dynamics.b2DebugDraw.e_centerOfMassBit=16,Box2D.Dynamics.b2DebugDraw.e_controllerBit=32}),C.b2DestructionListener=function(){},C.prototype.SayGoodbyeJoint=function(){},C.prototype.SayGoodbyeFixture=function(){},B.b2FilterData=function(){this.categoryBits=1,this.maskBits=65535,this.groupIndex=0},B.prototype.Copy=function(){var t=new B;return t.categoryBits=this.categoryBits,t.maskBits=this.maskBits,t.groupIndex=this.groupIndex,t},w.b2Fixture=function(){this.m_filter=new B},w.prototype.GetType=function(){return this.m_shape.GetType()},w.prototype.GetShape=function(){return this.m_shape},w.prototype.SetSensor=function(t){if(this.m_isSensor!=t&&(this.m_isSensor=t,null!=this.m_body))for(var e=this.m_body.GetContactList();e;){var i=e.contact,o=i.GetFixtureA(),n=i.GetFixtureB();(o==this||n==this)&&i.SetSensor(o.IsSensor()||n.IsSensor()),e=e.next}},w.prototype.IsSensor=function(){return this.m_isSensor},w.prototype.SetFilterData=function(t){if(this.m_filter=t.Copy(),!this.m_body)for(var e=this.m_body.GetContactList();e;){var i=e.contact,o=i.GetFixtureA(),n=i.GetFixtureB();(o==this||n==this)&&i.FlagForFiltering(),e=e.next}},w.prototype.GetFilterData=function(){return this.m_filter.Copy()},w.prototype.GetBody=function(){return this.m_body},w.prototype.GetNext=function(){return this.m_next},w.prototype.GetUserData=function(){return this.m_userData},w.prototype.SetUserData=function(t){this.m_userData=t},w.prototype.TestPoint=function(t){return this.m_shape.TestPoint(this.m_body.GetTransform(),t)},w.prototype.RayCast=function(t,e){return this.m_shape.RayCast(t,e,this.m_body.GetTransform())},w.prototype.GetMassData=function(t){return void 0===t&&(t=null),null==t&&(t=new p),this.m_shape.ComputeMass(t,this.m_density),t},w.prototype.SetDensity=function(t){void 0===t&&(t=0),this.m_density=t},w.prototype.GetDensity=function(){return this.m_density},w.prototype.GetFriction=function(){return this.m_friction},w.prototype.SetFriction=function(t){void 0===t&&(t=0),this.m_friction=t},w.prototype.GetRestitution=function(){return this.m_restitution},w.prototype.SetRestitution=function(t){void 0===t&&(t=0),this.m_restitution=t},w.prototype.GetAABB=function(){return this.m_aabb},w.prototype.b2Fixture=function(){this.m_aabb=new r,this.m_userData=null,this.m_body=null,this.m_next=null,this.m_shape=null,this.m_density=0,this.m_friction=0,this.m_restitution=0},w.prototype.Create=function(t,e,i){this.m_userData=i.userData,this.m_friction=i.friction,this.m_restitution=i.restitution,this.m_body=t,this.m_next=null,this.m_filter=i.filter.Copy(),this.m_isSensor=i.isSensor,this.m_shape=i.shape.Copy(),this.m_density=i.density},w.prototype.Destroy=function(){this.m_shape=null},w.prototype.CreateProxy=function(t,e){this.m_shape.ComputeAABB(this.m_aabb,e),this.m_proxy=t.CreateProxy(this.m_aabb,this)},w.prototype.DestroyProxy=function(t){null!=this.m_proxy&&(t.DestroyProxy(this.m_proxy),this.m_proxy=null)},w.prototype.Synchronize=function(e,i,o){if(this.m_proxy){var n=new r,s=new r;this.m_shape.ComputeAABB(n,i),this.m_shape.ComputeAABB(s,o),this.m_aabb.Combine(n,s);var a=t.SubtractVV(o.position,i.position);e.MoveProxy(this.m_proxy,this.m_aabb,a)}},S.b2FixtureDef=function(){this.filter=new B},S.prototype.b2FixtureDef=function(){this.shape=null,this.userData=null,this.friction=.2,this.restitution=0,this.density=0,this.filter.categoryBits=1,this.filter.maskBits=65535,this.filter.groupIndex=0,this.isSensor=!1},A.b2Island=function(){},A.prototype.b2Island=function(){this.m_bodies=new Vector,this.m_contacts=new Vector,this.m_joints=new Vector},A.prototype.Initialize=function(t,e,i,o,n,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0);var r=0;for(this.m_bodyCapacity=t,this.m_contactCapacity=e,this.m_jointCapacity=i,this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0,this.m_allocator=o,this.m_listener=n,this.m_contactSolver=s,r=this.m_bodies.length;t>r;r++)this.m_bodies[r]=null;for(r=this.m_contacts.length;e>r;r++)this.m_contacts[r]=null;for(r=this.m_joints.length;i>r;r++)this.m_joints[r]=null},A.prototype.Clear=function(){this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0},A.prototype.Solve=function(e,i,o){var n,r,a=0,l=0;for(a=0;this.m_bodyCount>a;++a)n=this.m_bodies[a],n.GetType()==f.b2_dynamicBody&&(n.m_linearVelocity.x+=e.dt*(i.x+n.m_invMass*n.m_force.x),n.m_linearVelocity.y+=e.dt*(i.y+n.m_invMass*n.m_force.y),n.m_angularVelocity+=e.dt*n.m_invI*n.m_torque,n.m_linearVelocity.Multiply(t.Clamp(1-e.dt*n.m_linearDamping,0,1)),n.m_angularVelocity*=t.Clamp(1-e.dt*n.m_angularDamping,0,1));this.m_contactSolver.Initialize(e,this.m_contacts,this.m_contactCount,this.m_allocator);var c=this.m_contactSolver;for(c.InitVelocityConstraints(e),a=0;this.m_jointCount>a;++a)r=this.m_joints[a],r.InitVelocityConstraints(e);for(a=0;e.velocityIterations>a;++a){for(l=0;this.m_jointCount>l;++l)r=this.m_joints[l],r.SolveVelocityConstraints(e);c.SolveVelocityConstraints()}for(a=0;this.m_jointCount>a;++a)r=this.m_joints[a],r.FinalizeVelocityConstraints();for(c.FinalizeVelocityConstraints(),a=0;this.m_bodyCount>a;++a)if(n=this.m_bodies[a],n.GetType()!=f.b2_staticBody){var m=e.dt*n.m_linearVelocity.x,u=e.dt*n.m_linearVelocity.y;m*m+u*u>s.b2_maxTranslationSquared&&(n.m_linearVelocity.Normalize(),n.m_linearVelocity.x*=s.b2_maxTranslation*e.inv_dt,n.m_linearVelocity.y*=s.b2_maxTranslation*e.inv_dt);var h=e.dt*n.m_angularVelocity;h*h>s.b2_maxRotationSquared&&(n.m_angularVelocity=0>n.m_angularVelocity?-s.b2_maxRotation*e.inv_dt:s.b2_maxRotation*e.inv_dt),n.m_sweep.c0.SetV(n.m_sweep.c),n.m_sweep.a0=n.m_sweep.a,n.m_sweep.c.x+=e.dt*n.m_linearVelocity.x,n.m_sweep.c.y+=e.dt*n.m_linearVelocity.y,n.m_sweep.a+=e.dt*n.m_angularVelocity,n.SynchronizeTransform()}for(a=0;e.positionIterations>a;++a){var p=c.SolvePositionConstraints(s.b2_contactBaumgarte),_=!0;for(l=0;this.m_jointCount>l;++l){r=this.m_joints[l];var y=r.SolvePositionConstraints(s.b2_contactBaumgarte);_=_&&y}if(p&&_)break}if(this.Report(c.m_constraints),o){var d=Number.MAX_VALUE,x=s.b2_linearSleepTolerance*s.b2_linearSleepTolerance,v=s.b2_angularSleepTolerance*s.b2_angularSleepTolerance;for(a=0;this.m_bodyCount>a;++a)n=this.m_bodies[a],n.GetType()!=f.b2_staticBody&&(0==(n.m_flags&f.e_allowSleepFlag)&&(n.m_sleepTime=0,d=0),0==(n.m_flags&f.e_allowSleepFlag)||n.m_angularVelocity*n.m_angularVelocity>v||t.Dot(n.m_linearVelocity,n.m_linearVelocity)>x?(n.m_sleepTime=0,d=0):(n.m_sleepTime+=e.dt,d=t.Min(d,n.m_sleepTime)));if(d>=s.b2_timeToSleep)for(a=0;this.m_bodyCount>a;++a)n=this.m_bodies[a],n.SetAwake(!1)}},A.prototype.SolveTOI=function(t){var e=0,i=0;this.m_contactSolver.Initialize(t,this.m_contacts,this.m_contactCount,this.m_allocator);var o=this.m_contactSolver;for(e=0;this.m_jointCount>e;++e)this.m_joints[e].InitVelocityConstraints(t);for(e=0;t.velocityIterations>e;++e)for(o.SolveVelocityConstraints(),i=0;this.m_jointCount>i;++i)this.m_joints[i].SolveVelocityConstraints(t);for(e=0;this.m_bodyCount>e;++e){var n=this.m_bodies[e];if(n.GetType()!=f.b2_staticBody){var r=t.dt*n.m_linearVelocity.x,a=t.dt*n.m_linearVelocity.y;r*r+a*a>s.b2_maxTranslationSquared&&(n.m_linearVelocity.Normalize(),n.m_linearVelocity.x*=s.b2_maxTranslation*t.inv_dt,n.m_linearVelocity.y*=s.b2_maxTranslation*t.inv_dt);var l=t.dt*n.m_angularVelocity;l*l>s.b2_maxRotationSquared&&(n.m_angularVelocity=0>n.m_angularVelocity?-s.b2_maxRotation*t.inv_dt:s.b2_maxRotation*t.inv_dt),n.m_sweep.c0.SetV(n.m_sweep.c),n.m_sweep.a0=n.m_sweep.a,n.m_sweep.c.x+=t.dt*n.m_linearVelocity.x,n.m_sweep.c.y+=t.dt*n.m_linearVelocity.y,n.m_sweep.a+=t.dt*n.m_angularVelocity,n.SynchronizeTransform()}}var c=.75;for(e=0;t.positionIterations>e;++e){var m=o.SolvePositionConstraints(c),u=!0;for(i=0;this.m_jointCount>i;++i){var h=this.m_joints[i].SolvePositionConstraints(s.b2_contactBaumgarte);u=u&&h}if(m&&u)break}this.Report(o.m_constraints)},A.prototype.Report=function(t){if(null!=this.m_listener)for(var e=0;this.m_contactCount>e;++e){for(var i=this.m_contacts[e],o=t[e],n=0;o.pointCount>n;++n)A.s_impulse.normalImpulses[n]=o.points[n].normalImpulse,A.s_impulse.tangentImpulses[n]=o.points[n].tangentImpulse;this.m_listener.PostSolve(i,A.s_impulse)}},A.prototype.AddBody=function(t){t.m_islandIndex=this.m_bodyCount,this.m_bodies[this.m_bodyCount++]=t},A.prototype.AddContact=function(t){this.m_contacts[this.m_contactCount++]=t},A.prototype.AddJoint=function(t){this.m_joints[this.m_jointCount++]=t},Box2D.postDefs.push(function(){Box2D.Dynamics.b2Island.s_impulse=new v}),M.b2TimeStep=function(){},M.prototype.Set=function(t){this.dt=t.dt,this.inv_dt=t.inv_dt,this.positionIterations=t.positionIterations,this.velocityIterations=t.velocityIterations,this.warmStarting=t.warmStarting},V.b2World=function(){this.s_stack=new Vector,this.m_contactManager=new g,this.m_contactSolver=new L,this.m_island=new A},V.prototype.b2World=function(t,e){this.m_destructionListener=null,this.m_debugDraw=null,this.m_bodyList=null,this.m_contactList=null,this.m_jointList=null,this.m_controllerList=null,this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0,this.m_controllerCount=0,V.m_warmStarting=!0,V.m_continuousPhysics=!0,this.m_allowSleep=e,this.m_gravity=t,this.m_inv_dt0=0,this.m_contactManager.m_world=this;var i=new d;this.m_groundBody=this.CreateBody(i)},V.prototype.SetDestructionListener=function(t){this.m_destructionListener=t},V.prototype.SetContactFilter=function(t){this.m_contactManager.m_contactFilter=t},V.prototype.SetContactListener=function(t){this.m_contactManager.m_contactListener=t},V.prototype.SetDebugDraw=function(t){this.m_debugDraw=t},V.prototype.SetBroadPhase=function(t){var e=this.m_contactManager.m_broadPhase;this.m_contactManager.m_broadPhase=t;for(var i=this.m_bodyList;i;i=i.m_next)for(var o=i.m_fixtureList;o;o=o.m_next)o.m_proxy=t.CreateProxy(e.GetFatAABB(o.m_proxy),o)},V.prototype.Validate=function(){this.m_contactManager.m_broadPhase.Validate()},V.prototype.GetProxyCount=function(){return this.m_contactManager.m_broadPhase.GetProxyCount()},V.prototype.CreateBody=function(t){if(1==this.IsLocked())return null;var e=new f(t,this);return e.m_prev=null,e.m_next=this.m_bodyList,this.m_bodyList&&(this.m_bodyList.m_prev=e),this.m_bodyList=e,++this.m_bodyCount,e},V.prototype.DestroyBody=function(t){if(1!=this.IsLocked()){for(var e=t.m_jointList;e;){var i=e;e=e.next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeJoint(i.joint),this.DestroyJoint(i.joint)}for(var o=t.m_controllerList;o;){var n=o;o=o.nextController,n.controller.RemoveBody(t)}for(var s=t.m_contactList;s;){var r=s;s=s.next,this.m_contactManager.Destroy(r.contact)}t.m_contactList=null;for(var a=t.m_fixtureList;a;){var l=a;a=a.m_next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeFixture(l),l.DestroyProxy(this.m_contactManager.m_broadPhase),l.Destroy()}t.m_fixtureList=null,t.m_fixtureCount=0,t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_bodyList&&(this.m_bodyList=t.m_next),--this.m_bodyCount}},V.prototype.CreateJoint=function(t){var e=P.Create(t,null);e.m_prev=null,e.m_next=this.m_jointList,this.m_jointList&&(this.m_jointList.m_prev=e),this.m_jointList=e,++this.m_jointCount,e.m_edgeA.joint=e,e.m_edgeA.other=e.m_bodyB,e.m_edgeA.prev=null,e.m_edgeA.next=e.m_bodyA.m_jointList,e.m_bodyA.m_jointList&&(e.m_bodyA.m_jointList.prev=e.m_edgeA),e.m_bodyA.m_jointList=e.m_edgeA,e.m_edgeB.joint=e,e.m_edgeB.other=e.m_bodyA,e.m_edgeB.prev=null,e.m_edgeB.next=e.m_bodyB.m_jointList,e.m_bodyB.m_jointList&&(e.m_bodyB.m_jointList.prev=e.m_edgeB),e.m_bodyB.m_jointList=e.m_edgeB;var i=t.bodyA,o=t.bodyB;if(0==t.collideConnected)for(var n=o.GetContactList();n;)n.other==i&&n.contact.FlagForFiltering(),n=n.next;return e},V.prototype.DestroyJoint=function(t){var e=t.m_collideConnected;t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_jointList&&(this.m_jointList=t.m_next);var i=t.m_bodyA,o=t.m_bodyB;if(i.SetAwake(!0),o.SetAwake(!0),t.m_edgeA.prev&&(t.m_edgeA.prev.next=t.m_edgeA.next),t.m_edgeA.next&&(t.m_edgeA.next.prev=t.m_edgeA.prev),t.m_edgeA==i.m_jointList&&(i.m_jointList=t.m_edgeA.next),t.m_edgeA.prev=null,t.m_edgeA.next=null,t.m_edgeB.prev&&(t.m_edgeB.prev.next=t.m_edgeB.next),t.m_edgeB.next&&(t.m_edgeB.next.prev=t.m_edgeB.prev),t.m_edgeB==o.m_jointList&&(o.m_jointList=t.m_edgeB.next),t.m_edgeB.prev=null,t.m_edgeB.next=null,P.Destroy(t,null),--this.m_jointCount,0==e)for(var n=o.GetContactList();n;)n.other==i&&n.contact.FlagForFiltering(),n=n.next},V.prototype.AddController=function(t){return t.m_next=this.m_controllerList,t.m_prev=null,this.m_controllerList=t,t.m_world=this,this.m_controllerCount++,t},V.prototype.RemoveController=function(t){t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),this.m_controllerList==t&&(this.m_controllerList=t.m_next),this.m_controllerCount--},V.prototype.CreateController=function(t){if(t.m_world!=this)throw Error("Controller can only be a member of one world");return t.m_next=this.m_controllerList,t.m_prev=null,this.m_controllerList&&(this.m_controllerList.m_prev=t),this.m_controllerList=t,++this.m_controllerCount,t.m_world=this,t},V.prototype.DestroyController=function(t){t.Clear(),t.m_next&&(t.m_next.m_prev=t.m_prev),t.m_prev&&(t.m_prev.m_next=t.m_next),t==this.m_controllerList&&(this.m_controllerList=t.m_next),--this.m_controllerCount},V.prototype.SetWarmStarting=function(t){V.m_warmStarting=t},V.prototype.SetContinuousPhysics=function(t){V.m_continuousPhysics=t},V.prototype.GetBodyCount=function(){return this.m_bodyCount},V.prototype.GetJointCount=function(){return this.m_jointCount},V.prototype.GetContactCount=function(){return this.m_contactCount},V.prototype.SetGravity=function(t){this.m_gravity=t},V.prototype.GetGravity=function(){return this.m_gravity},V.prototype.GetGroundBody=function(){return this.m_groundBody},V.prototype.Step=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.m_flags&V.e_newFixture&&(this.m_contactManager.FindNewContacts(),this.m_flags&=~V.e_newFixture),this.m_flags|=V.e_locked;var o=V.s_timestep2;o.dt=t,o.velocityIterations=e,o.positionIterations=i,o.inv_dt=t>0?1/t:0,o.dtRatio=this.m_inv_dt0*t,o.warmStarting=V.m_warmStarting,this.m_contactManager.Collide(),o.dt>0&&this.Solve(o),V.m_continuousPhysics&&o.dt>0&&this.SolveTOI(o),o.dt>0&&(this.m_inv_dt0=o.inv_dt),this.m_flags&=~V.e_locked},V.prototype.ClearForces=function(){for(var t=this.m_bodyList;t;t=t.m_next)t.m_force.SetZero(),t.m_torque=0},V.prototype.DrawDebugData=function(){if(null!=this.m_debugDraw){this.m_debugDraw.m_sprite.graphics.clear();var t,e,i,s,a,l=this.m_debugDraw.GetFlags();new o,new o,new o;var c;new r,new r;var m=[new o,new o,new o,new o],u=new n(0,0,0);if(l&D.e_shapeBit)for(t=this.m_bodyList;t;t=t.m_next)for(c=t.m_xf,e=t.GetFixtureList();e;e=e.m_next)i=e.GetShape(),0==t.IsActive()?(u.Set(.5,.5,.3),this.DrawShape(i,c,u)):t.GetType()==f.b2_staticBody?(u.Set(.5,.9,.5),this.DrawShape(i,c,u)):t.GetType()==f.b2_kinematicBody?(u.Set(.5,.5,.9),this.DrawShape(i,c,u)):0==t.IsAwake()?(u.Set(.6,.6,.6),this.DrawShape(i,c,u)):(u.Set(.9,.7,.7),this.DrawShape(i,c,u));if(l&D.e_jointBit)for(s=this.m_jointList;s;s=s.m_next)this.DrawJoint(s);if(l&D.e_controllerBit)for(var h=this.m_controllerList;h;h=h.m_next)h.Draw(this.m_debugDraw);if(l&D.e_pairBit){u.Set(.3,.9,.9);for(var p=this.m_contactManager.m_contactList;p;p=p.GetNext()){var _=p.GetFixtureA(),y=p.GetFixtureB(),d=_.GetAABB().GetCenter(),x=y.GetAABB().GetCenter();this.m_debugDraw.DrawSegment(d,x,u)}}if(l&D.e_aabbBit)for(a=this.m_contactManager.m_broadPhase,m=[new o,new o,new o,new o],t=this.m_bodyList;t;t=t.GetNext())if(0!=t.IsActive())for(e=t.GetFixtureList();e;e=e.GetNext()){var v=a.GetFatAABB(e.m_proxy);m[0].Set(v.lowerBound.x,v.lowerBound.y),m[1].Set(v.upperBound.x,v.lowerBound.y),m[2].Set(v.upperBound.x,v.upperBound.y),m[3].Set(v.lowerBound.x,v.upperBound.y),this.m_debugDraw.DrawPolygon(m,4,u)}if(l&D.e_centerOfMassBit)for(t=this.m_bodyList;t;t=t.m_next)c=V.s_xf,c.R=t.m_xf.R,c.position=t.GetWorldCenter(),this.m_debugDraw.DrawTransform(c)}},V.prototype.QueryAABB=function(t,e){function i(e){return t(n.GetUserData(e))}var o=this,n=o.m_contactManager.m_broadPhase;n.Query(i,e)},V.prototype.QueryShape=function(t,e,o){function n(i){var n=a.GetUserData(i)instanceof w?a.GetUserData(i):null;return y.TestOverlap(e,o,n.GetShape(),n.GetBody().GetTransform())?t(n):!0}var s=this;void 0===o&&(o=null),null==o&&(o=new i,o.SetIdentity());var a=s.m_contactManager.m_broadPhase,l=new r;e.ComputeAABB(l,o),a.Query(n,l)},V.prototype.QueryPoint=function(t,e){function i(i){var o=n.GetUserData(i)instanceof w?n.GetUserData(i):null;return o.TestPoint(e)?t(o):!0}var o=this,n=o.m_contactManager.m_broadPhase,a=new r;a.lowerBound.Set(e.x-s.b2_linearSlop,e.y-s.b2_linearSlop),a.upperBound.Set(e.x+s.b2_linearSlop,e.y+s.b2_linearSlop),n.Query(i,a)},V.prototype.RayCast=function(t,e,i){function n(n,s){var l=r.GetUserData(s),c=l instanceof w?l:null,m=c.RayCast(a,n);if(m){var u=a.fraction,h=new o((1-u)*e.x+u*i.x,(1-u)*e.y+u*i.y);return t(c,h,a.normal,u)}return n.maxFraction}var s=this,r=s.m_contactManager.m_broadPhase,a=new m,l=new c(e,i);r.RayCast(n,l)},V.prototype.RayCastOne=function(t,e){function i(t,e,i,n){return void 0===n&&(n=0),o=t,n}var o,n=this;return n.RayCast(i,t,e),o},V.prototype.RayCastAll=function(t,e){function i(t,e,i,o){return void 0===o&&(o=0),n[n.length]=t,1}var o=this,n=new Vector;return o.RayCast(i,t,e),n},V.prototype.GetBodyList=function(){return this.m_bodyList},V.prototype.GetJointList=function(){return this.m_jointList},V.prototype.GetContactList=function(){return this.m_contactList},V.prototype.IsLocked=function(){return(this.m_flags&V.e_locked)>0},V.prototype.Solve=function(t){for(var e,i=this.m_controllerList;i;i=i.m_next)i.Step(t);var o=this.m_island;for(o.Initialize(this.m_bodyCount,this.m_contactCount,this.m_jointCount,null,this.m_contactManager.m_contactListener,this.m_contactSolver),e=this.m_bodyList;e;e=e.m_next)e.m_flags&=~f.e_islandFlag;for(var n=this.m_contactList;n;n=n.m_next)n.m_flags&=~T.e_islandFlag;for(var s=this.m_jointList;s;s=s.m_next)s.m_islandFlag=!1;parseInt(this.m_bodyCount);for(var r=this.s_stack,a=this.m_bodyList;a;a=a.m_next)if(!(a.m_flags&f.e_islandFlag)&&0!=a.IsAwake()&&0!=a.IsActive()&&a.GetType()!=f.b2_staticBody){o.Clear();var l=0;for(r[l++]=a,a.m_flags|=f.e_islandFlag;l>0;)if(e=r[--l],o.AddBody(e),0==e.IsAwake()&&e.SetAwake(!0),e.GetType()!=f.b2_staticBody){for(var c,m=e.m_contactList;m;m=m.next)m.contact.m_flags&T.e_islandFlag||1!=m.contact.IsSensor()&&0!=m.contact.IsEnabled()&&0!=m.contact.IsTouching()&&(o.AddContact(m.contact),m.contact.m_flags|=T.e_islandFlag,c=m.other,c.m_flags&f.e_islandFlag||(r[l++]=c,c.m_flags|=f.e_islandFlag));for(var u=e.m_jointList;u;u=u.next)1!=u.joint.m_islandFlag&&(c=u.other,0!=c.IsActive()&&(o.AddJoint(u.joint),u.joint.m_islandFlag=!0,c.m_flags&f.e_islandFlag||(r[l++]=c,c.m_flags|=f.e_islandFlag)))}o.Solve(t,this.m_gravity,this.m_allowSleep);for(var h=0;o.m_bodyCount>h;++h)e=o.m_bodies[h],e.GetType()==f.b2_staticBody&&(e.m_flags&=~f.e_islandFlag)}for(h=0;r.length>h&&r[h];++h)r[h]=null;for(e=this.m_bodyList;e;e=e.m_next)0!=e.IsAwake()&&0!=e.IsActive()&&e.GetType()!=f.b2_staticBody&&e.SynchronizeFixtures();this.m_contactManager.FindNewContacts()},V.prototype.SolveTOI=function(t){var e,i,o,n,r,a,l,c=this.m_island;c.Initialize(this.m_bodyCount,s.b2_maxTOIContactsPerIsland,s.b2_maxTOIJointsPerIsland,null,this.m_contactManager.m_contactListener,this.m_contactSolver);var m=V.s_queue;for(e=this.m_bodyList;e;e=e.m_next)e.m_flags&=~f.e_islandFlag,e.m_sweep.t0=0;var u;for(u=this.m_contactList;u;u=u.m_next)u.m_flags&=~(T.e_toiFlag|T.e_islandFlag);for(l=this.m_jointList;l;l=l.m_next)l.m_islandFlag=!1;for(;;){var h=null,p=1;for(u=this.m_contactList;u;u=u.m_next)if(1!=u.IsSensor()&&0!=u.IsEnabled()&&0!=u.IsContinuous()){var _=1;if(u.m_flags&T.e_toiFlag)_=u.m_toi;else{if(i=u.m_fixtureA,o=u.m_fixtureB,n=i.m_body,r=o.m_body,!(n.GetType()==f.b2_dynamicBody&&0!=n.IsAwake()||r.GetType()==f.b2_dynamicBody&&0!=r.IsAwake()))continue;var y=n.m_sweep.t0;n.m_sweep.t0<r.m_sweep.t0?(y=r.m_sweep.t0,n.m_sweep.Advance(y)):r.m_sweep.t0<n.m_sweep.t0&&(y=n.m_sweep.t0,r.m_sweep.Advance(y)),_=u.ComputeTOI(n.m_sweep,r.m_sweep),s.b2Assert(_>=0&&1>=_),_>0&&1>_&&(_=(1-_)*y+_,_>1&&(_=1)),u.m_toi=_,u.m_flags|=T.e_toiFlag}_>Number.MIN_VALUE&&p>_&&(h=u,p=_)}if(null==h||p>1-100*Number.MIN_VALUE)break;if(i=h.m_fixtureA,o=h.m_fixtureB,n=i.m_body,r=o.m_body,V.s_backupA.Set(n.m_sweep),V.s_backupB.Set(r.m_sweep),n.Advance(p),r.Advance(p),h.Update(this.m_contactManager.m_contactListener),h.m_flags&=~T.e_toiFlag,1!=h.IsSensor()&&0!=h.IsEnabled()){if(0!=h.IsTouching()){var d=n;d.GetType()!=f.b2_dynamicBody&&(d=r),c.Clear();var x=0,v=0;for(m[x+v++]=d,d.m_flags|=f.e_islandFlag;v>0;)if(e=m[x++],--v,c.AddBody(e),0==e.IsAwake()&&e.SetAwake(!0),e.GetType()==f.b2_dynamicBody){for(a=e.m_contactList;a&&c.m_contactCount!=c.m_contactCapacity;a=a.next)if(!(a.contact.m_flags&T.e_islandFlag)&&1!=a.contact.IsSensor()&&0!=a.contact.IsEnabled()&&0!=a.contact.IsTouching()){c.AddContact(a.contact),a.contact.m_flags|=T.e_islandFlag;var b=a.other;b.m_flags&f.e_islandFlag||(b.GetType()!=f.b2_staticBody&&(b.Advance(p),b.SetAwake(!0)),m[x+v]=b,++v,b.m_flags|=f.e_islandFlag)}for(var g=e.m_jointList;g;g=g.next)c.m_jointCount!=c.m_jointCapacity&&1!=g.joint.m_islandFlag&&(b=g.other,0!=b.IsActive()&&(c.AddJoint(g.joint),g.joint.m_islandFlag=!0,b.m_flags&f.e_islandFlag||(b.GetType()!=f.b2_staticBody&&(b.Advance(p),b.SetAwake(!0)),m[x+v]=b,++v,b.m_flags|=f.e_islandFlag)))}var D=V.s_timestep;D.warmStarting=!1,D.dt=(1-p)*t.dt,D.inv_dt=1/D.dt,D.dtRatio=0,D.velocityIterations=t.velocityIterations,D.positionIterations=t.positionIterations,c.SolveTOI(D);var C=0;for(C=0;c.m_bodyCount>C;++C)if(e=c.m_bodies[C],e.m_flags&=~f.e_islandFlag,0!=e.IsAwake()&&e.GetType()==f.b2_dynamicBody)for(e.SynchronizeFixtures(),a=e.m_contactList;a;a=a.next)a.contact.m_flags&=~T.e_toiFlag;for(C=0;c.m_contactCount>C;++C)u=c.m_contacts[C],u.m_flags&=~(T.e_toiFlag|T.e_islandFlag);for(C=0;c.m_jointCount>C;++C)l=c.m_joints[C],l.m_islandFlag=!1;this.m_contactManager.FindNewContacts()}}else n.m_sweep.Set(V.s_backupA),r.m_sweep.Set(V.s_backupB),n.SynchronizeTransform(),r.SynchronizeTransform()}},V.prototype.DrawJoint=function(t){var e=t.GetBodyA(),i=t.GetBodyB(),o=e.m_xf,n=i.m_xf,s=o.position,r=n.position,a=t.GetAnchorA(),l=t.GetAnchorB(),c=V.s_jointColor;switch(t.m_type){case P.e_distanceJoint:this.m_debugDraw.DrawSegment(a,l,c);break;case P.e_pulleyJoint:var m=t instanceof F?t:null,u=m.GetGroundAnchorA(),h=m.GetGroundAnchorB();this.m_debugDraw.DrawSegment(u,a,c),this.m_debugDraw.DrawSegment(h,l,c),this.m_debugDraw.DrawSegment(u,h,c);break;case P.e_mouseJoint:this.m_debugDraw.DrawSegment(a,l,c);break;default:e!=this.m_groundBody&&this.m_debugDraw.DrawSegment(s,a,c),this.m_debugDraw.DrawSegment(a,l,c),i!=this.m_groundBody&&this.m_debugDraw.DrawSegment(r,l,c)}},V.prototype.DrawShape=function(e,i,o){switch(e.m_type){case y.e_circleShape:var n=e instanceof u?e:null,s=t.MulX(i,n.m_p),r=n.m_radius,a=i.R.col1;this.m_debugDraw.DrawSolidCircle(s,r,a,o);break;case y.e_polygonShape:var l=0,c=e instanceof _?e:null,m=parseInt(c.GetVertexCount()),p=c.GetVertices(),f=new Vector(m);for(l=0;m>l;++l)f[l]=t.MulX(i,p[l]);this.m_debugDraw.DrawSolidPolygon(f,m,o);break;case y.e_edgeShape:var d=e instanceof h?e:null;this.m_debugDraw.DrawSegment(t.MulX(i,d.GetVertex1()),t.MulX(i,d.GetVertex2()),o)}},Box2D.postDefs.push(function(){Box2D.Dynamics.b2World.s_timestep2=new M,Box2D.Dynamics.b2World.s_xf=new i,Box2D.Dynamics.b2World.s_backupA=new e,Box2D.Dynamics.b2World.s_backupB=new e,Box2D.Dynamics.b2World.s_timestep=new M,Box2D.Dynamics.b2World.s_queue=new Vector,Box2D.Dynamics.b2World.s_jointColor=new n(.5,.8,.8),Box2D.Dynamics.b2World.e_newFixture=1,Box2D.Dynamics.b2World.e_locked=2
})}(),function(){var t=Box2D.Collision.Shapes.b2CircleShape,e=(Box2D.Collision.Shapes.b2EdgeChainDef,Box2D.Collision.Shapes.b2EdgeShape),i=(Box2D.Collision.Shapes.b2MassData,Box2D.Collision.Shapes.b2PolygonShape),o=Box2D.Collision.Shapes.b2Shape,n=Box2D.Dynamics.Contacts.b2CircleContact,s=Box2D.Dynamics.Contacts.b2Contact,r=Box2D.Dynamics.Contacts.b2ContactConstraint,a=Box2D.Dynamics.Contacts.b2ContactConstraintPoint,l=Box2D.Dynamics.Contacts.b2ContactEdge,c=Box2D.Dynamics.Contacts.b2ContactFactory,m=Box2D.Dynamics.Contacts.b2ContactRegister,u=Box2D.Dynamics.Contacts.b2ContactResult,h=Box2D.Dynamics.Contacts.b2ContactSolver,p=Box2D.Dynamics.Contacts.b2EdgeAndCircleContact,_=Box2D.Dynamics.Contacts.b2NullContact,y=Box2D.Dynamics.Contacts.b2PolyAndCircleContact,f=Box2D.Dynamics.Contacts.b2PolyAndEdgeContact,d=Box2D.Dynamics.Contacts.b2PolygonContact,x=Box2D.Dynamics.Contacts.b2PositionSolverManifold,v=Box2D.Dynamics.b2Body,b=(Box2D.Dynamics.b2BodyDef,Box2D.Dynamics.b2ContactFilter,Box2D.Dynamics.b2ContactImpulse,Box2D.Dynamics.b2ContactListener,Box2D.Dynamics.b2ContactManager,Box2D.Dynamics.b2DebugDraw,Box2D.Dynamics.b2DestructionListener,Box2D.Dynamics.b2FilterData,Box2D.Dynamics.b2Fixture,Box2D.Dynamics.b2FixtureDef,Box2D.Dynamics.b2Island,Box2D.Dynamics.b2TimeStep),g=(Box2D.Dynamics.b2World,Box2D.Common.b2Color,Box2D.Common.b2internal,Box2D.Common.b2Settings),D=Box2D.Common.Math.b2Mat22,C=(Box2D.Common.Math.b2Mat33,Box2D.Common.Math.b2Math),B=(Box2D.Common.Math.b2Sweep,Box2D.Common.Math.b2Transform,Box2D.Common.Math.b2Vec2),w=(Box2D.Common.Math.b2Vec3,Box2D.Collision.b2AABB,Box2D.Collision.b2Bound,Box2D.Collision.b2BoundValues,Box2D.Collision.b2Collision),S=Box2D.Collision.b2ContactID,A=(Box2D.Collision.b2ContactPoint,Box2D.Collision.b2Distance,Box2D.Collision.b2DistanceInput,Box2D.Collision.b2DistanceOutput,Box2D.Collision.b2DistanceProxy,Box2D.Collision.b2DynamicTree,Box2D.Collision.b2DynamicTreeBroadPhase,Box2D.Collision.b2DynamicTreeNode,Box2D.Collision.b2DynamicTreePair,Box2D.Collision.b2Manifold),M=(Box2D.Collision.b2ManifoldPoint,Box2D.Collision.b2Point,Box2D.Collision.b2RayCastInput,Box2D.Collision.b2RayCastOutput,Box2D.Collision.b2Segment,Box2D.Collision.b2SeparationFunction,Box2D.Collision.b2Simplex,Box2D.Collision.b2SimplexCache,Box2D.Collision.b2SimplexVertex,Box2D.Collision.b2TimeOfImpact),V=Box2D.Collision.b2TOIInput,T=Box2D.Collision.b2WorldManifold;Box2D.Collision.ClipVertex,Box2D.Collision.Features,Box2D.Collision.IBroadPhase,Box2D.inherit(n,Box2D.Dynamics.Contacts.b2Contact),n.prototype.__super=Box2D.Dynamics.Contacts.b2Contact.prototype,n.b2CircleContact=function(){Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},n.Create=function(){return new n},n.Destroy=function(){},n.prototype.Reset=function(t,e){this.__super.Reset.call(this,t,e)},n.prototype.Evaluate=function(){var e=this.m_fixtureA.GetBody(),i=this.m_fixtureB.GetBody();w.CollideCircles(this.m_manifold,this.m_fixtureA.GetShape()instanceof t?this.m_fixtureA.GetShape():null,e.m_xf,this.m_fixtureB.GetShape()instanceof t?this.m_fixtureB.GetShape():null,i.m_xf)},s.b2Contact=function(){this.m_nodeA=new l,this.m_nodeB=new l,this.m_manifold=new A,this.m_oldManifold=new A},s.prototype.GetManifold=function(){return this.m_manifold},s.prototype.GetWorldManifold=function(t){var e=this.m_fixtureA.GetBody(),i=this.m_fixtureB.GetBody(),o=this.m_fixtureA.GetShape(),n=this.m_fixtureB.GetShape();t.Initialize(this.m_manifold,e.GetTransform(),o.m_radius,i.GetTransform(),n.m_radius)},s.prototype.IsTouching=function(){return(this.m_flags&s.e_touchingFlag)==s.e_touchingFlag},s.prototype.IsContinuous=function(){return(this.m_flags&s.e_continuousFlag)==s.e_continuousFlag},s.prototype.SetSensor=function(t){t?this.m_flags|=s.e_sensorFlag:this.m_flags&=~s.e_sensorFlag},s.prototype.IsSensor=function(){return(this.m_flags&s.e_sensorFlag)==s.e_sensorFlag},s.prototype.SetEnabled=function(t){t?this.m_flags|=s.e_enabledFlag:this.m_flags&=~s.e_enabledFlag},s.prototype.IsEnabled=function(){return(this.m_flags&s.e_enabledFlag)==s.e_enabledFlag},s.prototype.GetNext=function(){return this.m_next},s.prototype.GetFixtureA=function(){return this.m_fixtureA},s.prototype.GetFixtureB=function(){return this.m_fixtureB},s.prototype.FlagForFiltering=function(){this.m_flags|=s.e_filterFlag},s.prototype.b2Contact=function(){},s.prototype.Reset=function(t,e){if(void 0===t&&(t=null),void 0===e&&(e=null),this.m_flags=s.e_enabledFlag,!t||!e)return this.m_fixtureA=null,this.m_fixtureB=null,void 0;(t.IsSensor()||e.IsSensor())&&(this.m_flags|=s.e_sensorFlag);var i=t.GetBody(),o=e.GetBody();(i.GetType()!=v.b2_dynamicBody||i.IsBullet()||o.GetType()!=v.b2_dynamicBody||o.IsBullet())&&(this.m_flags|=s.e_continuousFlag),this.m_fixtureA=t,this.m_fixtureB=e,this.m_manifold.m_pointCount=0,this.m_prev=null,this.m_next=null,this.m_nodeA.contact=null,this.m_nodeA.prev=null,this.m_nodeA.next=null,this.m_nodeA.other=null,this.m_nodeB.contact=null,this.m_nodeB.prev=null,this.m_nodeB.next=null,this.m_nodeB.other=null},s.prototype.Update=function(t){var e=this.m_oldManifold;this.m_oldManifold=this.m_manifold,this.m_manifold=e,this.m_flags|=s.e_enabledFlag;var i=!1,n=(this.m_flags&s.e_touchingFlag)==s.e_touchingFlag,r=this.m_fixtureA.m_body,a=this.m_fixtureB.m_body,l=this.m_fixtureA.m_aabb.TestOverlap(this.m_fixtureB.m_aabb);if(this.m_flags&s.e_sensorFlag){if(l){var c=this.m_fixtureA.GetShape(),m=this.m_fixtureB.GetShape(),u=r.GetTransform(),h=a.GetTransform();i=o.TestOverlap(c,u,m,h)}this.m_manifold.m_pointCount=0}else{if(r.GetType()!=v.b2_dynamicBody||r.IsBullet()||a.GetType()!=v.b2_dynamicBody||a.IsBullet()?this.m_flags|=s.e_continuousFlag:this.m_flags&=~s.e_continuousFlag,l){this.Evaluate(),i=this.m_manifold.m_pointCount>0;for(var p=0;this.m_manifold.m_pointCount>p;++p){var _=this.m_manifold.m_points[p];_.m_normalImpulse=0,_.m_tangentImpulse=0;for(var y=_.m_id,f=0;this.m_oldManifold.m_pointCount>f;++f){var d=this.m_oldManifold.m_points[f];if(d.m_id.key==y.key){_.m_normalImpulse=d.m_normalImpulse,_.m_tangentImpulse=d.m_tangentImpulse;break}}}}else this.m_manifold.m_pointCount=0;i!=n&&(r.SetAwake(!0),a.SetAwake(!0))}i?this.m_flags|=s.e_touchingFlag:this.m_flags&=~s.e_touchingFlag,0==n&&1==i&&t.BeginContact(this),1==n&&0==i&&t.EndContact(this),0==(this.m_flags&s.e_sensorFlag)&&t.PreSolve(this,this.m_oldManifold)},s.prototype.Evaluate=function(){},s.prototype.ComputeTOI=function(t,e){return s.s_input.proxyA.Set(this.m_fixtureA.GetShape()),s.s_input.proxyB.Set(this.m_fixtureB.GetShape()),s.s_input.sweepA=t,s.s_input.sweepB=e,s.s_input.tolerance=g.b2_linearSlop,M.TimeOfImpact(s.s_input)},Box2D.postDefs.push(function(){Box2D.Dynamics.Contacts.b2Contact.e_sensorFlag=1,Box2D.Dynamics.Contacts.b2Contact.e_continuousFlag=2,Box2D.Dynamics.Contacts.b2Contact.e_islandFlag=4,Box2D.Dynamics.Contacts.b2Contact.e_toiFlag=8,Box2D.Dynamics.Contacts.b2Contact.e_touchingFlag=16,Box2D.Dynamics.Contacts.b2Contact.e_enabledFlag=32,Box2D.Dynamics.Contacts.b2Contact.e_filterFlag=64,Box2D.Dynamics.Contacts.b2Contact.s_input=new V}),r.b2ContactConstraint=function(){this.localPlaneNormal=new B,this.localPoint=new B,this.normal=new B,this.normalMass=new D,this.K=new D},r.prototype.b2ContactConstraint=function(){this.points=new Vector(g.b2_maxManifoldPoints);for(var t=0;g.b2_maxManifoldPoints>t;t++)this.points[t]=new a},a.b2ContactConstraintPoint=function(){this.localPoint=new B,this.rA=new B,this.rB=new B},l.b2ContactEdge=function(){},c.b2ContactFactory=function(){},c.prototype.b2ContactFactory=function(t){this.m_allocator=t,this.InitializeRegisters()},c.prototype.AddType=function(t,e,i,o){void 0===i&&(i=0),void 0===o&&(o=0),this.m_registers[i][o].createFcn=t,this.m_registers[i][o].destroyFcn=e,this.m_registers[i][o].primary=!0,i!=o&&(this.m_registers[o][i].createFcn=t,this.m_registers[o][i].destroyFcn=e,this.m_registers[o][i].primary=!1)},c.prototype.InitializeRegisters=function(){this.m_registers=new Vector(o.e_shapeTypeCount);for(var t=0;o.e_shapeTypeCount>t;t++){this.m_registers[t]=new Vector(o.e_shapeTypeCount);for(var e=0;o.e_shapeTypeCount>e;e++)this.m_registers[t][e]=new m}this.AddType(n.Create,n.Destroy,o.e_circleShape,o.e_circleShape),this.AddType(y.Create,y.Destroy,o.e_polygonShape,o.e_circleShape),this.AddType(d.Create,d.Destroy,o.e_polygonShape,o.e_polygonShape),this.AddType(p.Create,p.Destroy,o.e_edgeShape,o.e_circleShape),this.AddType(f.Create,f.Destroy,o.e_polygonShape,o.e_edgeShape)},c.prototype.Create=function(t,e){var i,o=parseInt(t.GetType()),n=parseInt(e.GetType()),s=this.m_registers[o][n];if(s.pool)return i=s.pool,s.pool=i.m_next,s.poolCount--,i.Reset(t,e),i;var r=s.createFcn;return null!=r?s.primary?(i=r(this.m_allocator),i.Reset(t,e),i):(i=r(this.m_allocator),i.Reset(e,t),i):null},c.prototype.Destroy=function(t){t.m_manifold.m_pointCount>0&&(t.m_fixtureA.m_body.SetAwake(!0),t.m_fixtureB.m_body.SetAwake(!0));var e=parseInt(t.m_fixtureA.GetType()),i=parseInt(t.m_fixtureB.GetType()),o=this.m_registers[e][i];o.poolCount++,t.m_next=o.pool,o.pool=t;var n=o.destroyFcn;n(t,this.m_allocator)},m.b2ContactRegister=function(){},u.b2ContactResult=function(){this.position=new B,this.normal=new B,this.id=new S},h.b2ContactSolver=function(){this.m_step=new b,this.m_constraints=new Vector},h.prototype.b2ContactSolver=function(){},h.prototype.Initialize=function(t,e,i,o){void 0===i&&(i=0);var n;this.m_step.Set(t),this.m_allocator=o;var s=0;for(this.m_constraintCount=i;this.m_constraints.length<this.m_constraintCount;)this.m_constraints[this.m_constraints.length]=new r;for(s=0;i>s;++s){n=e[s];var a=n.m_fixtureA,l=n.m_fixtureB,c=a.m_shape,m=l.m_shape,u=c.m_radius,p=m.m_radius,_=a.m_body,y=l.m_body,f=n.GetManifold(),d=g.b2MixFriction(a.GetFriction(),l.GetFriction()),x=g.b2MixRestitution(a.GetRestitution(),l.GetRestitution()),v=_.m_linearVelocity.x,b=_.m_linearVelocity.y,D=y.m_linearVelocity.x,C=y.m_linearVelocity.y,B=_.m_angularVelocity,w=y.m_angularVelocity;g.b2Assert(f.m_pointCount>0),h.s_worldManifold.Initialize(f,_.m_xf,u,y.m_xf,p);var S=h.s_worldManifold.m_normal.x,A=h.s_worldManifold.m_normal.y,M=this.m_constraints[s];M.bodyA=_,M.bodyB=y,M.manifold=f,M.normal.x=S,M.normal.y=A,M.pointCount=f.m_pointCount,M.friction=d,M.restitution=x,M.localPlaneNormal.x=f.m_localPlaneNormal.x,M.localPlaneNormal.y=f.m_localPlaneNormal.y,M.localPoint.x=f.m_localPoint.x,M.localPoint.y=f.m_localPoint.y,M.radius=u+p,M.type=f.m_type;for(var V=0;M.pointCount>V;++V){var T=f.m_points[V],I=M.points[V];I.normalImpulse=T.m_normalImpulse,I.tangentImpulse=T.m_tangentImpulse,I.localPoint.SetV(T.m_localPoint);var L=I.rA.x=h.s_worldManifold.m_points[V].x-_.m_sweep.c.x,P=I.rA.y=h.s_worldManifold.m_points[V].y-_.m_sweep.c.y,F=I.rB.x=h.s_worldManifold.m_points[V].x-y.m_sweep.c.x,G=I.rB.y=h.s_worldManifold.m_points[V].y-y.m_sweep.c.y,k=L*A-P*S,J=F*A-G*S;k*=k,J*=J;var R=_.m_invMass+y.m_invMass+_.m_invI*k+y.m_invI*J;I.normalMass=1/R;var N=_.m_mass*_.m_invMass+y.m_mass*y.m_invMass;N+=_.m_mass*_.m_invI*k+y.m_mass*y.m_invI*J,I.equalizedMass=1/N;var E=A,O=-S,j=L*O-P*E,z=F*O-G*E;j*=j,z*=z;var q=_.m_invMass+y.m_invMass+_.m_invI*j+y.m_invI*z;I.tangentMass=1/q,I.velocityBias=0;var H=D+-w*G-v- -B*P,$=C+w*F-b-B*L,W=M.normal.x*H+M.normal.y*$;-g.b2_velocityThreshold>W&&(I.velocityBias+=-M.restitution*W)}if(2==M.pointCount){var U=M.points[0],K=M.points[1],X=_.m_invMass,Z=_.m_invI,Q=y.m_invMass,Y=y.m_invI,te=U.rA.x*A-U.rA.y*S,ee=U.rB.x*A-U.rB.y*S,ie=K.rA.x*A-K.rA.y*S,oe=K.rB.x*A-K.rB.y*S,ne=X+Q+Z*te*te+Y*ee*ee,se=X+Q+Z*ie*ie+Y*oe*oe,re=X+Q+Z*te*ie+Y*ee*oe,ae=100;ae*(ne*se-re*re)>ne*ne?(M.K.col1.Set(ne,re),M.K.col2.Set(re,se),M.K.GetInverse(M.normalMass)):M.pointCount=1}}},h.prototype.InitVelocityConstraints=function(t){for(var e=0;this.m_constraintCount>e;++e){var i=this.m_constraints[e],o=i.bodyA,n=i.bodyB,s=o.m_invMass,r=o.m_invI,a=n.m_invMass,l=n.m_invI,c=i.normal.x,m=i.normal.y,u=m,h=-c,p=0,_=0;if(t.warmStarting)for(_=i.pointCount,p=0;_>p;++p){var y=i.points[p];y.normalImpulse*=t.dtRatio,y.tangentImpulse*=t.dtRatio;var f=y.normalImpulse*c+y.tangentImpulse*u,d=y.normalImpulse*m+y.tangentImpulse*h;o.m_angularVelocity-=r*(y.rA.x*d-y.rA.y*f),o.m_linearVelocity.x-=s*f,o.m_linearVelocity.y-=s*d,n.m_angularVelocity+=l*(y.rB.x*d-y.rB.y*f),n.m_linearVelocity.x+=a*f,n.m_linearVelocity.y+=a*d}else for(_=i.pointCount,p=0;_>p;++p){var x=i.points[p];x.normalImpulse=0,x.tangentImpulse=0}}},h.prototype.SolveVelocityConstraints=function(){for(var t,e,i=0,o=0,n=0,s=0,r=0,a=0,l=0,c=0,m=0,u=0,h=0,p=0,_=0,y=0,f=0,d=0,x=0;this.m_constraintCount>x;++x){var v=this.m_constraints[x],b=v.bodyA,g=v.bodyB,D=b.m_angularVelocity,B=g.m_angularVelocity,w=b.m_linearVelocity,S=g.m_linearVelocity,A=b.m_invMass,M=b.m_invI,V=g.m_invMass,T=g.m_invI,I=v.normal.x,L=v.normal.y,P=L,F=-I,G=v.friction;for(i=0;v.pointCount>i;i++)t=v.points[i],o=S.x-B*t.rB.y-w.x+D*t.rA.y,n=S.y+B*t.rB.x-w.y-D*t.rA.x,r=o*P+n*F,a=t.tangentMass*-r,l=G*t.normalImpulse,c=C.Clamp(t.tangentImpulse+a,-l,l),a=c-t.tangentImpulse,m=a*P,u=a*F,w.x-=A*m,w.y-=A*u,D-=M*(t.rA.x*u-t.rA.y*m),S.x+=V*m,S.y+=V*u,B+=T*(t.rB.x*u-t.rB.y*m),t.tangentImpulse=c;if(parseInt(v.pointCount),1==v.pointCount)t=v.points[0],o=S.x+-B*t.rB.y-w.x- -D*t.rA.y,n=S.y+B*t.rB.x-w.y-D*t.rA.x,s=o*I+n*L,a=-t.normalMass*(s-t.velocityBias),c=t.normalImpulse+a,c=c>0?c:0,a=c-t.normalImpulse,m=a*I,u=a*L,w.x-=A*m,w.y-=A*u,D-=M*(t.rA.x*u-t.rA.y*m),S.x+=V*m,S.y+=V*u,B+=T*(t.rB.x*u-t.rB.y*m),t.normalImpulse=c;else{var k=v.points[0],J=v.points[1],R=k.normalImpulse,N=J.normalImpulse,E=S.x-B*k.rB.y-w.x+D*k.rA.y,O=S.y+B*k.rB.x-w.y-D*k.rA.x,j=S.x-B*J.rB.y-w.x+D*J.rA.y,z=S.y+B*J.rB.x-w.y-D*J.rA.x,q=E*I+O*L,H=j*I+z*L,$=q-k.velocityBias,W=H-J.velocityBias;for(e=v.K,$-=e.col1.x*R+e.col2.x*N,W-=e.col1.y*R+e.col2.y*N;;){e=v.normalMass;var U=-(e.col1.x*$+e.col2.x*W),K=-(e.col1.y*$+e.col2.y*W);if(U>=0&&K>=0){h=U-R,p=K-N,_=h*I,y=h*L,f=p*I,d=p*L,w.x-=A*(_+f),w.y-=A*(y+d),D-=M*(k.rA.x*y-k.rA.y*_+J.rA.x*d-J.rA.y*f),S.x+=V*(_+f),S.y+=V*(y+d),B+=T*(k.rB.x*y-k.rB.y*_+J.rB.x*d-J.rB.y*f),k.normalImpulse=U,J.normalImpulse=K;break}if(U=-k.normalMass*$,K=0,q=0,H=v.K.col1.y*U+W,U>=0&&H>=0){h=U-R,p=K-N,_=h*I,y=h*L,f=p*I,d=p*L,w.x-=A*(_+f),w.y-=A*(y+d),D-=M*(k.rA.x*y-k.rA.y*_+J.rA.x*d-J.rA.y*f),S.x+=V*(_+f),S.y+=V*(y+d),B+=T*(k.rB.x*y-k.rB.y*_+J.rB.x*d-J.rB.y*f),k.normalImpulse=U,J.normalImpulse=K;break}if(U=0,K=-J.normalMass*W,q=v.K.col2.x*K+$,H=0,K>=0&&q>=0){h=U-R,p=K-N,_=h*I,y=h*L,f=p*I,d=p*L,w.x-=A*(_+f),w.y-=A*(y+d),D-=M*(k.rA.x*y-k.rA.y*_+J.rA.x*d-J.rA.y*f),S.x+=V*(_+f),S.y+=V*(y+d),B+=T*(k.rB.x*y-k.rB.y*_+J.rB.x*d-J.rB.y*f),k.normalImpulse=U,J.normalImpulse=K;break}if(U=0,K=0,q=$,H=W,q>=0&&H>=0){h=U-R,p=K-N,_=h*I,y=h*L,f=p*I,d=p*L,w.x-=A*(_+f),w.y-=A*(y+d),D-=M*(k.rA.x*y-k.rA.y*_+J.rA.x*d-J.rA.y*f),S.x+=V*(_+f),S.y+=V*(y+d),B+=T*(k.rB.x*y-k.rB.y*_+J.rB.x*d-J.rB.y*f),k.normalImpulse=U,J.normalImpulse=K;break}break}}b.m_angularVelocity=D,g.m_angularVelocity=B}},h.prototype.FinalizeVelocityConstraints=function(){for(var t=0;this.m_constraintCount>t;++t)for(var e=this.m_constraints[t],i=e.manifold,o=0;e.pointCount>o;++o){var n=i.m_points[o],s=e.points[o];n.m_normalImpulse=s.normalImpulse,n.m_tangentImpulse=s.tangentImpulse}},h.prototype.SolvePositionConstraints=function(t){void 0===t&&(t=0);for(var e=0,i=0;this.m_constraintCount>i;i++){var o=this.m_constraints[i],n=o.bodyA,s=o.bodyB,r=n.m_mass*n.m_invMass,a=n.m_mass*n.m_invI,l=s.m_mass*s.m_invMass,c=s.m_mass*s.m_invI;h.s_psm.Initialize(o);for(var m=h.s_psm.m_normal,u=0;o.pointCount>u;u++){var p=o.points[u],_=h.s_psm.m_points[u],y=h.s_psm.m_separations[u],f=_.x-n.m_sweep.c.x,d=_.y-n.m_sweep.c.y,x=_.x-s.m_sweep.c.x,v=_.y-s.m_sweep.c.y;e=y>e?e:y;var b=C.Clamp(t*(y+g.b2_linearSlop),-g.b2_maxLinearCorrection,0),D=-p.equalizedMass*b,B=D*m.x,w=D*m.y;n.m_sweep.c.x-=r*B,n.m_sweep.c.y-=r*w,n.m_sweep.a-=a*(f*w-d*B),n.SynchronizeTransform(),s.m_sweep.c.x+=l*B,s.m_sweep.c.y+=l*w,s.m_sweep.a+=c*(x*w-v*B),s.SynchronizeTransform()}}return e>-1.5*g.b2_linearSlop},Box2D.postDefs.push(function(){Box2D.Dynamics.Contacts.b2ContactSolver.s_worldManifold=new T,Box2D.Dynamics.Contacts.b2ContactSolver.s_psm=new x}),Box2D.inherit(p,Box2D.Dynamics.Contacts.b2Contact),p.prototype.__super=Box2D.Dynamics.Contacts.b2Contact.prototype,p.b2EdgeAndCircleContact=function(){Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},p.Create=function(){return new p},p.Destroy=function(){},p.prototype.Reset=function(t,e){this.__super.Reset.call(this,t,e)},p.prototype.Evaluate=function(){var i=this.m_fixtureA.GetBody(),o=this.m_fixtureB.GetBody();this.b2CollideEdgeAndCircle(this.m_manifold,this.m_fixtureA.GetShape()instanceof e?this.m_fixtureA.GetShape():null,i.m_xf,this.m_fixtureB.GetShape()instanceof t?this.m_fixtureB.GetShape():null,o.m_xf)},p.prototype.b2CollideEdgeAndCircle=function(){},Box2D.inherit(_,Box2D.Dynamics.Contacts.b2Contact),_.prototype.__super=Box2D.Dynamics.Contacts.b2Contact.prototype,_.b2NullContact=function(){Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},_.prototype.b2NullContact=function(){this.__super.b2Contact.call(this)},_.prototype.Evaluate=function(){},Box2D.inherit(y,Box2D.Dynamics.Contacts.b2Contact),y.prototype.__super=Box2D.Dynamics.Contacts.b2Contact.prototype,y.b2PolyAndCircleContact=function(){Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},y.Create=function(){return new y},y.Destroy=function(){},y.prototype.Reset=function(t,e){this.__super.Reset.call(this,t,e),g.b2Assert(t.GetType()==o.e_polygonShape),g.b2Assert(e.GetType()==o.e_circleShape)},y.prototype.Evaluate=function(){var e=this.m_fixtureA.m_body,o=this.m_fixtureB.m_body;w.CollidePolygonAndCircle(this.m_manifold,this.m_fixtureA.GetShape()instanceof i?this.m_fixtureA.GetShape():null,e.m_xf,this.m_fixtureB.GetShape()instanceof t?this.m_fixtureB.GetShape():null,o.m_xf)},Box2D.inherit(f,Box2D.Dynamics.Contacts.b2Contact),f.prototype.__super=Box2D.Dynamics.Contacts.b2Contact.prototype,f.b2PolyAndEdgeContact=function(){Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},f.Create=function(){return new f},f.Destroy=function(){},f.prototype.Reset=function(t,e){this.__super.Reset.call(this,t,e),g.b2Assert(t.GetType()==o.e_polygonShape),g.b2Assert(e.GetType()==o.e_edgeShape)},f.prototype.Evaluate=function(){var t=this.m_fixtureA.GetBody(),o=this.m_fixtureB.GetBody();this.b2CollidePolyAndEdge(this.m_manifold,this.m_fixtureA.GetShape()instanceof i?this.m_fixtureA.GetShape():null,t.m_xf,this.m_fixtureB.GetShape()instanceof e?this.m_fixtureB.GetShape():null,o.m_xf)},f.prototype.b2CollidePolyAndEdge=function(){},Box2D.inherit(d,Box2D.Dynamics.Contacts.b2Contact),d.prototype.__super=Box2D.Dynamics.Contacts.b2Contact.prototype,d.b2PolygonContact=function(){Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},d.Create=function(){return new d},d.Destroy=function(){},d.prototype.Reset=function(t,e){this.__super.Reset.call(this,t,e)},d.prototype.Evaluate=function(){var t=this.m_fixtureA.GetBody(),e=this.m_fixtureB.GetBody();w.CollidePolygons(this.m_manifold,this.m_fixtureA.GetShape()instanceof i?this.m_fixtureA.GetShape():null,t.m_xf,this.m_fixtureB.GetShape()instanceof i?this.m_fixtureB.GetShape():null,e.m_xf)},x.b2PositionSolverManifold=function(){},x.prototype.b2PositionSolverManifold=function(){this.m_normal=new B,this.m_separations=new Vector_a2j_Number(g.b2_maxManifoldPoints),this.m_points=new Vector(g.b2_maxManifoldPoints);for(var t=0;g.b2_maxManifoldPoints>t;t++)this.m_points[t]=new B},x.prototype.Initialize=function(t){g.b2Assert(t.pointCount>0);var e,i,o=0,n=0,s=0,r=0,a=0;switch(t.type){case A.e_circles:e=t.bodyA.m_xf.R,i=t.localPoint;var l=t.bodyA.m_xf.position.x+(e.col1.x*i.x+e.col2.x*i.y),c=t.bodyA.m_xf.position.y+(e.col1.y*i.x+e.col2.y*i.y);e=t.bodyB.m_xf.R,i=t.points[0].localPoint;var m=t.bodyB.m_xf.position.x+(e.col1.x*i.x+e.col2.x*i.y),u=t.bodyB.m_xf.position.y+(e.col1.y*i.x+e.col2.y*i.y),h=m-l,p=u-c,_=h*h+p*p;if(_>Number.MIN_VALUE*Number.MIN_VALUE){var y=Math.sqrt(_);this.m_normal.x=h/y,this.m_normal.y=p/y}else this.m_normal.x=1,this.m_normal.y=0;this.m_points[0].x=.5*(l+m),this.m_points[0].y=.5*(c+u),this.m_separations[0]=h*this.m_normal.x+p*this.m_normal.y-t.radius;break;case A.e_faceA:for(e=t.bodyA.m_xf.R,i=t.localPlaneNormal,this.m_normal.x=e.col1.x*i.x+e.col2.x*i.y,this.m_normal.y=e.col1.y*i.x+e.col2.y*i.y,e=t.bodyA.m_xf.R,i=t.localPoint,r=t.bodyA.m_xf.position.x+(e.col1.x*i.x+e.col2.x*i.y),a=t.bodyA.m_xf.position.y+(e.col1.y*i.x+e.col2.y*i.y),e=t.bodyB.m_xf.R,o=0;t.pointCount>o;++o)i=t.points[o].localPoint,n=t.bodyB.m_xf.position.x+(e.col1.x*i.x+e.col2.x*i.y),s=t.bodyB.m_xf.position.y+(e.col1.y*i.x+e.col2.y*i.y),this.m_separations[o]=(n-r)*this.m_normal.x+(s-a)*this.m_normal.y-t.radius,this.m_points[o].x=n,this.m_points[o].y=s;break;case A.e_faceB:for(e=t.bodyB.m_xf.R,i=t.localPlaneNormal,this.m_normal.x=e.col1.x*i.x+e.col2.x*i.y,this.m_normal.y=e.col1.y*i.x+e.col2.y*i.y,e=t.bodyB.m_xf.R,i=t.localPoint,r=t.bodyB.m_xf.position.x+(e.col1.x*i.x+e.col2.x*i.y),a=t.bodyB.m_xf.position.y+(e.col1.y*i.x+e.col2.y*i.y),e=t.bodyA.m_xf.R,o=0;t.pointCount>o;++o)i=t.points[o].localPoint,n=t.bodyA.m_xf.position.x+(e.col1.x*i.x+e.col2.x*i.y),s=t.bodyA.m_xf.position.y+(e.col1.y*i.x+e.col2.y*i.y),this.m_separations[o]=(n-r)*this.m_normal.x+(s-a)*this.m_normal.y-t.radius,this.m_points[o].Set(n,s);this.m_normal.x*=-1,this.m_normal.y*=-1}},Box2D.postDefs.push(function(){Box2D.Dynamics.Contacts.b2PositionSolverManifold.circlePointA=new B,Box2D.Dynamics.Contacts.b2PositionSolverManifold.circlePointB=new B})}(),function(){var t=(Box2D.Dynamics.b2Body,Box2D.Dynamics.b2BodyDef,Box2D.Dynamics.b2ContactFilter,Box2D.Dynamics.b2ContactImpulse,Box2D.Dynamics.b2ContactListener,Box2D.Dynamics.b2ContactManager,Box2D.Dynamics.b2DebugDraw,Box2D.Dynamics.b2DestructionListener,Box2D.Dynamics.b2FilterData,Box2D.Dynamics.b2Fixture,Box2D.Dynamics.b2FixtureDef,Box2D.Dynamics.b2Island,Box2D.Dynamics.b2TimeStep,Box2D.Dynamics.b2World,Box2D.Common.Math.b2Mat22),e=(Box2D.Common.Math.b2Mat33,Box2D.Common.Math.b2Math),i=(Box2D.Common.Math.b2Sweep,Box2D.Common.Math.b2Transform,Box2D.Common.Math.b2Vec2),o=(Box2D.Common.Math.b2Vec3,Box2D.Common.b2Color),n=(Box2D.Common.b2internal,Box2D.Common.b2Settings,Box2D.Collision.Shapes.b2CircleShape,Box2D.Collision.Shapes.b2EdgeChainDef,Box2D.Collision.Shapes.b2EdgeShape,Box2D.Collision.Shapes.b2MassData,Box2D.Collision.Shapes.b2PolygonShape,Box2D.Collision.Shapes.b2Shape,Box2D.Dynamics.Controllers.b2BuoyancyController),s=Box2D.Dynamics.Controllers.b2ConstantAccelController,r=Box2D.Dynamics.Controllers.b2ConstantForceController,a=Box2D.Dynamics.Controllers.b2Controller,l=Box2D.Dynamics.Controllers.b2ControllerEdge,c=Box2D.Dynamics.Controllers.b2GravityController,m=Box2D.Dynamics.Controllers.b2TensorDampingController;Box2D.inherit(n,Box2D.Dynamics.Controllers.b2Controller),n.prototype.__super=Box2D.Dynamics.Controllers.b2Controller.prototype,n.b2BuoyancyController=function(){Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.normal=new i(0,-1),this.offset=0,this.density=0,this.velocity=new i(0,0),this.linearDrag=2,this.angularDrag=1,this.useDensity=!1,this.useWorldGravity=!0,this.gravity=null},n.prototype.Step=function(){if(this.m_bodyList){this.useWorldGravity&&(this.gravity=this.GetWorld().GetGravity().Copy());for(var t=this.m_bodyList;t;t=t.nextBody){var e=t.body;if(0!=e.IsAwake()){for(var o=new i,n=new i,s=0,r=0,a=e.GetFixtureList();a;a=a.GetNext()){var l=new i,c=a.GetShape().ComputeSubmergedArea(this.normal,this.offset,e.GetTransform(),l);s+=c,o.x+=c*l.x,o.y+=c*l.y;var m=0;m=this.useDensity?1:1,r+=c*m,n.x+=c*l.x*m,n.y+=c*l.y*m}if(o.x/=s,o.y/=s,n.x/=r,n.y/=r,!(Number.MIN_VALUE>s)){var u=this.gravity.GetNegative();u.Multiply(this.density*s),e.ApplyForce(u,n);var h=e.GetLinearVelocityFromWorldPoint(o);h.Subtract(this.velocity),h.Multiply(-this.linearDrag*s),e.ApplyForce(h,o),e.ApplyTorque(-e.GetInertia()/e.GetMass()*s*e.GetAngularVelocity()*this.angularDrag)}}}}},n.prototype.Draw=function(t){var e=1e3,n=new i,s=new i;n.x=this.normal.x*this.offset+this.normal.y*e,n.y=this.normal.y*this.offset-this.normal.x*e,s.x=this.normal.x*this.offset-this.normal.y*e,s.y=this.normal.y*this.offset+this.normal.x*e;var r=new o(0,0,1);t.DrawSegment(n,s,r)},Box2D.inherit(s,Box2D.Dynamics.Controllers.b2Controller),s.prototype.__super=Box2D.Dynamics.Controllers.b2Controller.prototype,s.b2ConstantAccelController=function(){Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.A=new i(0,0)},s.prototype.Step=function(t){for(var e=new i(this.A.x*t.dt,this.A.y*t.dt),o=this.m_bodyList;o;o=o.nextBody){var n=o.body;n.IsAwake()&&n.SetLinearVelocity(new i(n.GetLinearVelocity().x+e.x,n.GetLinearVelocity().y+e.y))}},Box2D.inherit(r,Box2D.Dynamics.Controllers.b2Controller),r.prototype.__super=Box2D.Dynamics.Controllers.b2Controller.prototype,r.b2ConstantForceController=function(){Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.F=new i(0,0)},r.prototype.Step=function(){for(var t=this.m_bodyList;t;t=t.nextBody){var e=t.body;e.IsAwake()&&e.ApplyForce(this.F,e.GetWorldCenter())}},a.b2Controller=function(){},a.prototype.Step=function(){},a.prototype.Draw=function(){},a.prototype.AddBody=function(t){var e=new l;e.controller=this,e.body=t,e.nextBody=this.m_bodyList,e.prevBody=null,this.m_bodyList=e,e.nextBody&&(e.nextBody.prevBody=e),this.m_bodyCount++,e.nextController=t.m_controllerList,e.prevController=null,t.m_controllerList=e,e.nextController&&(e.nextController.prevController=e),t.m_controllerCount++},a.prototype.RemoveBody=function(t){for(var e=t.m_controllerList;e&&e.controller!=this;)e=e.nextController;e.prevBody&&(e.prevBody.nextBody=e.nextBody),e.nextBody&&(e.nextBody.prevBody=e.prevBody),e.nextController&&(e.nextController.prevController=e.prevController),e.prevController&&(e.prevController.nextController=e.nextController),this.m_bodyList==e&&(this.m_bodyList=e.nextBody),t.m_controllerList==e&&(t.m_controllerList=e.nextController),t.m_controllerCount--,this.m_bodyCount--},a.prototype.Clear=function(){for(;this.m_bodyList;)this.RemoveBody(this.m_bodyList.body)},a.prototype.GetNext=function(){return this.m_next},a.prototype.GetWorld=function(){return this.m_world},a.prototype.GetBodyList=function(){return this.m_bodyList},l.b2ControllerEdge=function(){},Box2D.inherit(c,Box2D.Dynamics.Controllers.b2Controller),c.prototype.__super=Box2D.Dynamics.Controllers.b2Controller.prototype,c.b2GravityController=function(){Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.G=1,this.invSqr=!0},c.prototype.Step=function(){var t=null,e=null,o=null,n=0,s=null,r=null,a=null,l=0,c=0,m=0,u=null;if(this.invSqr)for(t=this.m_bodyList;t;t=t.nextBody)for(e=t.body,o=e.GetWorldCenter(),n=e.GetMass(),s=this.m_bodyList;s!=t;s=s.nextBody)r=s.body,a=r.GetWorldCenter(),l=a.x-o.x,c=a.y-o.y,m=l*l+c*c,Number.MIN_VALUE>m||(u=new i(l,c),u.Multiply(this.G/m/Math.sqrt(m)*n*r.GetMass()),e.IsAwake()&&e.ApplyForce(u,o),u.Multiply(-1),r.IsAwake()&&r.ApplyForce(u,a));else for(t=this.m_bodyList;t;t=t.nextBody)for(e=t.body,o=e.GetWorldCenter(),n=e.GetMass(),s=this.m_bodyList;s!=t;s=s.nextBody)r=s.body,a=r.GetWorldCenter(),l=a.x-o.x,c=a.y-o.y,m=l*l+c*c,Number.MIN_VALUE>m||(u=new i(l,c),u.Multiply(this.G/m*n*r.GetMass()),e.IsAwake()&&e.ApplyForce(u,o),u.Multiply(-1),r.IsAwake()&&r.ApplyForce(u,a))},Box2D.inherit(m,Box2D.Dynamics.Controllers.b2Controller),m.prototype.__super=Box2D.Dynamics.Controllers.b2Controller.prototype,m.b2TensorDampingController=function(){Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.T=new t,this.maxTimestep=0},m.prototype.SetAxisAligned=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.T.col1.x=-t,this.T.col1.y=0,this.T.col2.x=0,this.T.col2.y=-e,this.maxTimestep=t>0||e>0?1/Math.max(t,e):0},m.prototype.Step=function(t){var o=t.dt;if(!(Number.MIN_VALUE>=o)){o>this.maxTimestep&&this.maxTimestep>0&&(o=this.maxTimestep);for(var n=this.m_bodyList;n;n=n.nextBody){var s=n.body;if(s.IsAwake()){var r=s.GetWorldVector(e.MulMV(this.T,s.GetLocalVector(s.GetLinearVelocity())));s.SetLinearVelocity(new i(s.GetLinearVelocity().x+r.x*o,s.GetLinearVelocity().y+r.y*o))}}}}}(),function(){var t=(Box2D.Common.b2Color,Box2D.Common.b2internal,Box2D.Common.b2Settings),e=Box2D.Common.Math.b2Mat22,i=Box2D.Common.Math.b2Mat33,o=Box2D.Common.Math.b2Math,n=(Box2D.Common.Math.b2Sweep,Box2D.Common.Math.b2Transform,Box2D.Common.Math.b2Vec2),s=Box2D.Common.Math.b2Vec3,r=Box2D.Dynamics.Joints.b2DistanceJoint,a=Box2D.Dynamics.Joints.b2DistanceJointDef,l=Box2D.Dynamics.Joints.b2FrictionJoint,c=Box2D.Dynamics.Joints.b2FrictionJointDef,m=Box2D.Dynamics.Joints.b2GearJoint,u=Box2D.Dynamics.Joints.b2GearJointDef,h=Box2D.Dynamics.Joints.b2Jacobian,p=Box2D.Dynamics.Joints.b2Joint,_=Box2D.Dynamics.Joints.b2JointDef,y=Box2D.Dynamics.Joints.b2JointEdge,f=Box2D.Dynamics.Joints.b2LineJoint,d=Box2D.Dynamics.Joints.b2LineJointDef,x=Box2D.Dynamics.Joints.b2MouseJoint,v=Box2D.Dynamics.Joints.b2MouseJointDef,b=Box2D.Dynamics.Joints.b2PrismaticJoint,g=Box2D.Dynamics.Joints.b2PrismaticJointDef,D=Box2D.Dynamics.Joints.b2PulleyJoint,C=Box2D.Dynamics.Joints.b2PulleyJointDef,B=Box2D.Dynamics.Joints.b2RevoluteJoint,w=Box2D.Dynamics.Joints.b2RevoluteJointDef,S=Box2D.Dynamics.Joints.b2WeldJoint,A=Box2D.Dynamics.Joints.b2WeldJointDef;Box2D.Dynamics.b2Body,Box2D.Dynamics.b2BodyDef,Box2D.Dynamics.b2ContactFilter,Box2D.Dynamics.b2ContactImpulse,Box2D.Dynamics.b2ContactListener,Box2D.Dynamics.b2ContactManager,Box2D.Dynamics.b2DebugDraw,Box2D.Dynamics.b2DestructionListener,Box2D.Dynamics.b2FilterData,Box2D.Dynamics.b2Fixture,Box2D.Dynamics.b2FixtureDef,Box2D.Dynamics.b2Island,Box2D.Dynamics.b2TimeStep,Box2D.Dynamics.b2World,Box2D.inherit(r,Box2D.Dynamics.Joints.b2Joint),r.prototype.__super=Box2D.Dynamics.Joints.b2Joint.prototype,r.b2DistanceJoint=function(){Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchor1=new n,this.m_localAnchor2=new n,this.m_u=new n},r.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},r.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},r.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new n(t*this.m_impulse*this.m_u.x,t*this.m_impulse*this.m_u.y)},r.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),0},r.prototype.GetLength=function(){return this.m_length},r.prototype.SetLength=function(t){void 0===t&&(t=0),this.m_length=t},r.prototype.GetFrequency=function(){return this.m_frequencyHz},r.prototype.SetFrequency=function(t){void 0===t&&(t=0),this.m_frequencyHz=t},r.prototype.GetDampingRatio=function(){return this.m_dampingRatio},r.prototype.SetDampingRatio=function(t){void 0===t&&(t=0),this.m_dampingRatio=t},r.prototype.b2DistanceJoint=function(t){this.__super.b2Joint.call(this,t),this.m_localAnchor1.SetV(t.localAnchorA),this.m_localAnchor2.SetV(t.localAnchorB),this.m_length=t.length,this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_impulse=0,this.m_gamma=0,this.m_bias=0},r.prototype.InitVelocityConstraints=function(e){var i,o=0,n=this.m_bodyA,s=this.m_bodyB;i=n.m_xf.R;var r=this.m_localAnchor1.x-n.m_sweep.localCenter.x,a=this.m_localAnchor1.y-n.m_sweep.localCenter.y;o=i.col1.x*r+i.col2.x*a,a=i.col1.y*r+i.col2.y*a,r=o,i=s.m_xf.R;var l=this.m_localAnchor2.x-s.m_sweep.localCenter.x,c=this.m_localAnchor2.y-s.m_sweep.localCenter.y;o=i.col1.x*l+i.col2.x*c,c=i.col1.y*l+i.col2.y*c,l=o,this.m_u.x=s.m_sweep.c.x+l-n.m_sweep.c.x-r,this.m_u.y=s.m_sweep.c.y+c-n.m_sweep.c.y-a;var m=Math.sqrt(this.m_u.x*this.m_u.x+this.m_u.y*this.m_u.y);m>t.b2_linearSlop?this.m_u.Multiply(1/m):this.m_u.SetZero();var u=r*this.m_u.y-a*this.m_u.x,h=l*this.m_u.y-c*this.m_u.x,p=n.m_invMass+n.m_invI*u*u+s.m_invMass+s.m_invI*h*h;if(this.m_mass=0!=p?1/p:0,this.m_frequencyHz>0){var _=m-this.m_length,y=2*Math.PI*this.m_frequencyHz,f=2*this.m_mass*this.m_dampingRatio*y,d=this.m_mass*y*y;this.m_gamma=e.dt*(f+e.dt*d),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_bias=_*e.dt*d*this.m_gamma,this.m_mass=p+this.m_gamma,this.m_mass=0!=this.m_mass?1/this.m_mass:0
}if(e.warmStarting){this.m_impulse*=e.dtRatio;var x=this.m_impulse*this.m_u.x,v=this.m_impulse*this.m_u.y;n.m_linearVelocity.x-=n.m_invMass*x,n.m_linearVelocity.y-=n.m_invMass*v,n.m_angularVelocity-=n.m_invI*(r*v-a*x),s.m_linearVelocity.x+=s.m_invMass*x,s.m_linearVelocity.y+=s.m_invMass*v,s.m_angularVelocity+=s.m_invI*(l*v-c*x)}else this.m_impulse=0},r.prototype.SolveVelocityConstraints=function(){var t,e=this.m_bodyA,i=this.m_bodyB;t=e.m_xf.R;var o=this.m_localAnchor1.x-e.m_sweep.localCenter.x,n=this.m_localAnchor1.y-e.m_sweep.localCenter.y,s=t.col1.x*o+t.col2.x*n;n=t.col1.y*o+t.col2.y*n,o=s,t=i.m_xf.R;var r=this.m_localAnchor2.x-i.m_sweep.localCenter.x,a=this.m_localAnchor2.y-i.m_sweep.localCenter.y;s=t.col1.x*r+t.col2.x*a,a=t.col1.y*r+t.col2.y*a,r=s;var l=e.m_linearVelocity.x+-e.m_angularVelocity*n,c=e.m_linearVelocity.y+e.m_angularVelocity*o,m=i.m_linearVelocity.x+-i.m_angularVelocity*a,u=i.m_linearVelocity.y+i.m_angularVelocity*r,h=this.m_u.x*(m-l)+this.m_u.y*(u-c),p=-this.m_mass*(h+this.m_bias+this.m_gamma*this.m_impulse);this.m_impulse+=p;var _=p*this.m_u.x,y=p*this.m_u.y;e.m_linearVelocity.x-=e.m_invMass*_,e.m_linearVelocity.y-=e.m_invMass*y,e.m_angularVelocity-=e.m_invI*(o*y-n*_),i.m_linearVelocity.x+=i.m_invMass*_,i.m_linearVelocity.y+=i.m_invMass*y,i.m_angularVelocity+=i.m_invI*(r*y-a*_)},r.prototype.SolvePositionConstraints=function(e){void 0===e&&(e=0);var i;if(this.m_frequencyHz>0)return!0;var n=this.m_bodyA,s=this.m_bodyB;i=n.m_xf.R;var r=this.m_localAnchor1.x-n.m_sweep.localCenter.x,a=this.m_localAnchor1.y-n.m_sweep.localCenter.y,l=i.col1.x*r+i.col2.x*a;a=i.col1.y*r+i.col2.y*a,r=l,i=s.m_xf.R;var c=this.m_localAnchor2.x-s.m_sweep.localCenter.x,m=this.m_localAnchor2.y-s.m_sweep.localCenter.y;l=i.col1.x*c+i.col2.x*m,m=i.col1.y*c+i.col2.y*m,c=l;var u=s.m_sweep.c.x+c-n.m_sweep.c.x-r,h=s.m_sweep.c.y+m-n.m_sweep.c.y-a,p=Math.sqrt(u*u+h*h);u/=p,h/=p;var _=p-this.m_length;_=o.Clamp(_,-t.b2_maxLinearCorrection,t.b2_maxLinearCorrection);var y=-this.m_mass*_;this.m_u.Set(u,h);var f=y*this.m_u.x,d=y*this.m_u.y;return n.m_sweep.c.x-=n.m_invMass*f,n.m_sweep.c.y-=n.m_invMass*d,n.m_sweep.a-=n.m_invI*(r*d-a*f),s.m_sweep.c.x+=s.m_invMass*f,s.m_sweep.c.y+=s.m_invMass*d,s.m_sweep.a+=s.m_invI*(c*d-m*f),n.SynchronizeTransform(),s.SynchronizeTransform(),o.Abs(_)<t.b2_linearSlop},Box2D.inherit(a,Box2D.Dynamics.Joints.b2JointDef),a.prototype.__super=Box2D.Dynamics.Joints.b2JointDef.prototype,a.b2DistanceJointDef=function(){Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new n,this.localAnchorB=new n},a.prototype.b2DistanceJointDef=function(){this.__super.b2JointDef.call(this),this.type=p.e_distanceJoint,this.length=1,this.frequencyHz=0,this.dampingRatio=0},a.prototype.Initialize=function(t,e,i,o){this.bodyA=t,this.bodyB=e,this.localAnchorA.SetV(this.bodyA.GetLocalPoint(i)),this.localAnchorB.SetV(this.bodyB.GetLocalPoint(o));var n=o.x-i.x,s=o.y-i.y;this.length=Math.sqrt(n*n+s*s),this.frequencyHz=0,this.dampingRatio=0},Box2D.inherit(l,Box2D.Dynamics.Joints.b2Joint),l.prototype.__super=Box2D.Dynamics.Joints.b2Joint.prototype,l.b2FrictionJoint=function(){Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchorA=new n,this.m_localAnchorB=new n,this.m_linearMass=new e,this.m_linearImpulse=new n},l.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA)},l.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB)},l.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new n(t*this.m_linearImpulse.x,t*this.m_linearImpulse.y)},l.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),t*this.m_angularImpulse},l.prototype.SetMaxForce=function(t){void 0===t&&(t=0),this.m_maxForce=t},l.prototype.GetMaxForce=function(){return this.m_maxForce},l.prototype.SetMaxTorque=function(t){void 0===t&&(t=0),this.m_maxTorque=t},l.prototype.GetMaxTorque=function(){return this.m_maxTorque},l.prototype.b2FrictionJoint=function(t){this.__super.b2Joint.call(this,t),this.m_localAnchorA.SetV(t.localAnchorA),this.m_localAnchorB.SetV(t.localAnchorB),this.m_linearMass.SetZero(),this.m_angularMass=0,this.m_linearImpulse.SetZero(),this.m_angularImpulse=0,this.m_maxForce=t.maxForce,this.m_maxTorque=t.maxTorque},l.prototype.InitVelocityConstraints=function(t){var i,o=0,n=this.m_bodyA,s=this.m_bodyB;i=n.m_xf.R;var r=this.m_localAnchorA.x-n.m_sweep.localCenter.x,a=this.m_localAnchorA.y-n.m_sweep.localCenter.y;o=i.col1.x*r+i.col2.x*a,a=i.col1.y*r+i.col2.y*a,r=o,i=s.m_xf.R;var l=this.m_localAnchorB.x-s.m_sweep.localCenter.x,c=this.m_localAnchorB.y-s.m_sweep.localCenter.y;o=i.col1.x*l+i.col2.x*c,c=i.col1.y*l+i.col2.y*c,l=o;var m=n.m_invMass,u=s.m_invMass,h=n.m_invI,p=s.m_invI,_=new e;if(_.col1.x=m+u,_.col2.x=0,_.col1.y=0,_.col2.y=m+u,_.col1.x+=h*a*a,_.col2.x+=-h*r*a,_.col1.y+=-h*r*a,_.col2.y+=h*r*r,_.col1.x+=p*c*c,_.col2.x+=-p*l*c,_.col1.y+=-p*l*c,_.col2.y+=p*l*l,_.GetInverse(this.m_linearMass),this.m_angularMass=h+p,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),t.warmStarting){this.m_linearImpulse.x*=t.dtRatio,this.m_linearImpulse.y*=t.dtRatio,this.m_angularImpulse*=t.dtRatio;var y=this.m_linearImpulse;n.m_linearVelocity.x-=m*y.x,n.m_linearVelocity.y-=m*y.y,n.m_angularVelocity-=h*(r*y.y-a*y.x+this.m_angularImpulse),s.m_linearVelocity.x+=u*y.x,s.m_linearVelocity.y+=u*y.y,s.m_angularVelocity+=p*(l*y.y-c*y.x+this.m_angularImpulse)}else this.m_linearImpulse.SetZero(),this.m_angularImpulse=0},l.prototype.SolveVelocityConstraints=function(t){var e,i=0,s=this.m_bodyA,r=this.m_bodyB,a=s.m_linearVelocity,l=s.m_angularVelocity,c=r.m_linearVelocity,m=r.m_angularVelocity,u=s.m_invMass,h=r.m_invMass,p=s.m_invI,_=r.m_invI;e=s.m_xf.R;var y=this.m_localAnchorA.x-s.m_sweep.localCenter.x,f=this.m_localAnchorA.y-s.m_sweep.localCenter.y;i=e.col1.x*y+e.col2.x*f,f=e.col1.y*y+e.col2.y*f,y=i,e=r.m_xf.R;var d=this.m_localAnchorB.x-r.m_sweep.localCenter.x,x=this.m_localAnchorB.y-r.m_sweep.localCenter.y;i=e.col1.x*d+e.col2.x*x,x=e.col1.y*d+e.col2.y*x,d=i;var v=0,b=m-l,g=-this.m_angularMass*b,D=this.m_angularImpulse;v=t.dt*this.m_maxTorque,this.m_angularImpulse=o.Clamp(this.m_angularImpulse+g,-v,v),g=this.m_angularImpulse-D,l-=p*g,m+=_*g;var C=c.x-m*x-a.x+l*f,B=c.y+m*d-a.y-l*y,w=o.MulMV(this.m_linearMass,new n(-C,-B)),S=this.m_linearImpulse.Copy();this.m_linearImpulse.Add(w),v=t.dt*this.m_maxForce,this.m_linearImpulse.LengthSquared()>v*v&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.Multiply(v)),w=o.SubtractVV(this.m_linearImpulse,S),a.x-=u*w.x,a.y-=u*w.y,l-=p*(y*w.y-f*w.x),c.x+=h*w.x,c.y+=h*w.y,m+=_*(d*w.y-x*w.x),s.m_angularVelocity=l,r.m_angularVelocity=m},l.prototype.SolvePositionConstraints=function(t){return void 0===t&&(t=0),!0},Box2D.inherit(c,Box2D.Dynamics.Joints.b2JointDef),c.prototype.__super=Box2D.Dynamics.Joints.b2JointDef.prototype,c.b2FrictionJointDef=function(){Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new n,this.localAnchorB=new n},c.prototype.b2FrictionJointDef=function(){this.__super.b2JointDef.call(this),this.type=p.e_frictionJoint,this.maxForce=0,this.maxTorque=0},c.prototype.Initialize=function(t,e,i){this.bodyA=t,this.bodyB=e,this.localAnchorA.SetV(this.bodyA.GetLocalPoint(i)),this.localAnchorB.SetV(this.bodyB.GetLocalPoint(i))},Box2D.inherit(m,Box2D.Dynamics.Joints.b2Joint),m.prototype.__super=Box2D.Dynamics.Joints.b2Joint.prototype,m.b2GearJoint=function(){Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_groundAnchor1=new n,this.m_groundAnchor2=new n,this.m_localAnchor1=new n,this.m_localAnchor2=new n,this.m_J=new h},m.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},m.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},m.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new n(t*this.m_impulse*this.m_J.linearB.x,t*this.m_impulse*this.m_J.linearB.y)},m.prototype.GetReactionTorque=function(t){void 0===t&&(t=0);var e=this.m_bodyB.m_xf.R,i=this.m_localAnchor1.x-this.m_bodyB.m_sweep.localCenter.x,o=this.m_localAnchor1.y-this.m_bodyB.m_sweep.localCenter.y,n=e.col1.x*i+e.col2.x*o;o=e.col1.y*i+e.col2.y*o,i=n;var s=this.m_impulse*this.m_J.linearB.x,r=this.m_impulse*this.m_J.linearB.y;return t*(this.m_impulse*this.m_J.angularB-i*r+o*s)},m.prototype.GetRatio=function(){return this.m_ratio},m.prototype.SetRatio=function(t){void 0===t&&(t=0),this.m_ratio=t},m.prototype.b2GearJoint=function(t){this.__super.b2Joint.call(this,t);var e=parseInt(t.joint1.m_type),i=parseInt(t.joint2.m_type);this.m_revolute1=null,this.m_prismatic1=null,this.m_revolute2=null,this.m_prismatic2=null;var o=0,n=0;this.m_ground1=t.joint1.GetBodyA(),this.m_bodyA=t.joint1.GetBodyB(),e==p.e_revoluteJoint?(this.m_revolute1=t.joint1 instanceof B?t.joint1:null,this.m_groundAnchor1.SetV(this.m_revolute1.m_localAnchor1),this.m_localAnchor1.SetV(this.m_revolute1.m_localAnchor2),o=this.m_revolute1.GetJointAngle()):(this.m_prismatic1=t.joint1 instanceof b?t.joint1:null,this.m_groundAnchor1.SetV(this.m_prismatic1.m_localAnchor1),this.m_localAnchor1.SetV(this.m_prismatic1.m_localAnchor2),o=this.m_prismatic1.GetJointTranslation()),this.m_ground2=t.joint2.GetBodyA(),this.m_bodyB=t.joint2.GetBodyB(),i==p.e_revoluteJoint?(this.m_revolute2=t.joint2 instanceof B?t.joint2:null,this.m_groundAnchor2.SetV(this.m_revolute2.m_localAnchor1),this.m_localAnchor2.SetV(this.m_revolute2.m_localAnchor2),n=this.m_revolute2.GetJointAngle()):(this.m_prismatic2=t.joint2 instanceof b?t.joint2:null,this.m_groundAnchor2.SetV(this.m_prismatic2.m_localAnchor1),this.m_localAnchor2.SetV(this.m_prismatic2.m_localAnchor2),n=this.m_prismatic2.GetJointTranslation()),this.m_ratio=t.ratio,this.m_constant=o+this.m_ratio*n,this.m_impulse=0},m.prototype.InitVelocityConstraints=function(t){var e,i,o=this.m_ground1,n=this.m_ground2,s=this.m_bodyA,r=this.m_bodyB,a=0,l=0,c=0,m=0,u=0,h=0,p=0;this.m_J.SetZero(),this.m_revolute1?(this.m_J.angularA=-1,p+=s.m_invI):(e=o.m_xf.R,i=this.m_prismatic1.m_localXAxis1,a=e.col1.x*i.x+e.col2.x*i.y,l=e.col1.y*i.x+e.col2.y*i.y,e=s.m_xf.R,c=this.m_localAnchor1.x-s.m_sweep.localCenter.x,m=this.m_localAnchor1.y-s.m_sweep.localCenter.y,h=e.col1.x*c+e.col2.x*m,m=e.col1.y*c+e.col2.y*m,c=h,u=c*l-m*a,this.m_J.linearA.Set(-a,-l),this.m_J.angularA=-u,p+=s.m_invMass+s.m_invI*u*u),this.m_revolute2?(this.m_J.angularB=-this.m_ratio,p+=this.m_ratio*this.m_ratio*r.m_invI):(e=n.m_xf.R,i=this.m_prismatic2.m_localXAxis1,a=e.col1.x*i.x+e.col2.x*i.y,l=e.col1.y*i.x+e.col2.y*i.y,e=r.m_xf.R,c=this.m_localAnchor2.x-r.m_sweep.localCenter.x,m=this.m_localAnchor2.y-r.m_sweep.localCenter.y,h=e.col1.x*c+e.col2.x*m,m=e.col1.y*c+e.col2.y*m,c=h,u=c*l-m*a,this.m_J.linearB.Set(-this.m_ratio*a,-this.m_ratio*l),this.m_J.angularB=-this.m_ratio*u,p+=this.m_ratio*this.m_ratio*(r.m_invMass+r.m_invI*u*u)),this.m_mass=p>0?1/p:0,t.warmStarting?(s.m_linearVelocity.x+=s.m_invMass*this.m_impulse*this.m_J.linearA.x,s.m_linearVelocity.y+=s.m_invMass*this.m_impulse*this.m_J.linearA.y,s.m_angularVelocity+=s.m_invI*this.m_impulse*this.m_J.angularA,r.m_linearVelocity.x+=r.m_invMass*this.m_impulse*this.m_J.linearB.x,r.m_linearVelocity.y+=r.m_invMass*this.m_impulse*this.m_J.linearB.y,r.m_angularVelocity+=r.m_invI*this.m_impulse*this.m_J.angularB):this.m_impulse=0},m.prototype.SolveVelocityConstraints=function(){var t=this.m_bodyA,e=this.m_bodyB,i=this.m_J.Compute(t.m_linearVelocity,t.m_angularVelocity,e.m_linearVelocity,e.m_angularVelocity),o=-this.m_mass*i;this.m_impulse+=o,t.m_linearVelocity.x+=t.m_invMass*o*this.m_J.linearA.x,t.m_linearVelocity.y+=t.m_invMass*o*this.m_J.linearA.y,t.m_angularVelocity+=t.m_invI*o*this.m_J.angularA,e.m_linearVelocity.x+=e.m_invMass*o*this.m_J.linearB.x,e.m_linearVelocity.y+=e.m_invMass*o*this.m_J.linearB.y,e.m_angularVelocity+=e.m_invI*o*this.m_J.angularB},m.prototype.SolvePositionConstraints=function(e){void 0===e&&(e=0);var i=0,o=this.m_bodyA,n=this.m_bodyB,s=0,r=0;s=this.m_revolute1?this.m_revolute1.GetJointAngle():this.m_prismatic1.GetJointTranslation(),r=this.m_revolute2?this.m_revolute2.GetJointAngle():this.m_prismatic2.GetJointTranslation();var a=this.m_constant-(s+this.m_ratio*r),l=-this.m_mass*a;return o.m_sweep.c.x+=o.m_invMass*l*this.m_J.linearA.x,o.m_sweep.c.y+=o.m_invMass*l*this.m_J.linearA.y,o.m_sweep.a+=o.m_invI*l*this.m_J.angularA,n.m_sweep.c.x+=n.m_invMass*l*this.m_J.linearB.x,n.m_sweep.c.y+=n.m_invMass*l*this.m_J.linearB.y,n.m_sweep.a+=n.m_invI*l*this.m_J.angularB,o.SynchronizeTransform(),n.SynchronizeTransform(),t.b2_linearSlop>i},Box2D.inherit(u,Box2D.Dynamics.Joints.b2JointDef),u.prototype.__super=Box2D.Dynamics.Joints.b2JointDef.prototype,u.b2GearJointDef=function(){Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments)},u.prototype.b2GearJointDef=function(){this.__super.b2JointDef.call(this),this.type=p.e_gearJoint,this.joint1=null,this.joint2=null,this.ratio=1},h.b2Jacobian=function(){this.linearA=new n,this.linearB=new n},h.prototype.SetZero=function(){this.linearA.SetZero(),this.angularA=0,this.linearB.SetZero(),this.angularB=0},h.prototype.Set=function(t,e,i,o){void 0===e&&(e=0),void 0===o&&(o=0),this.linearA.SetV(t),this.angularA=e,this.linearB.SetV(i),this.angularB=o},h.prototype.Compute=function(t,e,i,o){return void 0===e&&(e=0),void 0===o&&(o=0),this.linearA.x*t.x+this.linearA.y*t.y+this.angularA*e+(this.linearB.x*i.x+this.linearB.y*i.y)+this.angularB*o},p.b2Joint=function(){this.m_edgeA=new y,this.m_edgeB=new y,this.m_localCenterA=new n,this.m_localCenterB=new n},p.prototype.GetType=function(){return this.m_type},p.prototype.GetAnchorA=function(){return null},p.prototype.GetAnchorB=function(){return null},p.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),null},p.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),0},p.prototype.GetBodyA=function(){return this.m_bodyA},p.prototype.GetBodyB=function(){return this.m_bodyB},p.prototype.GetNext=function(){return this.m_next},p.prototype.GetUserData=function(){return this.m_userData},p.prototype.SetUserData=function(t){this.m_userData=t},p.prototype.IsActive=function(){return this.m_bodyA.IsActive()&&this.m_bodyB.IsActive()},p.Create=function(t){var e=null;switch(t.type){case p.e_distanceJoint:e=new r(t instanceof a?t:null);break;case p.e_mouseJoint:e=new x(t instanceof v?t:null);break;case p.e_prismaticJoint:e=new b(t instanceof g?t:null);break;case p.e_revoluteJoint:e=new B(t instanceof w?t:null);break;case p.e_pulleyJoint:e=new D(t instanceof C?t:null);break;case p.e_gearJoint:e=new m(t instanceof u?t:null);break;case p.e_lineJoint:e=new f(t instanceof d?t:null);break;case p.e_weldJoint:e=new S(t instanceof A?t:null);break;case p.e_frictionJoint:e=new l(t instanceof c?t:null);break;default:}return e},p.Destroy=function(){},p.prototype.b2Joint=function(e){t.b2Assert(e.bodyA!=e.bodyB),this.m_type=e.type,this.m_prev=null,this.m_next=null,this.m_bodyA=e.bodyA,this.m_bodyB=e.bodyB,this.m_collideConnected=e.collideConnected,this.m_islandFlag=!1,this.m_userData=e.userData},p.prototype.InitVelocityConstraints=function(){},p.prototype.SolveVelocityConstraints=function(){},p.prototype.FinalizeVelocityConstraints=function(){},p.prototype.SolvePositionConstraints=function(t){return void 0===t&&(t=0),!1},Box2D.postDefs.push(function(){Box2D.Dynamics.Joints.b2Joint.e_unknownJoint=0,Box2D.Dynamics.Joints.b2Joint.e_revoluteJoint=1,Box2D.Dynamics.Joints.b2Joint.e_prismaticJoint=2,Box2D.Dynamics.Joints.b2Joint.e_distanceJoint=3,Box2D.Dynamics.Joints.b2Joint.e_pulleyJoint=4,Box2D.Dynamics.Joints.b2Joint.e_mouseJoint=5,Box2D.Dynamics.Joints.b2Joint.e_gearJoint=6,Box2D.Dynamics.Joints.b2Joint.e_lineJoint=7,Box2D.Dynamics.Joints.b2Joint.e_weldJoint=8,Box2D.Dynamics.Joints.b2Joint.e_frictionJoint=9,Box2D.Dynamics.Joints.b2Joint.e_inactiveLimit=0,Box2D.Dynamics.Joints.b2Joint.e_atLowerLimit=1,Box2D.Dynamics.Joints.b2Joint.e_atUpperLimit=2,Box2D.Dynamics.Joints.b2Joint.e_equalLimits=3}),_.b2JointDef=function(){},_.prototype.b2JointDef=function(){this.type=p.e_unknownJoint,this.userData=null,this.bodyA=null,this.bodyB=null,this.collideConnected=!1},y.b2JointEdge=function(){},Box2D.inherit(f,Box2D.Dynamics.Joints.b2Joint),f.prototype.__super=Box2D.Dynamics.Joints.b2Joint.prototype,f.b2LineJoint=function(){Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchor1=new n,this.m_localAnchor2=new n,this.m_localXAxis1=new n,this.m_localYAxis1=new n,this.m_axis=new n,this.m_perp=new n,this.m_K=new e,this.m_impulse=new n},f.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},f.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},f.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new n(t*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.x),t*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.y))},f.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),t*this.m_impulse.y},f.prototype.GetJointTranslation=function(){var t=this.m_bodyA,e=this.m_bodyB,i=t.GetWorldPoint(this.m_localAnchor1),o=e.GetWorldPoint(this.m_localAnchor2),n=o.x-i.x,s=o.y-i.y,r=t.GetWorldVector(this.m_localXAxis1),a=r.x*n+r.y*s;return a},f.prototype.GetJointSpeed=function(){var t,e=this.m_bodyA,i=this.m_bodyB;t=e.m_xf.R;var o=this.m_localAnchor1.x-e.m_sweep.localCenter.x,n=this.m_localAnchor1.y-e.m_sweep.localCenter.y,s=t.col1.x*o+t.col2.x*n;n=t.col1.y*o+t.col2.y*n,o=s,t=i.m_xf.R;var r=this.m_localAnchor2.x-i.m_sweep.localCenter.x,a=this.m_localAnchor2.y-i.m_sweep.localCenter.y;s=t.col1.x*r+t.col2.x*a,a=t.col1.y*r+t.col2.y*a,r=s;var l=e.m_sweep.c.x+o,c=e.m_sweep.c.y+n,m=i.m_sweep.c.x+r,u=i.m_sweep.c.y+a,h=m-l,p=u-c,_=e.GetWorldVector(this.m_localXAxis1),y=e.m_linearVelocity,f=i.m_linearVelocity,d=e.m_angularVelocity,x=i.m_angularVelocity,v=h*-d*_.y+p*d*_.x+(_.x*(f.x+-x*a-y.x- -d*n)+_.y*(f.y+x*r-y.y-d*o));return v},f.prototype.IsLimitEnabled=function(){return this.m_enableLimit},f.prototype.EnableLimit=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=t},f.prototype.GetLowerLimit=function(){return this.m_lowerTranslation},f.prototype.GetUpperLimit=function(){return this.m_upperTranslation},f.prototype.SetLimits=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=t,this.m_upperTranslation=e},f.prototype.IsMotorEnabled=function(){return this.m_enableMotor},f.prototype.EnableMotor=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=t},f.prototype.SetMotorSpeed=function(t){void 0===t&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t},f.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},f.prototype.SetMaxMotorForce=function(t){void 0===t&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorForce=t},f.prototype.GetMaxMotorForce=function(){return this.m_maxMotorForce},f.prototype.GetMotorForce=function(){return this.m_motorImpulse},f.prototype.b2LineJoint=function(t){this.__super.b2Joint.call(this,t),this.m_localAnchor1.SetV(t.localAnchorA),this.m_localAnchor2.SetV(t.localAnchorB),this.m_localXAxis1.SetV(t.localAxisA),this.m_localYAxis1.x=-this.m_localXAxis1.y,this.m_localYAxis1.y=this.m_localXAxis1.x,this.m_impulse.SetZero(),this.m_motorMass=0,this.m_motorImpulse=0,this.m_lowerTranslation=t.lowerTranslation,this.m_upperTranslation=t.upperTranslation,this.m_maxMotorForce=t.maxMotorForce,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_limitState=p.e_inactiveLimit,this.m_axis.SetZero(),this.m_perp.SetZero()},f.prototype.InitVelocityConstraints=function(e){var i,n=this.m_bodyA,s=this.m_bodyB,r=0;this.m_localCenterA.SetV(n.GetLocalCenter()),this.m_localCenterB.SetV(s.GetLocalCenter());var a=n.GetTransform();s.GetTransform(),i=n.m_xf.R;var l=this.m_localAnchor1.x-this.m_localCenterA.x,c=this.m_localAnchor1.y-this.m_localCenterA.y;r=i.col1.x*l+i.col2.x*c,c=i.col1.y*l+i.col2.y*c,l=r,i=s.m_xf.R;var m=this.m_localAnchor2.x-this.m_localCenterB.x,u=this.m_localAnchor2.y-this.m_localCenterB.y;r=i.col1.x*m+i.col2.x*u,u=i.col1.y*m+i.col2.y*u,m=r;var h=s.m_sweep.c.x+m-n.m_sweep.c.x-l,_=s.m_sweep.c.y+u-n.m_sweep.c.y-c;this.m_invMassA=n.m_invMass,this.m_invMassB=s.m_invMass,this.m_invIA=n.m_invI,this.m_invIB=s.m_invI,this.m_axis.SetV(o.MulMV(a.R,this.m_localXAxis1)),this.m_a1=(h+l)*this.m_axis.y-(_+c)*this.m_axis.x,this.m_a2=m*this.m_axis.y-u*this.m_axis.x,this.m_motorMass=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_a1*this.m_a1+this.m_invIB*this.m_a2*this.m_a2,this.m_motorMass=this.m_motorMass>Number.MIN_VALUE?1/this.m_motorMass:0,this.m_perp.SetV(o.MulMV(a.R,this.m_localYAxis1)),this.m_s1=(h+l)*this.m_perp.y-(_+c)*this.m_perp.x,this.m_s2=m*this.m_perp.y-u*this.m_perp.x;var y=this.m_invMassA,f=this.m_invMassB,d=this.m_invIA,x=this.m_invIB;if(this.m_K.col1.x=y+f+d*this.m_s1*this.m_s1+x*this.m_s2*this.m_s2,this.m_K.col1.y=d*this.m_s1*this.m_a1+x*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=y+f+d*this.m_a1*this.m_a1+x*this.m_a2*this.m_a2,this.m_enableLimit){var v=this.m_axis.x*h+this.m_axis.y*_;o.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*t.b2_linearSlop?this.m_limitState=p.e_equalLimits:this.m_lowerTranslation>=v?this.m_limitState!=p.e_atLowerLimit&&(this.m_limitState=p.e_atLowerLimit,this.m_impulse.y=0):v>=this.m_upperTranslation?this.m_limitState!=p.e_atUpperLimit&&(this.m_limitState=p.e_atUpperLimit,this.m_impulse.y=0):(this.m_limitState=p.e_inactiveLimit,this.m_impulse.y=0)}else this.m_limitState=p.e_inactiveLimit;if(0==this.m_enableMotor&&(this.m_motorImpulse=0),e.warmStarting){this.m_impulse.x*=e.dtRatio,this.m_impulse.y*=e.dtRatio,this.m_motorImpulse*=e.dtRatio;var b=this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.x,g=this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.y,D=this.m_impulse.x*this.m_s1+(this.m_motorImpulse+this.m_impulse.y)*this.m_a1,C=this.m_impulse.x*this.m_s2+(this.m_motorImpulse+this.m_impulse.y)*this.m_a2;n.m_linearVelocity.x-=this.m_invMassA*b,n.m_linearVelocity.y-=this.m_invMassA*g,n.m_angularVelocity-=this.m_invIA*D,s.m_linearVelocity.x+=this.m_invMassB*b,s.m_linearVelocity.y+=this.m_invMassB*g,s.m_angularVelocity+=this.m_invIB*C}else this.m_impulse.SetZero(),this.m_motorImpulse=0},f.prototype.SolveVelocityConstraints=function(t){var e=this.m_bodyA,i=this.m_bodyB,s=e.m_linearVelocity,r=e.m_angularVelocity,a=i.m_linearVelocity,l=i.m_angularVelocity,c=0,m=0,u=0,h=0;if(this.m_enableMotor&&this.m_limitState!=p.e_equalLimits){var _=this.m_axis.x*(a.x-s.x)+this.m_axis.y*(a.y-s.y)+this.m_a2*l-this.m_a1*r,y=this.m_motorMass*(this.m_motorSpeed-_),f=this.m_motorImpulse,d=t.dt*this.m_maxMotorForce;this.m_motorImpulse=o.Clamp(this.m_motorImpulse+y,-d,d),y=this.m_motorImpulse-f,c=y*this.m_axis.x,m=y*this.m_axis.y,u=y*this.m_a1,h=y*this.m_a2,s.x-=this.m_invMassA*c,s.y-=this.m_invMassA*m,r-=this.m_invIA*u,a.x+=this.m_invMassB*c,a.y+=this.m_invMassB*m,l+=this.m_invIB*h}var x=this.m_perp.x*(a.x-s.x)+this.m_perp.y*(a.y-s.y)+this.m_s2*l-this.m_s1*r;if(this.m_enableLimit&&this.m_limitState!=p.e_inactiveLimit){var v=this.m_axis.x*(a.x-s.x)+this.m_axis.y*(a.y-s.y)+this.m_a2*l-this.m_a1*r,b=this.m_impulse.Copy(),g=this.m_K.Solve(new n,-x,-v);this.m_impulse.Add(g),this.m_limitState==p.e_atLowerLimit?this.m_impulse.y=o.Max(this.m_impulse.y,0):this.m_limitState==p.e_atUpperLimit&&(this.m_impulse.y=o.Min(this.m_impulse.y,0));var D=-x-(this.m_impulse.y-b.y)*this.m_K.col2.x,C=0;C=0!=this.m_K.col1.x?D/this.m_K.col1.x+b.x:b.x,this.m_impulse.x=C,g.x=this.m_impulse.x-b.x,g.y=this.m_impulse.y-b.y,c=g.x*this.m_perp.x+g.y*this.m_axis.x,m=g.x*this.m_perp.y+g.y*this.m_axis.y,u=g.x*this.m_s1+g.y*this.m_a1,h=g.x*this.m_s2+g.y*this.m_a2,s.x-=this.m_invMassA*c,s.y-=this.m_invMassA*m,r-=this.m_invIA*u,a.x+=this.m_invMassB*c,a.y+=this.m_invMassB*m,l+=this.m_invIB*h}else{var B=0;B=0!=this.m_K.col1.x?-x/this.m_K.col1.x:0,this.m_impulse.x+=B,c=B*this.m_perp.x,m=B*this.m_perp.y,u=B*this.m_s1,h=B*this.m_s2,s.x-=this.m_invMassA*c,s.y-=this.m_invMassA*m,r-=this.m_invIA*u,a.x+=this.m_invMassB*c,a.y+=this.m_invMassB*m,l+=this.m_invIB*h}e.m_linearVelocity.SetV(s),e.m_angularVelocity=r,i.m_linearVelocity.SetV(a),i.m_angularVelocity=l},f.prototype.SolvePositionConstraints=function(i){void 0===i&&(i=0);var s,r=this.m_bodyA,a=this.m_bodyB,l=r.m_sweep.c,c=r.m_sweep.a,m=a.m_sweep.c,u=a.m_sweep.a,h=0,p=0,_=0,y=0,f=0,d=0,x=0,v=!1,b=0,g=e.FromAngle(c),D=e.FromAngle(u);s=g;var C=this.m_localAnchor1.x-this.m_localCenterA.x,B=this.m_localAnchor1.y-this.m_localCenterA.y;h=s.col1.x*C+s.col2.x*B,B=s.col1.y*C+s.col2.y*B,C=h,s=D;var w=this.m_localAnchor2.x-this.m_localCenterB.x,S=this.m_localAnchor2.y-this.m_localCenterB.y;h=s.col1.x*w+s.col2.x*S,S=s.col1.y*w+s.col2.y*S,w=h;var A=m.x+w-l.x-C,M=m.y+S-l.y-B;if(this.m_enableLimit){this.m_axis=o.MulMV(g,this.m_localXAxis1),this.m_a1=(A+C)*this.m_axis.y-(M+B)*this.m_axis.x,this.m_a2=w*this.m_axis.y-S*this.m_axis.x;var V=this.m_axis.x*A+this.m_axis.y*M;o.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*t.b2_linearSlop?(b=o.Clamp(V,-t.b2_maxLinearCorrection,t.b2_maxLinearCorrection),d=o.Abs(V),v=!0):this.m_lowerTranslation>=V?(b=o.Clamp(V-this.m_lowerTranslation+t.b2_linearSlop,-t.b2_maxLinearCorrection,0),d=this.m_lowerTranslation-V,v=!0):V>=this.m_upperTranslation&&(b=o.Clamp(V-this.m_upperTranslation+t.b2_linearSlop,0,t.b2_maxLinearCorrection),d=V-this.m_upperTranslation,v=!0)}this.m_perp=o.MulMV(g,this.m_localYAxis1),this.m_s1=(A+C)*this.m_perp.y-(M+B)*this.m_perp.x,this.m_s2=w*this.m_perp.y-S*this.m_perp.x;var T=new n,I=this.m_perp.x*A+this.m_perp.y*M;if(d=o.Max(d,o.Abs(I)),x=0,v)p=this.m_invMassA,_=this.m_invMassB,y=this.m_invIA,f=this.m_invIB,this.m_K.col1.x=p+_+y*this.m_s1*this.m_s1+f*this.m_s2*this.m_s2,this.m_K.col1.y=y*this.m_s1*this.m_a1+f*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=p+_+y*this.m_a1*this.m_a1+f*this.m_a2*this.m_a2,this.m_K.Solve(T,-I,-b);else{p=this.m_invMassA,_=this.m_invMassB,y=this.m_invIA,f=this.m_invIB;var L=p+_+y*this.m_s1*this.m_s1+f*this.m_s2*this.m_s2,P=0;P=0!=L?-I/L:0,T.x=P,T.y=0}var F=T.x*this.m_perp.x+T.y*this.m_axis.x,G=T.x*this.m_perp.y+T.y*this.m_axis.y,k=T.x*this.m_s1+T.y*this.m_a1,J=T.x*this.m_s2+T.y*this.m_a2;return l.x-=this.m_invMassA*F,l.y-=this.m_invMassA*G,c-=this.m_invIA*k,m.x+=this.m_invMassB*F,m.y+=this.m_invMassB*G,u+=this.m_invIB*J,r.m_sweep.a=c,a.m_sweep.a=u,r.SynchronizeTransform(),a.SynchronizeTransform(),t.b2_linearSlop>=d&&t.b2_angularSlop>=x},Box2D.inherit(d,Box2D.Dynamics.Joints.b2JointDef),d.prototype.__super=Box2D.Dynamics.Joints.b2JointDef.prototype,d.b2LineJointDef=function(){Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new n,this.localAnchorB=new n,this.localAxisA=new n},d.prototype.b2LineJointDef=function(){this.__super.b2JointDef.call(this),this.type=p.e_lineJoint,this.localAxisA.Set(1,0),this.enableLimit=!1,this.lowerTranslation=0,this.upperTranslation=0,this.enableMotor=!1,this.maxMotorForce=0,this.motorSpeed=0},d.prototype.Initialize=function(t,e,i,o){this.bodyA=t,this.bodyB=e,this.localAnchorA=this.bodyA.GetLocalPoint(i),this.localAnchorB=this.bodyB.GetLocalPoint(i),this.localAxisA=this.bodyA.GetLocalVector(o)},Box2D.inherit(x,Box2D.Dynamics.Joints.b2Joint),x.prototype.__super=Box2D.Dynamics.Joints.b2Joint.prototype,x.b2MouseJoint=function(){Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.K=new e,this.K1=new e,this.K2=new e,this.m_localAnchor=new n,this.m_target=new n,this.m_impulse=new n,this.m_mass=new e,this.m_C=new n},x.prototype.GetAnchorA=function(){return this.m_target},x.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor)},x.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new n(t*this.m_impulse.x,t*this.m_impulse.y)},x.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),0},x.prototype.GetTarget=function(){return this.m_target},x.prototype.SetTarget=function(t){0==this.m_bodyB.IsAwake()&&this.m_bodyB.SetAwake(!0),this.m_target=t},x.prototype.GetMaxForce=function(){return this.m_maxForce},x.prototype.SetMaxForce=function(t){void 0===t&&(t=0),this.m_maxForce=t},x.prototype.GetFrequency=function(){return this.m_frequencyHz},x.prototype.SetFrequency=function(t){void 0===t&&(t=0),this.m_frequencyHz=t},x.prototype.GetDampingRatio=function(){return this.m_dampingRatio},x.prototype.SetDampingRatio=function(t){void 0===t&&(t=0),this.m_dampingRatio=t},x.prototype.b2MouseJoint=function(t){this.__super.b2Joint.call(this,t),this.m_target.SetV(t.target);var e=this.m_target.x-this.m_bodyB.m_xf.position.x,i=this.m_target.y-this.m_bodyB.m_xf.position.y,o=this.m_bodyB.m_xf.R;this.m_localAnchor.x=e*o.col1.x+i*o.col1.y,this.m_localAnchor.y=e*o.col2.x+i*o.col2.y,this.m_maxForce=t.maxForce,this.m_impulse.SetZero(),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_beta=0,this.m_gamma=0},x.prototype.InitVelocityConstraints=function(t){var e=this.m_bodyB,i=e.GetMass(),o=2*Math.PI*this.m_frequencyHz,n=2*i*this.m_dampingRatio*o,s=i*o*o;this.m_gamma=t.dt*(n+t.dt*s),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_beta=t.dt*s*this.m_gamma;var r;r=e.m_xf.R;var a=this.m_localAnchor.x-e.m_sweep.localCenter.x,l=this.m_localAnchor.y-e.m_sweep.localCenter.y,c=r.col1.x*a+r.col2.x*l;l=r.col1.y*a+r.col2.y*l,a=c;var m=e.m_invMass,u=e.m_invI;this.K1.col1.x=m,this.K1.col2.x=0,this.K1.col1.y=0,this.K1.col2.y=m,this.K2.col1.x=u*l*l,this.K2.col2.x=-u*a*l,this.K2.col1.y=-u*a*l,this.K2.col2.y=u*a*a,this.K.SetM(this.K1),this.K.AddM(this.K2),this.K.col1.x+=this.m_gamma,this.K.col2.y+=this.m_gamma,this.K.GetInverse(this.m_mass),this.m_C.x=e.m_sweep.c.x+a-this.m_target.x,this.m_C.y=e.m_sweep.c.y+l-this.m_target.y,e.m_angularVelocity*=.98,this.m_impulse.x*=t.dtRatio,this.m_impulse.y*=t.dtRatio,e.m_linearVelocity.x+=m*this.m_impulse.x,e.m_linearVelocity.y+=m*this.m_impulse.y,e.m_angularVelocity+=u*(a*this.m_impulse.y-l*this.m_impulse.x)},x.prototype.SolveVelocityConstraints=function(t){var e,i=this.m_bodyB,o=0,n=0;e=i.m_xf.R;var s=this.m_localAnchor.x-i.m_sweep.localCenter.x,r=this.m_localAnchor.y-i.m_sweep.localCenter.y;o=e.col1.x*s+e.col2.x*r,r=e.col1.y*s+e.col2.y*r,s=o;var a=i.m_linearVelocity.x+-i.m_angularVelocity*r,l=i.m_linearVelocity.y+i.m_angularVelocity*s;e=this.m_mass,o=a+this.m_beta*this.m_C.x+this.m_gamma*this.m_impulse.x,n=l+this.m_beta*this.m_C.y+this.m_gamma*this.m_impulse.y;var c=-(e.col1.x*o+e.col2.x*n),m=-(e.col1.y*o+e.col2.y*n),u=this.m_impulse.x,h=this.m_impulse.y;this.m_impulse.x+=c,this.m_impulse.y+=m;var p=t.dt*this.m_maxForce;this.m_impulse.LengthSquared()>p*p&&this.m_impulse.Multiply(p/this.m_impulse.Length()),c=this.m_impulse.x-u,m=this.m_impulse.y-h,i.m_linearVelocity.x+=i.m_invMass*c,i.m_linearVelocity.y+=i.m_invMass*m,i.m_angularVelocity+=i.m_invI*(s*m-r*c)},x.prototype.SolvePositionConstraints=function(t){return void 0===t&&(t=0),!0},Box2D.inherit(v,Box2D.Dynamics.Joints.b2JointDef),v.prototype.__super=Box2D.Dynamics.Joints.b2JointDef.prototype,v.b2MouseJointDef=function(){Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.target=new n},v.prototype.b2MouseJointDef=function(){this.__super.b2JointDef.call(this),this.type=p.e_mouseJoint,this.maxForce=0,this.frequencyHz=5,this.dampingRatio=.7},Box2D.inherit(b,Box2D.Dynamics.Joints.b2Joint),b.prototype.__super=Box2D.Dynamics.Joints.b2Joint.prototype,b.b2PrismaticJoint=function(){Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchor1=new n,this.m_localAnchor2=new n,this.m_localXAxis1=new n,this.m_localYAxis1=new n,this.m_axis=new n,this.m_perp=new n,this.m_K=new i,this.m_impulse=new s},b.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},b.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)
},b.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new n(t*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x),t*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y))},b.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),t*this.m_impulse.y},b.prototype.GetJointTranslation=function(){var t=this.m_bodyA,e=this.m_bodyB,i=t.GetWorldPoint(this.m_localAnchor1),o=e.GetWorldPoint(this.m_localAnchor2),n=o.x-i.x,s=o.y-i.y,r=t.GetWorldVector(this.m_localXAxis1),a=r.x*n+r.y*s;return a},b.prototype.GetJointSpeed=function(){var t,e=this.m_bodyA,i=this.m_bodyB;t=e.m_xf.R;var o=this.m_localAnchor1.x-e.m_sweep.localCenter.x,n=this.m_localAnchor1.y-e.m_sweep.localCenter.y,s=t.col1.x*o+t.col2.x*n;n=t.col1.y*o+t.col2.y*n,o=s,t=i.m_xf.R;var r=this.m_localAnchor2.x-i.m_sweep.localCenter.x,a=this.m_localAnchor2.y-i.m_sweep.localCenter.y;s=t.col1.x*r+t.col2.x*a,a=t.col1.y*r+t.col2.y*a,r=s;var l=e.m_sweep.c.x+o,c=e.m_sweep.c.y+n,m=i.m_sweep.c.x+r,u=i.m_sweep.c.y+a,h=m-l,p=u-c,_=e.GetWorldVector(this.m_localXAxis1),y=e.m_linearVelocity,f=i.m_linearVelocity,d=e.m_angularVelocity,x=i.m_angularVelocity,v=h*-d*_.y+p*d*_.x+(_.x*(f.x+-x*a-y.x- -d*n)+_.y*(f.y+x*r-y.y-d*o));return v},b.prototype.IsLimitEnabled=function(){return this.m_enableLimit},b.prototype.EnableLimit=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=t},b.prototype.GetLowerLimit=function(){return this.m_lowerTranslation},b.prototype.GetUpperLimit=function(){return this.m_upperTranslation},b.prototype.SetLimits=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=t,this.m_upperTranslation=e},b.prototype.IsMotorEnabled=function(){return this.m_enableMotor},b.prototype.EnableMotor=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=t},b.prototype.SetMotorSpeed=function(t){void 0===t&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t},b.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},b.prototype.SetMaxMotorForce=function(t){void 0===t&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorForce=t},b.prototype.GetMotorForce=function(){return this.m_motorImpulse},b.prototype.b2PrismaticJoint=function(t){this.__super.b2Joint.call(this,t),this.m_localAnchor1.SetV(t.localAnchorA),this.m_localAnchor2.SetV(t.localAnchorB),this.m_localXAxis1.SetV(t.localAxisA),this.m_localYAxis1.x=-this.m_localXAxis1.y,this.m_localYAxis1.y=this.m_localXAxis1.x,this.m_refAngle=t.referenceAngle,this.m_impulse.SetZero(),this.m_motorMass=0,this.m_motorImpulse=0,this.m_lowerTranslation=t.lowerTranslation,this.m_upperTranslation=t.upperTranslation,this.m_maxMotorForce=t.maxMotorForce,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_limitState=p.e_inactiveLimit,this.m_axis.SetZero(),this.m_perp.SetZero()},b.prototype.InitVelocityConstraints=function(e){var i,n=this.m_bodyA,s=this.m_bodyB,r=0;this.m_localCenterA.SetV(n.GetLocalCenter()),this.m_localCenterB.SetV(s.GetLocalCenter());var a=n.GetTransform();s.GetTransform(),i=n.m_xf.R;var l=this.m_localAnchor1.x-this.m_localCenterA.x,c=this.m_localAnchor1.y-this.m_localCenterA.y;r=i.col1.x*l+i.col2.x*c,c=i.col1.y*l+i.col2.y*c,l=r,i=s.m_xf.R;var m=this.m_localAnchor2.x-this.m_localCenterB.x,u=this.m_localAnchor2.y-this.m_localCenterB.y;r=i.col1.x*m+i.col2.x*u,u=i.col1.y*m+i.col2.y*u,m=r;var h=s.m_sweep.c.x+m-n.m_sweep.c.x-l,_=s.m_sweep.c.y+u-n.m_sweep.c.y-c;this.m_invMassA=n.m_invMass,this.m_invMassB=s.m_invMass,this.m_invIA=n.m_invI,this.m_invIB=s.m_invI,this.m_axis.SetV(o.MulMV(a.R,this.m_localXAxis1)),this.m_a1=(h+l)*this.m_axis.y-(_+c)*this.m_axis.x,this.m_a2=m*this.m_axis.y-u*this.m_axis.x,this.m_motorMass=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_a1*this.m_a1+this.m_invIB*this.m_a2*this.m_a2,this.m_motorMass>Number.MIN_VALUE&&(this.m_motorMass=1/this.m_motorMass),this.m_perp.SetV(o.MulMV(a.R,this.m_localYAxis1)),this.m_s1=(h+l)*this.m_perp.y-(_+c)*this.m_perp.x,this.m_s2=m*this.m_perp.y-u*this.m_perp.x;var y=this.m_invMassA,f=this.m_invMassB,d=this.m_invIA,x=this.m_invIB;if(this.m_K.col1.x=y+f+d*this.m_s1*this.m_s1+x*this.m_s2*this.m_s2,this.m_K.col1.y=d*this.m_s1+x*this.m_s2,this.m_K.col1.z=d*this.m_s1*this.m_a1+x*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=d+x,this.m_K.col2.z=d*this.m_a1+x*this.m_a2,this.m_K.col3.x=this.m_K.col1.z,this.m_K.col3.y=this.m_K.col2.z,this.m_K.col3.z=y+f+d*this.m_a1*this.m_a1+x*this.m_a2*this.m_a2,this.m_enableLimit){var v=this.m_axis.x*h+this.m_axis.y*_;o.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*t.b2_linearSlop?this.m_limitState=p.e_equalLimits:this.m_lowerTranslation>=v?this.m_limitState!=p.e_atLowerLimit&&(this.m_limitState=p.e_atLowerLimit,this.m_impulse.z=0):v>=this.m_upperTranslation?this.m_limitState!=p.e_atUpperLimit&&(this.m_limitState=p.e_atUpperLimit,this.m_impulse.z=0):(this.m_limitState=p.e_inactiveLimit,this.m_impulse.z=0)}else this.m_limitState=p.e_inactiveLimit;if(0==this.m_enableMotor&&(this.m_motorImpulse=0),e.warmStarting){this.m_impulse.x*=e.dtRatio,this.m_impulse.y*=e.dtRatio,this.m_motorImpulse*=e.dtRatio;var b=this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x,g=this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y,D=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1,C=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2;n.m_linearVelocity.x-=this.m_invMassA*b,n.m_linearVelocity.y-=this.m_invMassA*g,n.m_angularVelocity-=this.m_invIA*D,s.m_linearVelocity.x+=this.m_invMassB*b,s.m_linearVelocity.y+=this.m_invMassB*g,s.m_angularVelocity+=this.m_invIB*C}else this.m_impulse.SetZero(),this.m_motorImpulse=0},b.prototype.SolveVelocityConstraints=function(t){var e=this.m_bodyA,i=this.m_bodyB,r=e.m_linearVelocity,a=e.m_angularVelocity,l=i.m_linearVelocity,c=i.m_angularVelocity,m=0,u=0,h=0,_=0;if(this.m_enableMotor&&this.m_limitState!=p.e_equalLimits){var y=this.m_axis.x*(l.x-r.x)+this.m_axis.y*(l.y-r.y)+this.m_a2*c-this.m_a1*a,f=this.m_motorMass*(this.m_motorSpeed-y),d=this.m_motorImpulse,x=t.dt*this.m_maxMotorForce;this.m_motorImpulse=o.Clamp(this.m_motorImpulse+f,-x,x),f=this.m_motorImpulse-d,m=f*this.m_axis.x,u=f*this.m_axis.y,h=f*this.m_a1,_=f*this.m_a2,r.x-=this.m_invMassA*m,r.y-=this.m_invMassA*u,a-=this.m_invIA*h,l.x+=this.m_invMassB*m,l.y+=this.m_invMassB*u,c+=this.m_invIB*_}var v=this.m_perp.x*(l.x-r.x)+this.m_perp.y*(l.y-r.y)+this.m_s2*c-this.m_s1*a,b=c-a;if(this.m_enableLimit&&this.m_limitState!=p.e_inactiveLimit){var g=this.m_axis.x*(l.x-r.x)+this.m_axis.y*(l.y-r.y)+this.m_a2*c-this.m_a1*a,D=this.m_impulse.Copy(),C=this.m_K.Solve33(new s,-v,-b,-g);this.m_impulse.Add(C),this.m_limitState==p.e_atLowerLimit?this.m_impulse.z=o.Max(this.m_impulse.z,0):this.m_limitState==p.e_atUpperLimit&&(this.m_impulse.z=o.Min(this.m_impulse.z,0));var B=-v-(this.m_impulse.z-D.z)*this.m_K.col3.x,w=-b-(this.m_impulse.z-D.z)*this.m_K.col3.y,S=this.m_K.Solve22(new n,B,w);S.x+=D.x,S.y+=D.y,this.m_impulse.x=S.x,this.m_impulse.y=S.y,C.x=this.m_impulse.x-D.x,C.y=this.m_impulse.y-D.y,C.z=this.m_impulse.z-D.z,m=C.x*this.m_perp.x+C.z*this.m_axis.x,u=C.x*this.m_perp.y+C.z*this.m_axis.y,h=C.x*this.m_s1+C.y+C.z*this.m_a1,_=C.x*this.m_s2+C.y+C.z*this.m_a2,r.x-=this.m_invMassA*m,r.y-=this.m_invMassA*u,a-=this.m_invIA*h,l.x+=this.m_invMassB*m,l.y+=this.m_invMassB*u,c+=this.m_invIB*_}else{var A=this.m_K.Solve22(new n,-v,-b);this.m_impulse.x+=A.x,this.m_impulse.y+=A.y,m=A.x*this.m_perp.x,u=A.x*this.m_perp.y,h=A.x*this.m_s1+A.y,_=A.x*this.m_s2+A.y,r.x-=this.m_invMassA*m,r.y-=this.m_invMassA*u,a-=this.m_invIA*h,l.x+=this.m_invMassB*m,l.y+=this.m_invMassB*u,c+=this.m_invIB*_}e.m_linearVelocity.SetV(r),e.m_angularVelocity=a,i.m_linearVelocity.SetV(l),i.m_angularVelocity=c},b.prototype.SolvePositionConstraints=function(i){void 0===i&&(i=0);var r,a=this.m_bodyA,l=this.m_bodyB,c=a.m_sweep.c,m=a.m_sweep.a,u=l.m_sweep.c,h=l.m_sweep.a,p=0,_=0,y=0,f=0,d=0,x=0,v=0,b=!1,g=0,D=e.FromAngle(m),C=e.FromAngle(h);r=D;var B=this.m_localAnchor1.x-this.m_localCenterA.x,w=this.m_localAnchor1.y-this.m_localCenterA.y;p=r.col1.x*B+r.col2.x*w,w=r.col1.y*B+r.col2.y*w,B=p,r=C;var S=this.m_localAnchor2.x-this.m_localCenterB.x,A=this.m_localAnchor2.y-this.m_localCenterB.y;p=r.col1.x*S+r.col2.x*A,A=r.col1.y*S+r.col2.y*A,S=p;var M=u.x+S-c.x-B,V=u.y+A-c.y-w;if(this.m_enableLimit){this.m_axis=o.MulMV(D,this.m_localXAxis1),this.m_a1=(M+B)*this.m_axis.y-(V+w)*this.m_axis.x,this.m_a2=S*this.m_axis.y-A*this.m_axis.x;var T=this.m_axis.x*M+this.m_axis.y*V;o.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*t.b2_linearSlop?(g=o.Clamp(T,-t.b2_maxLinearCorrection,t.b2_maxLinearCorrection),x=o.Abs(T),b=!0):this.m_lowerTranslation>=T?(g=o.Clamp(T-this.m_lowerTranslation+t.b2_linearSlop,-t.b2_maxLinearCorrection,0),x=this.m_lowerTranslation-T,b=!0):T>=this.m_upperTranslation&&(g=o.Clamp(T-this.m_upperTranslation+t.b2_linearSlop,0,t.b2_maxLinearCorrection),x=T-this.m_upperTranslation,b=!0)}this.m_perp=o.MulMV(D,this.m_localYAxis1),this.m_s1=(M+B)*this.m_perp.y-(V+w)*this.m_perp.x,this.m_s2=S*this.m_perp.y-A*this.m_perp.x;var I=new s,L=this.m_perp.x*M+this.m_perp.y*V,P=h-m-this.m_refAngle;if(x=o.Max(x,o.Abs(L)),v=o.Abs(P),b)_=this.m_invMassA,y=this.m_invMassB,f=this.m_invIA,d=this.m_invIB,this.m_K.col1.x=_+y+f*this.m_s1*this.m_s1+d*this.m_s2*this.m_s2,this.m_K.col1.y=f*this.m_s1+d*this.m_s2,this.m_K.col1.z=f*this.m_s1*this.m_a1+d*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=f+d,this.m_K.col2.z=f*this.m_a1+d*this.m_a2,this.m_K.col3.x=this.m_K.col1.z,this.m_K.col3.y=this.m_K.col2.z,this.m_K.col3.z=_+y+f*this.m_a1*this.m_a1+d*this.m_a2*this.m_a2,this.m_K.Solve33(I,-L,-P,-g);else{_=this.m_invMassA,y=this.m_invMassB,f=this.m_invIA,d=this.m_invIB;var F=_+y+f*this.m_s1*this.m_s1+d*this.m_s2*this.m_s2,G=f*this.m_s1+d*this.m_s2,k=f+d;this.m_K.col1.Set(F,G,0),this.m_K.col2.Set(G,k,0);var J=this.m_K.Solve22(new n,-L,-P);I.x=J.x,I.y=J.y,I.z=0}var R=I.x*this.m_perp.x+I.z*this.m_axis.x,N=I.x*this.m_perp.y+I.z*this.m_axis.y,E=I.x*this.m_s1+I.y+I.z*this.m_a1,O=I.x*this.m_s2+I.y+I.z*this.m_a2;return c.x-=this.m_invMassA*R,c.y-=this.m_invMassA*N,m-=this.m_invIA*E,u.x+=this.m_invMassB*R,u.y+=this.m_invMassB*N,h+=this.m_invIB*O,a.m_sweep.a=m,l.m_sweep.a=h,a.SynchronizeTransform(),l.SynchronizeTransform(),t.b2_linearSlop>=x&&t.b2_angularSlop>=v},Box2D.inherit(g,Box2D.Dynamics.Joints.b2JointDef),g.prototype.__super=Box2D.Dynamics.Joints.b2JointDef.prototype,g.b2PrismaticJointDef=function(){Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new n,this.localAnchorB=new n,this.localAxisA=new n},g.prototype.b2PrismaticJointDef=function(){this.__super.b2JointDef.call(this),this.type=p.e_prismaticJoint,this.localAxisA.Set(1,0),this.referenceAngle=0,this.enableLimit=!1,this.lowerTranslation=0,this.upperTranslation=0,this.enableMotor=!1,this.maxMotorForce=0,this.motorSpeed=0},g.prototype.Initialize=function(t,e,i,o){this.bodyA=t,this.bodyB=e,this.localAnchorA=this.bodyA.GetLocalPoint(i),this.localAnchorB=this.bodyB.GetLocalPoint(i),this.localAxisA=this.bodyA.GetLocalVector(o),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()},Box2D.inherit(D,Box2D.Dynamics.Joints.b2Joint),D.prototype.__super=Box2D.Dynamics.Joints.b2Joint.prototype,D.b2PulleyJoint=function(){Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_groundAnchor1=new n,this.m_groundAnchor2=new n,this.m_localAnchor1=new n,this.m_localAnchor2=new n,this.m_u1=new n,this.m_u2=new n},D.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},D.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},D.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new n(t*this.m_impulse*this.m_u2.x,t*this.m_impulse*this.m_u2.y)},D.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),0},D.prototype.GetGroundAnchorA=function(){var t=this.m_ground.m_xf.position.Copy();return t.Add(this.m_groundAnchor1),t},D.prototype.GetGroundAnchorB=function(){var t=this.m_ground.m_xf.position.Copy();return t.Add(this.m_groundAnchor2),t},D.prototype.GetLength1=function(){var t=this.m_bodyA.GetWorldPoint(this.m_localAnchor1),e=this.m_ground.m_xf.position.x+this.m_groundAnchor1.x,i=this.m_ground.m_xf.position.y+this.m_groundAnchor1.y,o=t.x-e,n=t.y-i;return Math.sqrt(o*o+n*n)},D.prototype.GetLength2=function(){var t=this.m_bodyB.GetWorldPoint(this.m_localAnchor2),e=this.m_ground.m_xf.position.x+this.m_groundAnchor2.x,i=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y,o=t.x-e,n=t.y-i;return Math.sqrt(o*o+n*n)},D.prototype.GetRatio=function(){return this.m_ratio},D.prototype.b2PulleyJoint=function(t){this.__super.b2Joint.call(this,t),this.m_ground=this.m_bodyA.m_world.m_groundBody,this.m_groundAnchor1.x=t.groundAnchorA.x-this.m_ground.m_xf.position.x,this.m_groundAnchor1.y=t.groundAnchorA.y-this.m_ground.m_xf.position.y,this.m_groundAnchor2.x=t.groundAnchorB.x-this.m_ground.m_xf.position.x,this.m_groundAnchor2.y=t.groundAnchorB.y-this.m_ground.m_xf.position.y,this.m_localAnchor1.SetV(t.localAnchorA),this.m_localAnchor2.SetV(t.localAnchorB),this.m_ratio=t.ratio,this.m_constant=t.lengthA+this.m_ratio*t.lengthB,this.m_maxLength1=o.Min(t.maxLengthA,this.m_constant-this.m_ratio*D.b2_minPulleyLength),this.m_maxLength2=o.Min(t.maxLengthB,(this.m_constant-D.b2_minPulleyLength)/this.m_ratio),this.m_impulse=0,this.m_limitImpulse1=0,this.m_limitImpulse2=0},D.prototype.InitVelocityConstraints=function(e){var i,o=this.m_bodyA,n=this.m_bodyB;i=o.m_xf.R;var s=this.m_localAnchor1.x-o.m_sweep.localCenter.x,r=this.m_localAnchor1.y-o.m_sweep.localCenter.y,a=i.col1.x*s+i.col2.x*r;r=i.col1.y*s+i.col2.y*r,s=a,i=n.m_xf.R;var l=this.m_localAnchor2.x-n.m_sweep.localCenter.x,c=this.m_localAnchor2.y-n.m_sweep.localCenter.y;a=i.col1.x*l+i.col2.x*c,c=i.col1.y*l+i.col2.y*c,l=a;var m=o.m_sweep.c.x+s,u=o.m_sweep.c.y+r,h=n.m_sweep.c.x+l,_=n.m_sweep.c.y+c,y=this.m_ground.m_xf.position.x+this.m_groundAnchor1.x,f=this.m_ground.m_xf.position.y+this.m_groundAnchor1.y,d=this.m_ground.m_xf.position.x+this.m_groundAnchor2.x,x=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y;this.m_u1.Set(m-y,u-f),this.m_u2.Set(h-d,_-x);var v=this.m_u1.Length(),b=this.m_u2.Length();v>t.b2_linearSlop?this.m_u1.Multiply(1/v):this.m_u1.SetZero(),b>t.b2_linearSlop?this.m_u2.Multiply(1/b):this.m_u2.SetZero();var g=this.m_constant-v-this.m_ratio*b;g>0?(this.m_state=p.e_inactiveLimit,this.m_impulse=0):this.m_state=p.e_atUpperLimit,this.m_maxLength1>v?(this.m_limitState1=p.e_inactiveLimit,this.m_limitImpulse1=0):this.m_limitState1=p.e_atUpperLimit,this.m_maxLength2>b?(this.m_limitState2=p.e_inactiveLimit,this.m_limitImpulse2=0):this.m_limitState2=p.e_atUpperLimit;var D=s*this.m_u1.y-r*this.m_u1.x,C=l*this.m_u2.y-c*this.m_u2.x;if(this.m_limitMass1=o.m_invMass+o.m_invI*D*D,this.m_limitMass2=n.m_invMass+n.m_invI*C*C,this.m_pulleyMass=this.m_limitMass1+this.m_ratio*this.m_ratio*this.m_limitMass2,this.m_limitMass1=1/this.m_limitMass1,this.m_limitMass2=1/this.m_limitMass2,this.m_pulleyMass=1/this.m_pulleyMass,e.warmStarting){this.m_impulse*=e.dtRatio,this.m_limitImpulse1*=e.dtRatio,this.m_limitImpulse2*=e.dtRatio;var B=(-this.m_impulse-this.m_limitImpulse1)*this.m_u1.x,w=(-this.m_impulse-this.m_limitImpulse1)*this.m_u1.y,S=(-this.m_ratio*this.m_impulse-this.m_limitImpulse2)*this.m_u2.x,A=(-this.m_ratio*this.m_impulse-this.m_limitImpulse2)*this.m_u2.y;o.m_linearVelocity.x+=o.m_invMass*B,o.m_linearVelocity.y+=o.m_invMass*w,o.m_angularVelocity+=o.m_invI*(s*w-r*B),n.m_linearVelocity.x+=n.m_invMass*S,n.m_linearVelocity.y+=n.m_invMass*A,n.m_angularVelocity+=n.m_invI*(l*A-c*S)}else this.m_impulse=0,this.m_limitImpulse1=0,this.m_limitImpulse2=0},D.prototype.SolveVelocityConstraints=function(){var t,e=this.m_bodyA,i=this.m_bodyB;t=e.m_xf.R;var n=this.m_localAnchor1.x-e.m_sweep.localCenter.x,s=this.m_localAnchor1.y-e.m_sweep.localCenter.y,r=t.col1.x*n+t.col2.x*s;s=t.col1.y*n+t.col2.y*s,n=r,t=i.m_xf.R;var a=this.m_localAnchor2.x-i.m_sweep.localCenter.x,l=this.m_localAnchor2.y-i.m_sweep.localCenter.y;r=t.col1.x*a+t.col2.x*l,l=t.col1.y*a+t.col2.y*l,a=r;var c=0,m=0,u=0,h=0,_=0,y=0,f=0,d=0,x=0,v=0,b=0;this.m_state==p.e_atUpperLimit&&(c=e.m_linearVelocity.x+-e.m_angularVelocity*s,m=e.m_linearVelocity.y+e.m_angularVelocity*n,u=i.m_linearVelocity.x+-i.m_angularVelocity*l,h=i.m_linearVelocity.y+i.m_angularVelocity*a,x=-(this.m_u1.x*c+this.m_u1.y*m)-this.m_ratio*(this.m_u2.x*u+this.m_u2.y*h),v=this.m_pulleyMass*-x,b=this.m_impulse,this.m_impulse=o.Max(0,this.m_impulse+v),v=this.m_impulse-b,_=-v*this.m_u1.x,y=-v*this.m_u1.y,f=-this.m_ratio*v*this.m_u2.x,d=-this.m_ratio*v*this.m_u2.y,e.m_linearVelocity.x+=e.m_invMass*_,e.m_linearVelocity.y+=e.m_invMass*y,e.m_angularVelocity+=e.m_invI*(n*y-s*_),i.m_linearVelocity.x+=i.m_invMass*f,i.m_linearVelocity.y+=i.m_invMass*d,i.m_angularVelocity+=i.m_invI*(a*d-l*f)),this.m_limitState1==p.e_atUpperLimit&&(c=e.m_linearVelocity.x+-e.m_angularVelocity*s,m=e.m_linearVelocity.y+e.m_angularVelocity*n,x=-(this.m_u1.x*c+this.m_u1.y*m),v=-this.m_limitMass1*x,b=this.m_limitImpulse1,this.m_limitImpulse1=o.Max(0,this.m_limitImpulse1+v),v=this.m_limitImpulse1-b,_=-v*this.m_u1.x,y=-v*this.m_u1.y,e.m_linearVelocity.x+=e.m_invMass*_,e.m_linearVelocity.y+=e.m_invMass*y,e.m_angularVelocity+=e.m_invI*(n*y-s*_)),this.m_limitState2==p.e_atUpperLimit&&(u=i.m_linearVelocity.x+-i.m_angularVelocity*l,h=i.m_linearVelocity.y+i.m_angularVelocity*a,x=-(this.m_u2.x*u+this.m_u2.y*h),v=-this.m_limitMass2*x,b=this.m_limitImpulse2,this.m_limitImpulse2=o.Max(0,this.m_limitImpulse2+v),v=this.m_limitImpulse2-b,f=-v*this.m_u2.x,d=-v*this.m_u2.y,i.m_linearVelocity.x+=i.m_invMass*f,i.m_linearVelocity.y+=i.m_invMass*d,i.m_angularVelocity+=i.m_invI*(a*d-l*f))},D.prototype.SolvePositionConstraints=function(e){void 0===e&&(e=0);var i,n=this.m_bodyA,s=this.m_bodyB,r=this.m_ground.m_xf.position.x+this.m_groundAnchor1.x,a=this.m_ground.m_xf.position.y+this.m_groundAnchor1.y,l=this.m_ground.m_xf.position.x+this.m_groundAnchor2.x,c=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y,m=0,u=0,h=0,_=0,y=0,f=0,d=0,x=0,v=0,b=0,g=0,D=0,C=0,B=0;return this.m_state==p.e_atUpperLimit&&(i=n.m_xf.R,m=this.m_localAnchor1.x-n.m_sweep.localCenter.x,u=this.m_localAnchor1.y-n.m_sweep.localCenter.y,C=i.col1.x*m+i.col2.x*u,u=i.col1.y*m+i.col2.y*u,m=C,i=s.m_xf.R,h=this.m_localAnchor2.x-s.m_sweep.localCenter.x,_=this.m_localAnchor2.y-s.m_sweep.localCenter.y,C=i.col1.x*h+i.col2.x*_,_=i.col1.y*h+i.col2.y*_,h=C,y=n.m_sweep.c.x+m,f=n.m_sweep.c.y+u,d=s.m_sweep.c.x+h,x=s.m_sweep.c.y+_,this.m_u1.Set(y-r,f-a),this.m_u2.Set(d-l,x-c),v=this.m_u1.Length(),b=this.m_u2.Length(),v>t.b2_linearSlop?this.m_u1.Multiply(1/v):this.m_u1.SetZero(),b>t.b2_linearSlop?this.m_u2.Multiply(1/b):this.m_u2.SetZero(),g=this.m_constant-v-this.m_ratio*b,B=o.Max(B,-g),g=o.Clamp(g+t.b2_linearSlop,-t.b2_maxLinearCorrection,0),D=-this.m_pulleyMass*g,y=-D*this.m_u1.x,f=-D*this.m_u1.y,d=-this.m_ratio*D*this.m_u2.x,x=-this.m_ratio*D*this.m_u2.y,n.m_sweep.c.x+=n.m_invMass*y,n.m_sweep.c.y+=n.m_invMass*f,n.m_sweep.a+=n.m_invI*(m*f-u*y),s.m_sweep.c.x+=s.m_invMass*d,s.m_sweep.c.y+=s.m_invMass*x,s.m_sweep.a+=s.m_invI*(h*x-_*d),n.SynchronizeTransform(),s.SynchronizeTransform()),this.m_limitState1==p.e_atUpperLimit&&(i=n.m_xf.R,m=this.m_localAnchor1.x-n.m_sweep.localCenter.x,u=this.m_localAnchor1.y-n.m_sweep.localCenter.y,C=i.col1.x*m+i.col2.x*u,u=i.col1.y*m+i.col2.y*u,m=C,y=n.m_sweep.c.x+m,f=n.m_sweep.c.y+u,this.m_u1.Set(y-r,f-a),v=this.m_u1.Length(),v>t.b2_linearSlop?(this.m_u1.x*=1/v,this.m_u1.y*=1/v):this.m_u1.SetZero(),g=this.m_maxLength1-v,B=o.Max(B,-g),g=o.Clamp(g+t.b2_linearSlop,-t.b2_maxLinearCorrection,0),D=-this.m_limitMass1*g,y=-D*this.m_u1.x,f=-D*this.m_u1.y,n.m_sweep.c.x+=n.m_invMass*y,n.m_sweep.c.y+=n.m_invMass*f,n.m_sweep.a+=n.m_invI*(m*f-u*y),n.SynchronizeTransform()),this.m_limitState2==p.e_atUpperLimit&&(i=s.m_xf.R,h=this.m_localAnchor2.x-s.m_sweep.localCenter.x,_=this.m_localAnchor2.y-s.m_sweep.localCenter.y,C=i.col1.x*h+i.col2.x*_,_=i.col1.y*h+i.col2.y*_,h=C,d=s.m_sweep.c.x+h,x=s.m_sweep.c.y+_,this.m_u2.Set(d-l,x-c),b=this.m_u2.Length(),b>t.b2_linearSlop?(this.m_u2.x*=1/b,this.m_u2.y*=1/b):this.m_u2.SetZero(),g=this.m_maxLength2-b,B=o.Max(B,-g),g=o.Clamp(g+t.b2_linearSlop,-t.b2_maxLinearCorrection,0),D=-this.m_limitMass2*g,d=-D*this.m_u2.x,x=-D*this.m_u2.y,s.m_sweep.c.x+=s.m_invMass*d,s.m_sweep.c.y+=s.m_invMass*x,s.m_sweep.a+=s.m_invI*(h*x-_*d),s.SynchronizeTransform()),t.b2_linearSlop>B},Box2D.postDefs.push(function(){Box2D.Dynamics.Joints.b2PulleyJoint.b2_minPulleyLength=2}),Box2D.inherit(C,Box2D.Dynamics.Joints.b2JointDef),C.prototype.__super=Box2D.Dynamics.Joints.b2JointDef.prototype,C.b2PulleyJointDef=function(){Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.groundAnchorA=new n,this.groundAnchorB=new n,this.localAnchorA=new n,this.localAnchorB=new n},C.prototype.b2PulleyJointDef=function(){this.__super.b2JointDef.call(this),this.type=p.e_pulleyJoint,this.groundAnchorA.Set(-1,1),this.groundAnchorB.Set(1,1),this.localAnchorA.Set(-1,0),this.localAnchorB.Set(1,0),this.lengthA=0,this.maxLengthA=0,this.lengthB=0,this.maxLengthB=0,this.ratio=1,this.collideConnected=!0},C.prototype.Initialize=function(t,e,i,o,n,s,r){void 0===r&&(r=0),this.bodyA=t,this.bodyB=e,this.groundAnchorA.SetV(i),this.groundAnchorB.SetV(o),this.localAnchorA=this.bodyA.GetLocalPoint(n),this.localAnchorB=this.bodyB.GetLocalPoint(s);var a=n.x-i.x,l=n.y-i.y;this.lengthA=Math.sqrt(a*a+l*l);var c=s.x-o.x,m=s.y-o.y;this.lengthB=Math.sqrt(c*c+m*m),this.ratio=r;var u=this.lengthA+this.ratio*this.lengthB;this.maxLengthA=u-this.ratio*D.b2_minPulleyLength,this.maxLengthB=(u-D.b2_minPulleyLength)/this.ratio},Box2D.inherit(B,Box2D.Dynamics.Joints.b2Joint),B.prototype.__super=Box2D.Dynamics.Joints.b2Joint.prototype,B.b2RevoluteJoint=function(){Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.K=new e,this.K1=new e,this.K2=new e,this.K3=new e,this.impulse3=new s,this.impulse2=new n,this.reduced=new n,this.m_localAnchor1=new n,this.m_localAnchor2=new n,this.m_impulse=new s,this.m_mass=new i},B.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},B.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},B.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new n(t*this.m_impulse.x,t*this.m_impulse.y)},B.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),t*this.m_impulse.z},B.prototype.GetJointAngle=function(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a-this.m_referenceAngle},B.prototype.GetJointSpeed=function(){return this.m_bodyB.m_angularVelocity-this.m_bodyA.m_angularVelocity},B.prototype.IsLimitEnabled=function(){return this.m_enableLimit},B.prototype.EnableLimit=function(t){this.m_enableLimit=t},B.prototype.GetLowerLimit=function(){return this.m_lowerAngle},B.prototype.GetUpperLimit=function(){return this.m_upperAngle},B.prototype.SetLimits=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.m_lowerAngle=t,this.m_upperAngle=e},B.prototype.IsMotorEnabled=function(){return this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor},B.prototype.EnableMotor=function(t){this.m_enableMotor=t},B.prototype.SetMotorSpeed=function(t){void 0===t&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t},B.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},B.prototype.SetMaxMotorTorque=function(t){void 0===t&&(t=0),this.m_maxMotorTorque=t},B.prototype.GetMotorTorque=function(){return this.m_maxMotorTorque},B.prototype.b2RevoluteJoint=function(t){this.__super.b2Joint.call(this,t),this.m_localAnchor1.SetV(t.localAnchorA),this.m_localAnchor2.SetV(t.localAnchorB),this.m_referenceAngle=t.referenceAngle,this.m_impulse.SetZero(),this.m_motorImpulse=0,this.m_lowerAngle=t.lowerAngle,this.m_upperAngle=t.upperAngle,this.m_maxMotorTorque=t.maxMotorTorque,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_limitState=p.e_inactiveLimit},B.prototype.InitVelocityConstraints=function(e){var i,n=this.m_bodyA,s=this.m_bodyB,r=0;this.m_enableMotor||this.m_enableLimit,i=n.m_xf.R;var a=this.m_localAnchor1.x-n.m_sweep.localCenter.x,l=this.m_localAnchor1.y-n.m_sweep.localCenter.y;r=i.col1.x*a+i.col2.x*l,l=i.col1.y*a+i.col2.y*l,a=r,i=s.m_xf.R;var c=this.m_localAnchor2.x-s.m_sweep.localCenter.x,m=this.m_localAnchor2.y-s.m_sweep.localCenter.y;r=i.col1.x*c+i.col2.x*m,m=i.col1.y*c+i.col2.y*m,c=r;var u=n.m_invMass,h=s.m_invMass,_=n.m_invI,y=s.m_invI;if(this.m_mass.col1.x=u+h+l*l*_+m*m*y,this.m_mass.col2.x=-l*a*_-m*c*y,this.m_mass.col3.x=-l*_-m*y,this.m_mass.col1.y=this.m_mass.col2.x,this.m_mass.col2.y=u+h+a*a*_+c*c*y,this.m_mass.col3.y=a*_+c*y,this.m_mass.col1.z=this.m_mass.col3.x,this.m_mass.col2.z=this.m_mass.col3.y,this.m_mass.col3.z=_+y,this.m_motorMass=1/(_+y),0==this.m_enableMotor&&(this.m_motorImpulse=0),this.m_enableLimit){var f=s.m_sweep.a-n.m_sweep.a-this.m_referenceAngle;o.Abs(this.m_upperAngle-this.m_lowerAngle)<2*t.b2_angularSlop?this.m_limitState=p.e_equalLimits:this.m_lowerAngle>=f?(this.m_limitState!=p.e_atLowerLimit&&(this.m_impulse.z=0),this.m_limitState=p.e_atLowerLimit):f>=this.m_upperAngle?(this.m_limitState!=p.e_atUpperLimit&&(this.m_impulse.z=0),this.m_limitState=p.e_atUpperLimit):(this.m_limitState=p.e_inactiveLimit,this.m_impulse.z=0)}else this.m_limitState=p.e_inactiveLimit;if(e.warmStarting){this.m_impulse.x*=e.dtRatio,this.m_impulse.y*=e.dtRatio,this.m_motorImpulse*=e.dtRatio;var d=this.m_impulse.x,x=this.m_impulse.y;n.m_linearVelocity.x-=u*d,n.m_linearVelocity.y-=u*x,n.m_angularVelocity-=_*(a*x-l*d+this.m_motorImpulse+this.m_impulse.z),s.m_linearVelocity.x+=h*d,s.m_linearVelocity.y+=h*x,s.m_angularVelocity+=y*(c*x-m*d+this.m_motorImpulse+this.m_impulse.z)}else this.m_impulse.SetZero(),this.m_motorImpulse=0},B.prototype.SolveVelocityConstraints=function(t){var e,i=this.m_bodyA,n=this.m_bodyB,s=0,r=0,a=0,l=0,c=0,m=0,u=i.m_linearVelocity,h=i.m_angularVelocity,_=n.m_linearVelocity,y=n.m_angularVelocity,f=i.m_invMass,d=n.m_invMass,x=i.m_invI,v=n.m_invI;if(this.m_enableMotor&&this.m_limitState!=p.e_equalLimits){var b=y-h-this.m_motorSpeed,g=this.m_motorMass*-b,D=this.m_motorImpulse,C=t.dt*this.m_maxMotorTorque;this.m_motorImpulse=o.Clamp(this.m_motorImpulse+g,-C,C),g=this.m_motorImpulse-D,h-=x*g,y+=v*g}if(this.m_enableLimit&&this.m_limitState!=p.e_inactiveLimit){e=i.m_xf.R,a=this.m_localAnchor1.x-i.m_sweep.localCenter.x,l=this.m_localAnchor1.y-i.m_sweep.localCenter.y,s=e.col1.x*a+e.col2.x*l,l=e.col1.y*a+e.col2.y*l,a=s,e=n.m_xf.R,c=this.m_localAnchor2.x-n.m_sweep.localCenter.x,m=this.m_localAnchor2.y-n.m_sweep.localCenter.y,s=e.col1.x*c+e.col2.x*m,m=e.col1.y*c+e.col2.y*m,c=s;var B=_.x+-y*m-u.x- -h*l,w=_.y+y*c-u.y-h*a,S=y-h;this.m_mass.Solve33(this.impulse3,-B,-w,-S),this.m_limitState==p.e_equalLimits?this.m_impulse.Add(this.impulse3):this.m_limitState==p.e_atLowerLimit?(r=this.m_impulse.z+this.impulse3.z,0>r&&(this.m_mass.Solve22(this.reduced,-B,-w),this.impulse3.x=this.reduced.x,this.impulse3.y=this.reduced.y,this.impulse3.z=-this.m_impulse.z,this.m_impulse.x+=this.reduced.x,this.m_impulse.y+=this.reduced.y,this.m_impulse.z=0)):this.m_limitState==p.e_atUpperLimit&&(r=this.m_impulse.z+this.impulse3.z,r>0&&(this.m_mass.Solve22(this.reduced,-B,-w),this.impulse3.x=this.reduced.x,this.impulse3.y=this.reduced.y,this.impulse3.z=-this.m_impulse.z,this.m_impulse.x+=this.reduced.x,this.m_impulse.y+=this.reduced.y,this.m_impulse.z=0)),u.x-=f*this.impulse3.x,u.y-=f*this.impulse3.y,h-=x*(a*this.impulse3.y-l*this.impulse3.x+this.impulse3.z),_.x+=d*this.impulse3.x,_.y+=d*this.impulse3.y,y+=v*(c*this.impulse3.y-m*this.impulse3.x+this.impulse3.z)}else{e=i.m_xf.R,a=this.m_localAnchor1.x-i.m_sweep.localCenter.x,l=this.m_localAnchor1.y-i.m_sweep.localCenter.y,s=e.col1.x*a+e.col2.x*l,l=e.col1.y*a+e.col2.y*l,a=s,e=n.m_xf.R,c=this.m_localAnchor2.x-n.m_sweep.localCenter.x,m=this.m_localAnchor2.y-n.m_sweep.localCenter.y,s=e.col1.x*c+e.col2.x*m,m=e.col1.y*c+e.col2.y*m,c=s;var A=_.x+-y*m-u.x- -h*l,M=_.y+y*c-u.y-h*a;this.m_mass.Solve22(this.impulse2,-A,-M),this.m_impulse.x+=this.impulse2.x,this.m_impulse.y+=this.impulse2.y,u.x-=f*this.impulse2.x,u.y-=f*this.impulse2.y,h-=x*(a*this.impulse2.y-l*this.impulse2.x),_.x+=d*this.impulse2.x,_.y+=d*this.impulse2.y,y+=v*(c*this.impulse2.y-m*this.impulse2.x)}i.m_linearVelocity.SetV(u),i.m_angularVelocity=h,n.m_linearVelocity.SetV(_),n.m_angularVelocity=y},B.prototype.SolvePositionConstraints=function(e){void 0===e&&(e=0);var i,n=0,s=this.m_bodyA,r=this.m_bodyB,a=0,l=0,c=0,m=0,u=0;if(this.m_enableLimit&&this.m_limitState!=p.e_inactiveLimit){var h=r.m_sweep.a-s.m_sweep.a-this.m_referenceAngle,_=0;this.m_limitState==p.e_equalLimits?(n=o.Clamp(h-this.m_lowerAngle,-t.b2_maxAngularCorrection,t.b2_maxAngularCorrection),_=-this.m_motorMass*n,a=o.Abs(n)):this.m_limitState==p.e_atLowerLimit?(n=h-this.m_lowerAngle,a=-n,n=o.Clamp(n+t.b2_angularSlop,-t.b2_maxAngularCorrection,0),_=-this.m_motorMass*n):this.m_limitState==p.e_atUpperLimit&&(n=h-this.m_upperAngle,a=n,n=o.Clamp(n-t.b2_angularSlop,0,t.b2_maxAngularCorrection),_=-this.m_motorMass*n),s.m_sweep.a-=s.m_invI*_,r.m_sweep.a+=r.m_invI*_,s.SynchronizeTransform(),r.SynchronizeTransform()}i=s.m_xf.R;var y=this.m_localAnchor1.x-s.m_sweep.localCenter.x,f=this.m_localAnchor1.y-s.m_sweep.localCenter.y;c=i.col1.x*y+i.col2.x*f,f=i.col1.y*y+i.col2.y*f,y=c,i=r.m_xf.R;var d=this.m_localAnchor2.x-r.m_sweep.localCenter.x,x=this.m_localAnchor2.y-r.m_sweep.localCenter.y;c=i.col1.x*d+i.col2.x*x,x=i.col1.y*d+i.col2.y*x,d=c;var v=r.m_sweep.c.x+d-s.m_sweep.c.x-y,b=r.m_sweep.c.y+x-s.m_sweep.c.y-f,g=v*v+b*b,D=Math.sqrt(g);l=D;var C=s.m_invMass,w=r.m_invMass,S=s.m_invI,A=r.m_invI,M=10*t.b2_linearSlop;if(g>M*M){var V=C+w,T=1/V;m=T*-v,u=T*-b;var I=.5;s.m_sweep.c.x-=I*C*m,s.m_sweep.c.y-=I*C*u,r.m_sweep.c.x+=I*w*m,r.m_sweep.c.y+=I*w*u,v=r.m_sweep.c.x+d-s.m_sweep.c.x-y,b=r.m_sweep.c.y+x-s.m_sweep.c.y-f}return this.K1.col1.x=C+w,this.K1.col2.x=0,this.K1.col1.y=0,this.K1.col2.y=C+w,this.K2.col1.x=S*f*f,this.K2.col2.x=-S*y*f,this.K2.col1.y=-S*y*f,this.K2.col2.y=S*y*y,this.K3.col1.x=A*x*x,this.K3.col2.x=-A*d*x,this.K3.col1.y=-A*d*x,this.K3.col2.y=A*d*d,this.K.SetM(this.K1),this.K.AddM(this.K2),this.K.AddM(this.K3),this.K.Solve(B.tImpulse,-v,-b),m=B.tImpulse.x,u=B.tImpulse.y,s.m_sweep.c.x-=s.m_invMass*m,s.m_sweep.c.y-=s.m_invMass*u,s.m_sweep.a-=s.m_invI*(y*u-f*m),r.m_sweep.c.x+=r.m_invMass*m,r.m_sweep.c.y+=r.m_invMass*u,r.m_sweep.a+=r.m_invI*(d*u-x*m),s.SynchronizeTransform(),r.SynchronizeTransform(),t.b2_linearSlop>=l&&t.b2_angularSlop>=a},Box2D.postDefs.push(function(){Box2D.Dynamics.Joints.b2RevoluteJoint.tImpulse=new n}),Box2D.inherit(w,Box2D.Dynamics.Joints.b2JointDef),w.prototype.__super=Box2D.Dynamics.Joints.b2JointDef.prototype,w.b2RevoluteJointDef=function(){Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new n,this.localAnchorB=new n},w.prototype.b2RevoluteJointDef=function(){this.__super.b2JointDef.call(this),this.type=p.e_revoluteJoint,this.localAnchorA.Set(0,0),this.localAnchorB.Set(0,0),this.referenceAngle=0,this.lowerAngle=0,this.upperAngle=0,this.maxMotorTorque=0,this.motorSpeed=0,this.enableLimit=!1,this.enableMotor=!1},w.prototype.Initialize=function(t,e,i){this.bodyA=t,this.bodyB=e,this.localAnchorA=this.bodyA.GetLocalPoint(i),this.localAnchorB=this.bodyB.GetLocalPoint(i),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()},Box2D.inherit(S,Box2D.Dynamics.Joints.b2Joint),S.prototype.__super=Box2D.Dynamics.Joints.b2Joint.prototype,S.b2WeldJoint=function(){Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchorA=new n,this.m_localAnchorB=new n,this.m_impulse=new s,this.m_mass=new i
},S.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA)},S.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB)},S.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new n(t*this.m_impulse.x,t*this.m_impulse.y)},S.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),t*this.m_impulse.z},S.prototype.b2WeldJoint=function(t){this.__super.b2Joint.call(this,t),this.m_localAnchorA.SetV(t.localAnchorA),this.m_localAnchorB.SetV(t.localAnchorB),this.m_referenceAngle=t.referenceAngle,this.m_impulse.SetZero(),this.m_mass=new i},S.prototype.InitVelocityConstraints=function(t){var e,i=0,o=this.m_bodyA,n=this.m_bodyB;e=o.m_xf.R;var s=this.m_localAnchorA.x-o.m_sweep.localCenter.x,r=this.m_localAnchorA.y-o.m_sweep.localCenter.y;i=e.col1.x*s+e.col2.x*r,r=e.col1.y*s+e.col2.y*r,s=i,e=n.m_xf.R;var a=this.m_localAnchorB.x-n.m_sweep.localCenter.x,l=this.m_localAnchorB.y-n.m_sweep.localCenter.y;i=e.col1.x*a+e.col2.x*l,l=e.col1.y*a+e.col2.y*l,a=i;var c=o.m_invMass,m=n.m_invMass,u=o.m_invI,h=n.m_invI;this.m_mass.col1.x=c+m+r*r*u+l*l*h,this.m_mass.col2.x=-r*s*u-l*a*h,this.m_mass.col3.x=-r*u-l*h,this.m_mass.col1.y=this.m_mass.col2.x,this.m_mass.col2.y=c+m+s*s*u+a*a*h,this.m_mass.col3.y=s*u+a*h,this.m_mass.col1.z=this.m_mass.col3.x,this.m_mass.col2.z=this.m_mass.col3.y,this.m_mass.col3.z=u+h,t.warmStarting?(this.m_impulse.x*=t.dtRatio,this.m_impulse.y*=t.dtRatio,this.m_impulse.z*=t.dtRatio,o.m_linearVelocity.x-=c*this.m_impulse.x,o.m_linearVelocity.y-=c*this.m_impulse.y,o.m_angularVelocity-=u*(s*this.m_impulse.y-r*this.m_impulse.x+this.m_impulse.z),n.m_linearVelocity.x+=m*this.m_impulse.x,n.m_linearVelocity.y+=m*this.m_impulse.y,n.m_angularVelocity+=h*(a*this.m_impulse.y-l*this.m_impulse.x+this.m_impulse.z)):this.m_impulse.SetZero()},S.prototype.SolveVelocityConstraints=function(){var t,e=0,i=this.m_bodyA,o=this.m_bodyB,n=i.m_linearVelocity,r=i.m_angularVelocity,a=o.m_linearVelocity,l=o.m_angularVelocity,c=i.m_invMass,m=o.m_invMass,u=i.m_invI,h=o.m_invI;t=i.m_xf.R;var p=this.m_localAnchorA.x-i.m_sweep.localCenter.x,_=this.m_localAnchorA.y-i.m_sweep.localCenter.y;e=t.col1.x*p+t.col2.x*_,_=t.col1.y*p+t.col2.y*_,p=e,t=o.m_xf.R;var y=this.m_localAnchorB.x-o.m_sweep.localCenter.x,f=this.m_localAnchorB.y-o.m_sweep.localCenter.y;e=t.col1.x*y+t.col2.x*f,f=t.col1.y*y+t.col2.y*f,y=e;var d=a.x-l*f-n.x+r*_,x=a.y+l*y-n.y-r*p,v=l-r,b=new s;this.m_mass.Solve33(b,-d,-x,-v),this.m_impulse.Add(b),n.x-=c*b.x,n.y-=c*b.y,r-=u*(p*b.y-_*b.x+b.z),a.x+=m*b.x,a.y+=m*b.y,l+=h*(y*b.y-f*b.x+b.z),i.m_angularVelocity=r,o.m_angularVelocity=l},S.prototype.SolvePositionConstraints=function(e){void 0===e&&(e=0);var i,n=0,r=this.m_bodyA,a=this.m_bodyB;i=r.m_xf.R;var l=this.m_localAnchorA.x-r.m_sweep.localCenter.x,c=this.m_localAnchorA.y-r.m_sweep.localCenter.y;n=i.col1.x*l+i.col2.x*c,c=i.col1.y*l+i.col2.y*c,l=n,i=a.m_xf.R;var m=this.m_localAnchorB.x-a.m_sweep.localCenter.x,u=this.m_localAnchorB.y-a.m_sweep.localCenter.y;n=i.col1.x*m+i.col2.x*u,u=i.col1.y*m+i.col2.y*u,m=n;var h=r.m_invMass,p=a.m_invMass,_=r.m_invI,y=a.m_invI,f=a.m_sweep.c.x+m-r.m_sweep.c.x-l,d=a.m_sweep.c.y+u-r.m_sweep.c.y-c,x=a.m_sweep.a-r.m_sweep.a-this.m_referenceAngle,v=10*t.b2_linearSlop,b=Math.sqrt(f*f+d*d),g=o.Abs(x);b>v&&(_*=1,y*=1),this.m_mass.col1.x=h+p+c*c*_+u*u*y,this.m_mass.col2.x=-c*l*_-u*m*y,this.m_mass.col3.x=-c*_-u*y,this.m_mass.col1.y=this.m_mass.col2.x,this.m_mass.col2.y=h+p+l*l*_+m*m*y,this.m_mass.col3.y=l*_+m*y,this.m_mass.col1.z=this.m_mass.col3.x,this.m_mass.col2.z=this.m_mass.col3.y,this.m_mass.col3.z=_+y;var D=new s;return this.m_mass.Solve33(D,-f,-d,-x),r.m_sweep.c.x-=h*D.x,r.m_sweep.c.y-=h*D.y,r.m_sweep.a-=_*(l*D.y-c*D.x+D.z),a.m_sweep.c.x+=p*D.x,a.m_sweep.c.y+=p*D.y,a.m_sweep.a+=y*(m*D.y-u*D.x+D.z),r.SynchronizeTransform(),a.SynchronizeTransform(),t.b2_linearSlop>=b&&t.b2_angularSlop>=g},Box2D.inherit(A,Box2D.Dynamics.Joints.b2JointDef),A.prototype.__super=Box2D.Dynamics.Joints.b2JointDef.prototype,A.b2WeldJointDef=function(){Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new n,this.localAnchorB=new n},A.prototype.b2WeldJointDef=function(){this.__super.b2JointDef.call(this),this.type=p.e_weldJoint,this.referenceAngle=0},A.prototype.Initialize=function(t,e,i){this.bodyA=t,this.bodyB=e,this.localAnchorA.SetV(this.bodyA.GetLocalPoint(i)),this.localAnchorB.SetV(this.bodyB.GetLocalPoint(i)),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()}}(),function(){var t=Box2D.Dynamics.b2DebugDraw;t.b2DebugDraw=function(){this.m_drawScale=1,this.m_lineThickness=1,this.m_alpha=1,this.m_fillAlpha=1,this.m_xformScale=1;var t=this;this.m_sprite={graphics:{clear:function(){t.m_ctx.clearRect(0,0,t.m_ctx.canvas.width,t.m_ctx.canvas.height)}}}},t.prototype._color=function(t,e){return"rgba("+((16711680&t)>>16)+","+((65280&t)>>8)+","+(255&t)+","+e+")"},t.prototype.b2DebugDraw=function(){this.m_drawFlags=0},t.prototype.SetFlags=function(t){void 0===t&&(t=0),this.m_drawFlags=t},t.prototype.GetFlags=function(){return this.m_drawFlags},t.prototype.AppendFlags=function(t){void 0===t&&(t=0),this.m_drawFlags|=t},t.prototype.ClearFlags=function(t){void 0===t&&(t=0),this.m_drawFlags&=~t},t.prototype.SetSprite=function(t){this.m_ctx=t},t.prototype.GetSprite=function(){return this.m_ctx},t.prototype.SetDrawScale=function(t){void 0===t&&(t=0),this.m_drawScale=t},t.prototype.GetDrawScale=function(){return this.m_drawScale},t.prototype.SetLineThickness=function(t){void 0===t&&(t=0),this.m_lineThickness=t,this.m_ctx.strokeWidth=t},t.prototype.GetLineThickness=function(){return this.m_lineThickness},t.prototype.SetAlpha=function(t){void 0===t&&(t=0),this.m_alpha=t},t.prototype.GetAlpha=function(){return this.m_alpha},t.prototype.SetFillAlpha=function(t){void 0===t&&(t=0),this.m_fillAlpha=t},t.prototype.GetFillAlpha=function(){return this.m_fillAlpha},t.prototype.SetXFormScale=function(t){void 0===t&&(t=0),this.m_xformScale=t},t.prototype.GetXFormScale=function(){return this.m_xformScale},t.prototype.DrawPolygon=function(t,e,i){if(e){var o=this.m_ctx,n=this.m_drawScale;o.beginPath(),o.strokeStyle=this._color(i.color,this.m_alpha),o.moveTo(t[0].x*n,t[0].y*n);for(var s=1;e>s;s++)o.lineTo(t[s].x*n,t[s].y*n);o.lineTo(t[0].x*n,t[0].y*n),o.closePath(),o.stroke()}},t.prototype.DrawSolidPolygon=function(t,e,i){if(e){var o=this.m_ctx,n=this.m_drawScale;o.beginPath(),o.strokeStyle=this._color(i.color,this.m_alpha),o.fillStyle=this._color(i.color,this.m_fillAlpha),o.moveTo(t[0].x*n,t[0].y*n);for(var s=1;e>s;s++)o.lineTo(t[s].x*n,t[s].y*n);o.lineTo(t[0].x*n,t[0].y*n),o.closePath(),o.fill(),o.stroke()}},t.prototype.DrawCircle=function(t,e,i){if(e){var o=this.m_ctx,n=this.m_drawScale;o.beginPath(),o.strokeStyle=this._color(i.color,this.m_alpha),o.arc(t.x*n,t.y*n,e*n,0,2*Math.PI,!0),o.closePath(),o.stroke()}},t.prototype.DrawSolidCircle=function(t,e,i,o){if(e){var n=this.m_ctx,s=this.m_drawScale,r=t.x*s,a=t.y*s;n.moveTo(0,0),n.beginPath(),n.strokeStyle=this._color(o.color,this.m_alpha),n.fillStyle=this._color(o.color,this.m_fillAlpha),n.arc(r,a,e*s,0,2*Math.PI,!0),n.moveTo(r,a),n.lineTo((t.x+i.x*e)*s,(t.y+i.y*e)*s),n.closePath(),n.fill(),n.stroke()}},t.prototype.DrawSegment=function(t,e,i){var o=this.m_ctx,n=this.m_drawScale;o.strokeStyle=this._color(i.color,this.m_alpha),o.beginPath(),o.moveTo(t.x*n,t.y*n),o.lineTo(e.x*n,e.y*n),o.closePath(),o.stroke()},t.prototype.DrawTransform=function(t){var e=this.m_ctx,i=this.m_drawScale;e.beginPath(),e.strokeStyle=this._color(16711680,this.m_alpha),e.moveTo(t.position.x*i,t.position.y*i),e.lineTo((t.position.x+this.m_xformScale*t.R.col1.x)*i,(t.position.y+this.m_xformScale*t.R.col1.y)*i),e.strokeStyle=this._color(65280,this.m_alpha),e.moveTo(t.position.x*i,t.position.y*i),e.lineTo((t.position.x+this.m_xformScale*t.R.col2.x)*i,(t.position.y+this.m_xformScale*t.R.col2.y)*i),e.closePath(),e.stroke()}}();var i;for(i=0;Box2D.postDefs.length>i;++i)Box2D.postDefs[i]();delete Box2D.postDefs,function(t,e){function i(t){var e=_e[t]={};return Q.each(t.split(ee),function(t,i){e[i]=!0}),e}function o(t,i,o){if(o===e&&1===t.nodeType){var n="data-"+i.replace(fe,"-$1").toLowerCase();if(o=t.getAttribute(n),"string"==typeof o){try{o="true"===o?!0:"false"===o?!1:"null"===o?null:+o+""===o?+o:ye.test(o)?Q.parseJSON(o):o}catch(s){}Q.data(t,i,o)}else o=e}return o}function n(t){var e;for(e in t)if(("data"!==e||!Q.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function s(){return!1}function r(){return!0}function a(t){return!t||!t.parentNode||11===t.parentNode.nodeType}function l(t,e){do t=t[e];while(t&&1!==t.nodeType);return t}function c(t,e,i){if(e=e||0,Q.isFunction(e))return Q.grep(t,function(t,o){var n=!!e.call(t,o,t);return n===i});if(e.nodeType)return Q.grep(t,function(t){return t===e===i});if("string"==typeof e){var o=Q.grep(t,function(t){return 1===t.nodeType});if(ke.test(e))return Q.filter(e,o,!i);e=Q.filter(e,o)}return Q.grep(t,function(t){return Q.inArray(t,e)>=0===i})}function m(t){var e=Ne.split("|"),i=t.createDocumentFragment();if(i.createElement)for(;e.length;)i.createElement(e.pop());return i}function u(t,e){return t.getElementsByTagName(e)[0]||t.appendChild(t.ownerDocument.createElement(e))}function h(t,e){if(1===e.nodeType&&Q.hasData(t)){var i,o,n,s=Q._data(t),r=Q._data(e,s),a=s.events;if(a){delete r.handle,r.events={};for(i in a)for(o=0,n=a[i].length;n>o;o++)Q.event.add(e,i,a[i][o])}r.data&&(r.data=Q.extend({},r.data))}}function p(t,e){var i;1===e.nodeType&&(e.clearAttributes&&e.clearAttributes(),e.mergeAttributes&&e.mergeAttributes(t),i=e.nodeName.toLowerCase(),"object"===i?(e.parentNode&&(e.outerHTML=t.outerHTML),Q.support.html5Clone&&t.innerHTML&&!Q.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===i&&Ke.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===i?e.selected=t.defaultSelected:"input"===i||"textarea"===i?e.defaultValue=t.defaultValue:"script"===i&&e.text!==t.text&&(e.text=t.text),e.removeAttribute(Q.expando))}function _(t){return t.getElementsByTagName!==e?t.getElementsByTagName("*"):t.querySelectorAll!==e?t.querySelectorAll("*"):[]}function y(t){Ke.test(t.type)&&(t.defaultChecked=t.checked)}function f(t,e){if(e in t)return e;for(var i=e.charAt(0).toUpperCase()+e.slice(1),o=e,n=di.length;n--;)if(e=di[n]+i,e in t)return e;return o}function d(t,e){return t=e||t,"none"===Q.css(t,"display")||!Q.contains(t.ownerDocument,t)}function x(t,e){for(var i,o,n=[],s=0,r=t.length;r>s;s++)i=t[s],i.style&&(n[s]=Q._data(i,"olddisplay"),e?(n[s]||"none"!==i.style.display||(i.style.display=""),""===i.style.display&&d(i)&&(n[s]=Q._data(i,"olddisplay",D(i.nodeName)))):(o=ii(i,"display"),n[s]||"none"===o||Q._data(i,"olddisplay",o)));for(s=0;r>s;s++)i=t[s],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?n[s]||"":"none"));return t}function v(t,e,i){var o=mi.exec(e);return o?Math.max(0,o[1]-(i||0))+(o[2]||"px"):e}function b(t,e,i,o){for(var n=i===(o?"border":"content")?4:"width"===e?1:0,s=0;4>n;n+=2)"margin"===i&&(s+=Q.css(t,i+fi[n],!0)),o?("content"===i&&(s-=parseFloat(ii(t,"padding"+fi[n]))||0),"margin"!==i&&(s-=parseFloat(ii(t,"border"+fi[n]+"Width"))||0)):(s+=parseFloat(ii(t,"padding"+fi[n]))||0,"padding"!==i&&(s+=parseFloat(ii(t,"border"+fi[n]+"Width"))||0));return s}function g(t,e,i){var o="width"===e?t.offsetWidth:t.offsetHeight,n=!0,s=Q.support.boxSizing&&"border-box"===Q.css(t,"boxSizing");if(0>=o||null==o){if(o=ii(t,e),(0>o||null==o)&&(o=t.style[e]),ui.test(o))return o;n=s&&(Q.support.boxSizingReliable||o===t.style[e]),o=parseFloat(o)||0}return o+b(t,e,i||(s?"border":"content"),n)+"px"}function D(t){if(pi[t])return pi[t];var e=Q("<"+t+">").appendTo(O.body),i=e.css("display");return e.remove(),("none"===i||""===i)&&(oi=O.body.appendChild(oi||Q.extend(O.createElement("iframe"),{frameBorder:0,width:0,height:0})),ni&&oi.createElement||(ni=(oi.contentWindow||oi.contentDocument).document,ni.write("<!doctype html><html><body>"),ni.close()),e=ni.body.appendChild(ni.createElement(t)),i=ii(e,"display"),O.body.removeChild(oi)),pi[t]=i,i}function C(t,e,i,o){var n;if(Q.isArray(e))Q.each(e,function(e,n){i||bi.test(t)?o(t,n):C(t+"["+("object"==typeof n?e:"")+"]",n,i,o)});else if(i||"object"!==Q.type(e))o(t,e);else for(n in e)C(t+"["+n+"]",e[n],i,o)}function B(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var o,n,s,r=e.toLowerCase().split(ee),a=0,l=r.length;if(Q.isFunction(i))for(;l>a;a++)o=r[a],s=/^\+/.test(o),s&&(o=o.substr(1)||"*"),n=t[o]=t[o]||[],n[s?"unshift":"push"](i)}}function w(t,i,o,n,s,r){s=s||i.dataTypes[0],r=r||{},r[s]=!0;for(var a,l=t[s],c=0,m=l?l.length:0,u=t===ki;m>c&&(u||!a);c++)a=l[c](i,o,n),"string"==typeof a&&(!u||r[a]?a=e:(i.dataTypes.unshift(a),a=w(t,i,o,n,a,r)));return!u&&a||r["*"]||(a=w(t,i,o,n,"*",r)),a}function S(t,i){var o,n,s=Q.ajaxSettings.flatOptions||{};for(o in i)i[o]!==e&&((s[o]?t:n||(n={}))[o]=i[o]);n&&Q.extend(!0,t,n)}function A(t,i,o){var n,s,r,a,l=t.contents,c=t.dataTypes,m=t.responseFields;for(s in m)s in o&&(i[m[s]]=o[s]);for(;"*"===c[0];)c.shift(),n===e&&(n=t.mimeType||i.getResponseHeader("content-type"));if(n)for(s in l)if(l[s]&&l[s].test(n)){c.unshift(s);break}if(c[0]in o)r=c[0];else{for(s in o){if(!c[0]||t.converters[s+" "+c[0]]){r=s;break}a||(a=s)}r=r||a}return r?(r!==c[0]&&c.unshift(r),o[r]):e}function M(t,e){var i,o,n,s,r=t.dataTypes.slice(),a=r[0],l={},c=0;if(t.dataFilter&&(e=t.dataFilter(e,t.dataType)),r[1])for(i in t.converters)l[i.toLowerCase()]=t.converters[i];for(;n=r[++c];)if("*"!==n){if("*"!==a&&a!==n){if(i=l[a+" "+n]||l["* "+n],!i)for(o in l)if(s=o.split(" "),s[1]===n&&(i=l[a+" "+s[0]]||l["* "+s[0]])){i===!0?i=l[o]:l[o]!==!0&&(n=s[0],r.splice(c--,0,n));break}if(i!==!0)if(i&&t["throws"])e=i(e);else try{e=i(e)}catch(m){return{state:"parsererror",error:i?m:"No conversion from "+a+" to "+n}}}a=n}return{state:"success",data:e}}function V(){try{return new t.XMLHttpRequest}catch(e){}}function T(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function I(){return setTimeout(function(){Wi=e},0),Wi=Q.now()}function L(t,e){Q.each(e,function(e,i){for(var o=(Yi[e]||[]).concat(Yi["*"]),n=0,s=o.length;s>n;n++)if(o[n].call(t,e,i))return})}function P(t,e,i){var o,n=0,s=Qi.length,r=Q.Deferred().always(function(){delete a.elem}),a=function(){for(var e=Wi||I(),i=Math.max(0,l.startTime+l.duration-e),o=1-(i/l.duration||0),n=0,s=l.tweens.length;s>n;n++)l.tweens[n].run(o);return r.notifyWith(t,[l,o,i]),1>o&&s?i:(r.resolveWith(t,[l]),!1)},l=r.promise({elem:t,props:Q.extend({},e),opts:Q.extend(!0,{specialEasing:{}},i),originalProperties:e,originalOptions:i,startTime:Wi||I(),duration:i.duration,tweens:[],createTween:function(e,i){var o=Q.Tween(t,l.opts,e,i,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(o),o},stop:function(e){for(var i=0,o=e?l.tweens.length:0;o>i;i++)l.tweens[i].run(1);return e?r.resolveWith(t,[l,e]):r.rejectWith(t,[l,e]),this}}),c=l.props;for(F(c,l.opts.specialEasing);s>n;n++)if(o=Qi[n].call(l,t,c,l.opts))return o;return L(l,c),Q.isFunction(l.opts.start)&&l.opts.start.call(t,l),Q.fx.timer(Q.extend(a,{anim:l,queue:l.opts.queue,elem:t})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function F(t,e){var i,o,n,s,r;for(i in t)if(o=Q.camelCase(i),n=e[o],s=t[i],Q.isArray(s)&&(n=s[1],s=t[i]=s[0]),i!==o&&(t[o]=s,delete t[i]),r=Q.cssHooks[o],r&&"expand"in r){s=r.expand(s),delete t[o];for(i in s)i in t||(t[i]=s[i],e[i]=n)}else e[o]=n}function G(t,e,i){var o,n,s,r,a,l,c,m,u=this,h=t.style,p={},_=[],y=t.nodeType&&d(t);i.queue||(c=Q._queueHooks(t,"fx"),null==c.unqueued&&(c.unqueued=0,m=c.empty.fire,c.empty.fire=function(){c.unqueued||m()}),c.unqueued++,u.always(function(){u.always(function(){c.unqueued--,Q.queue(t,"fx").length||c.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[h.overflow,h.overflowX,h.overflowY],"inline"===Q.css(t,"display")&&"none"===Q.css(t,"float")&&(Q.support.inlineBlockNeedsLayout&&"inline"!==D(t.nodeName)?h.zoom=1:h.display="inline-block")),i.overflow&&(h.overflow="hidden",Q.support.shrinkWrapBlocks||u.done(function(){h.overflow=i.overflow[0],h.overflowX=i.overflow[1],h.overflowY=i.overflow[2]}));for(o in e)if(s=e[o],Ki.exec(s)){if(delete e[o],s===(y?"hide":"show"))continue;_.push(o)}if(r=_.length)for(a=Q._data(t,"fxshow")||Q._data(t,"fxshow",{}),y?Q(t).show():u.done(function(){Q(t).hide()}),u.done(function(){var e;Q.removeData(t,"fxshow",!0);for(e in p)Q.style(t,e,p[e])}),o=0;r>o;o++)n=_[o],l=u.createTween(n,y?a[n]:0),p[n]=a[n]||Q.style(t,n),n in a||(a[n]=l.start,y&&(l.end=l.start,l.start="width"===n||"height"===n?1:0))}function k(t,e,i,o,n){return new k.prototype.init(t,e,i,o,n)}function J(t,e){var i,o={height:t},n=0;for(e=e?1:0;4>n;n+=2-e)i=fi[n],o["margin"+i]=o["padding"+i]=t;return e&&(o.opacity=o.width=t),o}function R(t){return Q.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1}var N,E,O=t.document,j=t.location,z=t.navigator,q=t.jQuery,H=t.$,$=Array.prototype.push,W=Array.prototype.slice,U=Array.prototype.indexOf,K=Object.prototype.toString,X=Object.prototype.hasOwnProperty,Z=String.prototype.trim,Q=function(t,e){return new Q.fn.init(t,e,N)},Y=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,te=/\S/,ee=/\s+/,ie=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,oe=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,ne=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,se=/^[\],:{}\s]*$/,re=/(?:^|:|,)(?:\s*\[)+/g,ae=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,le=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,ce=/^-ms-/,me=/-([\da-z])/gi,ue=function(t,e){return(e+"").toUpperCase()},he=function(){O.addEventListener?(O.removeEventListener("DOMContentLoaded",he,!1),Q.ready()):"complete"===O.readyState&&(O.detachEvent("onreadystatechange",he),Q.ready())},pe={};Q.fn=Q.prototype={constructor:Q,init:function(t,i,o){var n,s,r;if(!t)return this;if(t.nodeType)return this.context=this[0]=t,this.length=1,this;if("string"==typeof t){if(n="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:oe.exec(t),!n||!n[1]&&i)return!i||i.jquery?(i||o).find(t):this.constructor(i).find(t);if(n[1])return i=i instanceof Q?i[0]:i,r=i&&i.nodeType?i.ownerDocument||i:O,t=Q.parseHTML(n[1],r,!0),ne.test(n[1])&&Q.isPlainObject(i)&&this.attr.call(t,i,!0),Q.merge(this,t);if(s=O.getElementById(n[2]),s&&s.parentNode){if(s.id!==n[2])return o.find(t);this.length=1,this[0]=s}return this.context=O,this.selector=t,this}return Q.isFunction(t)?o.ready(t):(t.selector!==e&&(this.selector=t.selector,this.context=t.context),Q.makeArray(t,this))},selector:"",jquery:"1.8.2",length:0,size:function(){return this.length},toArray:function(){return W.call(this)},get:function(t){return null==t?this.toArray():0>t?this[this.length+t]:this[t]},pushStack:function(t,e,i){var o=Q.merge(this.constructor(),t);return o.prevObject=this,o.context=this.context,"find"===e?o.selector=this.selector+(this.selector?" ":"")+i:e&&(o.selector=this.selector+"."+e+"("+i+")"),o},each:function(t,e){return Q.each(this,t,e)},ready:function(t){return Q.ready.promise().done(t),this},eq:function(t){return t=+t,-1===t?this.slice(t):this.slice(t,t+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(W.apply(this,arguments),"slice",W.call(arguments).join(","))},map:function(t){return this.pushStack(Q.map(this,function(e,i){return t.call(e,i,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:$,sort:[].sort,splice:[].splice},Q.fn.init.prototype=Q.fn,Q.extend=Q.fn.extend=function(){var t,i,o,n,s,r,a=arguments[0]||{},l=1,c=arguments.length,m=!1;for("boolean"==typeof a&&(m=a,a=arguments[1]||{},l=2),"object"==typeof a||Q.isFunction(a)||(a={}),c===l&&(a=this,--l);c>l;l++)if(null!=(t=arguments[l]))for(i in t)o=a[i],n=t[i],a!==n&&(m&&n&&(Q.isPlainObject(n)||(s=Q.isArray(n)))?(s?(s=!1,r=o&&Q.isArray(o)?o:[]):r=o&&Q.isPlainObject(o)?o:{},a[i]=Q.extend(m,r,n)):n!==e&&(a[i]=n));return a},Q.extend({noConflict:function(e){return t.$===Q&&(t.$=H),e&&t.jQuery===Q&&(t.jQuery=q),Q},isReady:!1,readyWait:1,holdReady:function(t){t?Q.readyWait++:Q.ready(!0)},ready:function(t){if(t===!0?!--Q.readyWait:!Q.isReady){if(!O.body)return setTimeout(Q.ready,1);Q.isReady=!0,t!==!0&&--Q.readyWait>0||(E.resolveWith(O,[Q]),Q.fn.trigger&&Q(O).trigger("ready").off("ready"))}},isFunction:function(t){return"function"===Q.type(t)},isArray:Array.isArray||function(t){return"array"===Q.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},type:function(t){return null==t?t+"":pe[K.call(t)]||"object"},isPlainObject:function(t){if(!t||"object"!==Q.type(t)||t.nodeType||Q.isWindow(t))return!1;try{if(t.constructor&&!X.call(t,"constructor")&&!X.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}var o;for(o in t);return o===e||X.call(t,o)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},error:function(t){throw Error(t)},parseHTML:function(t,e,i){var o;return t&&"string"==typeof t?("boolean"==typeof e&&(i=e,e=0),e=e||O,(o=ne.exec(t))?[e.createElement(o[1])]:(o=Q.buildFragment([t],e,i?null:[]),Q.merge([],(o.cacheable?Q.clone(o.fragment):o.fragment).childNodes))):null},parseJSON:function(i){return i&&"string"==typeof i?(i=Q.trim(i),t.JSON&&t.JSON.parse?t.JSON.parse(i):se.test(i.replace(ae,"@").replace(le,"]").replace(re,""))?Function("return "+i)():(Q.error("Invalid JSON: "+i),e)):null},parseXML:function(i){var o,n;if(!i||"string"!=typeof i)return null;try{t.DOMParser?(n=new DOMParser,o=n.parseFromString(i,"text/xml")):(o=new ActiveXObject("Microsoft.XMLDOM"),o.async="false",o.loadXML(i))}catch(s){o=e}return o&&o.documentElement&&!o.getElementsByTagName("parsererror").length||Q.error("Invalid XML: "+i),o},noop:function(){},globalEval:function(e){e&&te.test(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(ce,"ms-").replace(me,ue)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,i,o){var n,s=0,r=t.length,a=r===e||Q.isFunction(t);if(o)if(a){for(n in t)if(i.apply(t[n],o)===!1)break}else for(;r>s&&i.apply(t[s++],o)!==!1;);else if(a){for(n in t)if(i.call(t[n],n,t[n])===!1)break}else for(;r>s&&i.call(t[s],s,t[s++])!==!1;);return t},trim:Z&&!Z.call("")?function(t){return null==t?"":Z.call(t)}:function(t){return null==t?"":(t+"").replace(ie,"")},makeArray:function(t,e){var i,o=e||[];return null!=t&&(i=Q.type(t),null==t.length||"string"===i||"function"===i||"regexp"===i||Q.isWindow(t)?$.call(o,t):Q.merge(o,t)),o},inArray:function(t,e,i){var o;if(e){if(U)return U.call(e,t,i);for(o=e.length,i=i?0>i?Math.max(0,o+i):i:0;o>i;i++)if(i in e&&e[i]===t)return i}return-1},merge:function(t,i){var o=i.length,n=t.length,s=0;if("number"==typeof o)for(;o>s;s++)t[n++]=i[s];else for(;i[s]!==e;)t[n++]=i[s++];return t.length=n,t},grep:function(t,e,i){var o,n=[],s=0,r=t.length;for(i=!!i;r>s;s++)o=!!e(t[s],s),i!==o&&n.push(t[s]);return n},map:function(t,i,o){var n,s,r=[],a=0,l=t.length,c=t instanceof Q||l!==e&&"number"==typeof l&&(l>0&&t[0]&&t[l-1]||0===l||Q.isArray(t));if(c)for(;l>a;a++)n=i(t[a],a,o),null!=n&&(r[r.length]=n);else for(s in t)n=i(t[s],s,o),null!=n&&(r[r.length]=n);return r.concat.apply([],r)},guid:1,proxy:function(t,i){var o,n,s;return"string"==typeof i&&(o=t[i],i=t,t=o),Q.isFunction(t)?(n=W.call(arguments,2),s=function(){return t.apply(i,n.concat(W.call(arguments)))},s.guid=t.guid=t.guid||Q.guid++,s):e},access:function(t,i,o,n,s,r,a){var l,c=null==o,m=0,u=t.length;if(o&&"object"==typeof o){for(m in o)Q.access(t,i,m,o[m],1,r,n);s=1}else if(n!==e){if(l=a===e&&Q.isFunction(n),c&&(l?(l=i,i=function(t,e,i){return l.call(Q(t),i)}):(i.call(t,n),i=null)),i)for(;u>m;m++)i(t[m],o,l?n.call(t[m],m,i(t[m],o)):n,a);s=1}return s?t:c?i.call(t):u?i(t[0],o):r},now:function(){return(new Date).getTime()}}),Q.ready.promise=function(e){if(!E)if(E=Q.Deferred(),"complete"===O.readyState)setTimeout(Q.ready,1);else if(O.addEventListener)O.addEventListener("DOMContentLoaded",he,!1),t.addEventListener("load",Q.ready,!1);else{O.attachEvent("onreadystatechange",he),t.attachEvent("onload",Q.ready);var i=!1;try{i=null==t.frameElement&&O.documentElement}catch(o){}i&&i.doScroll&&function n(){if(!Q.isReady){try{i.doScroll("left")}catch(t){return setTimeout(n,50)}Q.ready()}}()}return E.promise(e)},Q.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(t,e){pe["[object "+e+"]"]=e.toLowerCase()}),N=Q(O);var _e={};Q.Callbacks=function(t){t="string"==typeof t?_e[t]||i(t):Q.extend({},t);var o,n,s,r,a,l,c=[],m=!t.once&&[],u=function(e){for(o=t.memory&&e,n=!0,l=r||0,r=0,a=c.length,s=!0;c&&a>l;l++)if(c[l].apply(e[0],e[1])===!1&&t.stopOnFalse){o=!1;break}s=!1,c&&(m?m.length&&u(m.shift()):o?c=[]:h.disable())},h={add:function(){if(c){var e=c.length;(function i(e){Q.each(e,function(e,o){var n=Q.type(o);"function"!==n||t.unique&&h.has(o)?o&&o.length&&"string"!==n&&i(o):c.push(o)})})(arguments),s?a=c.length:o&&(r=e,u(o))}return this},remove:function(){return c&&Q.each(arguments,function(t,e){for(var i;(i=Q.inArray(e,c,i))>-1;)c.splice(i,1),s&&(a>=i&&a--,l>=i&&l--)}),this},has:function(t){return Q.inArray(t,c)>-1},empty:function(){return c=[],this},disable:function(){return c=m=o=e,this},disabled:function(){return!c},lock:function(){return m=e,o||h.disable(),this},locked:function(){return!m},fireWith:function(t,e){return e=e||[],e=[t,e.slice?e.slice():e],!c||n&&!m||(s?m.push(e):u(e)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!n}};return h},Q.extend({Deferred:function(t){var e=[["resolve","done",Q.Callbacks("once memory"),"resolved"],["reject","fail",Q.Callbacks("once memory"),"rejected"],["notify","progress",Q.Callbacks("memory")]],i="pending",o={state:function(){return i},always:function(){return n.done(arguments).fail(arguments),this},then:function(){var t=arguments;return Q.Deferred(function(i){Q.each(e,function(e,o){var s=o[0],r=t[e];n[o[1]](Q.isFunction(r)?function(){var t=r.apply(this,arguments);t&&Q.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[s+"With"](this===n?i:this,[t])}:i[s])}),t=null}).promise()},promise:function(t){return null!=t?Q.extend(t,o):o}},n={};return o.pipe=o.then,Q.each(e,function(t,s){var r=s[2],a=s[3];o[s[1]]=r.add,a&&r.add(function(){i=a},e[1^t][2].disable,e[2][2].lock),n[s[0]]=r.fire,n[s[0]+"With"]=r.fireWith}),o.promise(n),t&&t.call(n,n),n},when:function(t){var e,i,o,n=0,s=W.call(arguments),r=s.length,a=1!==r||t&&Q.isFunction(t.promise)?r:0,l=1===a?t:Q.Deferred(),c=function(t,i,o){return function(n){i[t]=this,o[t]=arguments.length>1?W.call(arguments):n,o===e?l.notifyWith(i,o):--a||l.resolveWith(i,o)}};if(r>1)for(e=Array(r),i=Array(r),o=Array(r);r>n;n++)s[n]&&Q.isFunction(s[n].promise)?s[n].promise().done(c(n,o,s)).fail(l.reject).progress(c(n,i,e)):--a;return a||l.resolveWith(o,s),l.promise()}}),Q.support=function(){var i,o,n,s,r,a,l,c,m,u,h,p=O.createElement("div");if(p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",o=p.getElementsByTagName("*"),n=p.getElementsByTagName("a")[0],n.style.cssText="top:1px;float:left;opacity:.5",!o||!o.length)return{};s=O.createElement("select"),r=s.appendChild(O.createElement("option")),a=p.getElementsByTagName("input")[0],i={leadingWhitespace:3===p.firstChild.nodeType,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(n.getAttribute("style")),hrefNormalized:"/a"===n.getAttribute("href"),opacity:/^0.5/.test(n.style.opacity),cssFloat:!!n.style.cssFloat,checkOn:"on"===a.value,optSelected:r.selected,getSetAttribute:"t"!==p.className,enctype:!!O.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==O.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===O.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},a.checked=!0,i.noCloneChecked=a.cloneNode(!0).checked,s.disabled=!0,i.optDisabled=!r.disabled;try{delete p.test}catch(_){i.deleteExpando=!1}if(!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",h=function(){i.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick"),p.detachEvent("onclick",h)),a=O.createElement("input"),a.value="t",a.setAttribute("type","radio"),i.radioValue="t"===a.value,a.setAttribute("checked","checked"),a.setAttribute("name","t"),p.appendChild(a),l=O.createDocumentFragment(),l.appendChild(p.lastChild),i.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,i.appendChecked=a.checked,l.removeChild(a),l.appendChild(p),p.attachEvent)for(m in{submit:!0,change:!0,focusin:!0})c="on"+m,u=c in p,u||(p.setAttribute(c,"return;"),u="function"==typeof p[c]),i[m+"Bubbles"]=u;return Q(function(){var o,n,s,r,a="padding:0;margin:0;border:0;display:block;overflow:hidden;",l=O.getElementsByTagName("body")[0];l&&(o=O.createElement("div"),o.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",l.insertBefore(o,l.firstChild),n=O.createElement("div"),o.appendChild(n),n.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=n.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",u=0===s[0].offsetHeight,s[0].style.display="",s[1].style.display="none",i.reliableHiddenOffsets=u&&0===s[0].offsetHeight,n.innerHTML="",n.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",i.boxSizing=4===n.offsetWidth,i.doesNotIncludeMarginInBodyOffset=1!==l.offsetTop,t.getComputedStyle&&(i.pixelPosition="1%"!==(t.getComputedStyle(n,null)||{}).top,i.boxSizingReliable="4px"===(t.getComputedStyle(n,null)||{width:"4px"}).width,r=O.createElement("div"),r.style.cssText=n.style.cssText=a,r.style.marginRight=r.style.width="0",n.style.width="1px",n.appendChild(r),i.reliableMarginRight=!parseFloat((t.getComputedStyle(r,null)||{}).marginRight)),n.style.zoom!==e&&(n.innerHTML="",n.style.cssText=a+"width:1px;padding:1px;display:inline;zoom:1",i.inlineBlockNeedsLayout=3===n.offsetWidth,n.style.display="block",n.style.overflow="visible",n.innerHTML="<div></div>",n.firstChild.style.width="5px",i.shrinkWrapBlocks=3!==n.offsetWidth,o.style.zoom=1),l.removeChild(o),o=n=s=r=null)}),l.removeChild(p),o=n=s=r=a=l=p=null,i}();var ye=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,fe=/([A-Z])/g;Q.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(Q.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(t){return t=t.nodeType?Q.cache[t[Q.expando]]:t[Q.expando],!!t&&!n(t)},data:function(t,i,o,n){if(Q.acceptData(t)){var s,r,a=Q.expando,l="string"==typeof i,c=t.nodeType,m=c?Q.cache:t,u=c?t[a]:t[a]&&a;if(u&&m[u]&&(n||m[u].data)||!l||o!==e)return u||(c?t[a]=u=Q.deletedIds.pop()||Q.guid++:u=a),m[u]||(m[u]={},c||(m[u].toJSON=Q.noop)),("object"==typeof i||"function"==typeof i)&&(n?m[u]=Q.extend(m[u],i):m[u].data=Q.extend(m[u].data,i)),s=m[u],n||(s.data||(s.data={}),s=s.data),o!==e&&(s[Q.camelCase(i)]=o),l?(r=s[i],null==r&&(r=s[Q.camelCase(i)])):r=s,r}},removeData:function(t,e,i){if(Q.acceptData(t)){var o,s,r,a=t.nodeType,l=a?Q.cache:t,c=a?t[Q.expando]:Q.expando;if(l[c]){if(e&&(o=i?l[c]:l[c].data)){Q.isArray(e)||(e in o?e=[e]:(e=Q.camelCase(e),e=e in o?[e]:e.split(" ")));for(s=0,r=e.length;r>s;s++)delete o[e[s]];if(!(i?n:Q.isEmptyObject)(o))return}(i||(delete l[c].data,n(l[c])))&&(a?Q.cleanData([t],!0):Q.support.deleteExpando||l!=l.window?delete l[c]:l[c]=null)}}},_data:function(t,e,i){return Q.data(t,e,i,!0)},acceptData:function(t){var e=t.nodeName&&Q.noData[t.nodeName.toLowerCase()];return!e||e!==!0&&t.getAttribute("classid")===e}}),Q.fn.extend({data:function(t,i){var n,s,r,a,l,c=this[0],m=0,u=null;
if(t===e){if(this.length&&(u=Q.data(c),1===c.nodeType&&!Q._data(c,"parsedAttrs"))){for(r=c.attributes,l=r.length;l>m;m++)a=r[m].name,a.indexOf("data-")||(a=Q.camelCase(a.substring(5)),o(c,a,u[a]));Q._data(c,"parsedAttrs",!0)}return u}return"object"==typeof t?this.each(function(){Q.data(this,t)}):(n=t.split(".",2),n[1]=n[1]?"."+n[1]:"",s=n[1]+"!",Q.access(this,function(i){return i===e?(u=this.triggerHandler("getData"+s,[n[0]]),u===e&&c&&(u=Q.data(c,t),u=o(c,t,u)),u===e&&n[1]?this.data(n[0]):u):(n[1]=i,this.each(function(){var e=Q(this);e.triggerHandler("setData"+s,n),Q.data(this,t,i),e.triggerHandler("changeData"+s,n)}),e)},null,i,arguments.length>1,null,!1))},removeData:function(t){return this.each(function(){Q.removeData(this,t)})}}),Q.extend({queue:function(t,i,o){var n;return t?(i=(i||"fx")+"queue",n=Q._data(t,i),o&&(!n||Q.isArray(o)?n=Q._data(t,i,Q.makeArray(o)):n.push(o)),n||[]):e},dequeue:function(t,e){e=e||"fx";var i=Q.queue(t,e),o=i.length,n=i.shift(),s=Q._queueHooks(t,e),r=function(){Q.dequeue(t,e)};"inprogress"===n&&(n=i.shift(),o--),n&&("fx"===e&&i.unshift("inprogress"),delete s.stop,n.call(t,r,s)),!o&&s&&s.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return Q._data(t,i)||Q._data(t,i,{empty:Q.Callbacks("once memory").add(function(){Q.removeData(t,e+"queue",!0),Q.removeData(t,i,!0)})})}}),Q.fn.extend({queue:function(t,i){var o=2;return"string"!=typeof t&&(i=t,t="fx",o--),o>arguments.length?Q.queue(this[0],t):i===e?this:this.each(function(){var e=Q.queue(this,t,i);Q._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&Q.dequeue(this,t)})},dequeue:function(t){return this.each(function(){Q.dequeue(this,t)})},delay:function(t,e){return t=Q.fx?Q.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,i){var o=setTimeout(e,t);i.stop=function(){clearTimeout(o)}})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,i){var o,n=1,s=Q.Deferred(),r=this,a=this.length,l=function(){--n||s.resolveWith(r,[r])};for("string"!=typeof t&&(i=t,t=e),t=t||"fx";a--;)o=Q._data(r[a],t+"queueHooks"),o&&o.empty&&(n++,o.empty.add(l));return l(),s.promise(i)}});var de,xe,ve,be=/[\t\r\n]/g,ge=/\r/g,De=/^(?:button|input)$/i,Ce=/^(?:button|input|object|select|textarea)$/i,Be=/^a(?:rea|)$/i,we=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Se=Q.support.getSetAttribute;Q.fn.extend({attr:function(t,e){return Q.access(this,Q.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){Q.removeAttr(this,t)})},prop:function(t,e){return Q.access(this,Q.prop,t,e,arguments.length>1)},removeProp:function(t){return t=Q.propFix[t]||t,this.each(function(){try{this[t]=e,delete this[t]}catch(i){}})},addClass:function(t){var e,i,o,n,s,r,a;if(Q.isFunction(t))return this.each(function(e){Q(this).addClass(t.call(this,e,this.className))});if(t&&"string"==typeof t)for(e=t.split(ee),i=0,o=this.length;o>i;i++)if(n=this[i],1===n.nodeType)if(n.className||1!==e.length){for(s=" "+n.className+" ",r=0,a=e.length;a>r;r++)0>s.indexOf(" "+e[r]+" ")&&(s+=e[r]+" ");n.className=Q.trim(s)}else n.className=t;return this},removeClass:function(t){var i,o,n,s,r,a,l;if(Q.isFunction(t))return this.each(function(e){Q(this).removeClass(t.call(this,e,this.className))});if(t&&"string"==typeof t||t===e)for(i=(t||"").split(ee),a=0,l=this.length;l>a;a++)if(n=this[a],1===n.nodeType&&n.className){for(o=(" "+n.className+" ").replace(be," "),s=0,r=i.length;r>s;s++)for(;o.indexOf(" "+i[s]+" ")>=0;)o=o.replace(" "+i[s]+" "," ");n.className=t?Q.trim(o):""}return this},toggleClass:function(t,e){var i=typeof t,o="boolean"==typeof e;return Q.isFunction(t)?this.each(function(i){Q(this).toggleClass(t.call(this,i,this.className,e),e)}):this.each(function(){if("string"===i)for(var n,s=0,r=Q(this),a=e,l=t.split(ee);n=l[s++];)a=o?a:!r.hasClass(n),r[a?"addClass":"removeClass"](n);else("undefined"===i||"boolean"===i)&&(this.className&&Q._data(this,"__className__",this.className),this.className=this.className||t===!1?"":Q._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,o=this.length;o>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(be," ").indexOf(e)>=0)return!0;return!1},val:function(t){var i,o,n,s=this[0];{if(arguments.length)return n=Q.isFunction(t),this.each(function(o){var s,r=Q(this);1===this.nodeType&&(s=n?t.call(this,o,r.val()):t,null==s?s="":"number"==typeof s?s+="":Q.isArray(s)&&(s=Q.map(s,function(t){return null==t?"":t+""})),i=Q.valHooks[this.type]||Q.valHooks[this.nodeName.toLowerCase()],i&&"set"in i&&i.set(this,s,"value")!==e||(this.value=s))});if(s)return i=Q.valHooks[s.type]||Q.valHooks[s.nodeName.toLowerCase()],i&&"get"in i&&(o=i.get(s,"value"))!==e?o:(o=s.value,"string"==typeof o?o.replace(ge,""):null==o?"":o)}}}),Q.extend({valHooks:{option:{get:function(t){var e=t.attributes.value;return!e||e.specified?t.value:t.text}},select:{get:function(t){var e,i,o,n,s=t.selectedIndex,r=[],a=t.options,l="select-one"===t.type;if(0>s)return null;for(i=l?s:0,o=l?s+1:a.length;o>i;i++)if(n=a[i],!(!n.selected||(Q.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&Q.nodeName(n.parentNode,"optgroup"))){if(e=Q(n).val(),l)return e;r.push(e)}return l&&!r.length&&a.length?Q(a[s]).val():r},set:function(t,e){var i=Q.makeArray(e);return Q(t).find("option").each(function(){this.selected=Q.inArray(Q(this).val(),i)>=0}),i.length||(t.selectedIndex=-1),i}}},attrFn:{},attr:function(t,i,o,n){var s,r,a,l=t.nodeType;if(t&&3!==l&&8!==l&&2!==l)return n&&Q.isFunction(Q.fn[i])?Q(t)[i](o):t.getAttribute===e?Q.prop(t,i,o):(a=1!==l||!Q.isXMLDoc(t),a&&(i=i.toLowerCase(),r=Q.attrHooks[i]||(we.test(i)?xe:de)),o!==e?null===o?(Q.removeAttr(t,i),e):r&&"set"in r&&a&&(s=r.set(t,o,i))!==e?s:(t.setAttribute(i,o+""),o):r&&"get"in r&&a&&null!==(s=r.get(t,i))?s:(s=t.getAttribute(i),null===s?e:s))},removeAttr:function(t,e){var i,o,n,s,r=0;if(e&&1===t.nodeType)for(o=e.split(ee);o.length>r;r++)n=o[r],n&&(i=Q.propFix[n]||n,s=we.test(n),s||Q.attr(t,n,""),t.removeAttribute(Se?n:i),s&&i in t&&(t[i]=!1))},attrHooks:{type:{set:function(t,e){if(De.test(t.nodeName)&&t.parentNode)Q.error("type property can't be changed");else if(!Q.support.radioValue&&"radio"===e&&Q.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}},value:{get:function(t,e){return de&&Q.nodeName(t,"button")?de.get(t,e):e in t?t.value:null},set:function(t,i,o){return de&&Q.nodeName(t,"button")?de.set(t,i,o):(t.value=i,e)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(t,i,o){var n,s,r,a=t.nodeType;if(t&&3!==a&&8!==a&&2!==a)return r=1!==a||!Q.isXMLDoc(t),r&&(i=Q.propFix[i]||i,s=Q.propHooks[i]),o!==e?s&&"set"in s&&(n=s.set(t,o,i))!==e?n:t[i]=o:s&&"get"in s&&null!==(n=s.get(t,i))?n:t[i]},propHooks:{tabIndex:{get:function(t){var i=t.getAttributeNode("tabindex");return i&&i.specified?parseInt(i.value,10):Ce.test(t.nodeName)||Be.test(t.nodeName)&&t.href?0:e}}}}),xe={get:function(t,i){var o,n=Q.prop(t,i);return n===!0||"boolean"!=typeof n&&(o=t.getAttributeNode(i))&&o.nodeValue!==!1?i.toLowerCase():e},set:function(t,e,i){var o;return e===!1?Q.removeAttr(t,i):(o=Q.propFix[i]||i,o in t&&(t[o]=!0),t.setAttribute(i,i.toLowerCase())),i}},Se||(ve={name:!0,id:!0,coords:!0},de=Q.valHooks.button={get:function(t,i){var o;return o=t.getAttributeNode(i),o&&(ve[i]?""!==o.value:o.specified)?o.value:e},set:function(t,e,i){var o=t.getAttributeNode(i);return o||(o=O.createAttribute(i),t.setAttributeNode(o)),o.value=e+""}},Q.each(["width","height"],function(t,i){Q.attrHooks[i]=Q.extend(Q.attrHooks[i],{set:function(t,o){return""===o?(t.setAttribute(i,"auto"),o):e}})}),Q.attrHooks.contenteditable={get:de.get,set:function(t,e,i){""===e&&(e="false"),de.set(t,e,i)}}),Q.support.hrefNormalized||Q.each(["href","src","width","height"],function(t,i){Q.attrHooks[i]=Q.extend(Q.attrHooks[i],{get:function(t){var o=t.getAttribute(i,2);return null===o?e:o}})}),Q.support.style||(Q.attrHooks.style={get:function(t){return t.style.cssText.toLowerCase()||e},set:function(t,e){return t.style.cssText=e+""}}),Q.support.optSelected||(Q.propHooks.selected=Q.extend(Q.propHooks.selected,{get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}})),Q.support.enctype||(Q.propFix.enctype="encoding"),Q.support.checkOn||Q.each(["radio","checkbox"],function(){Q.valHooks[this]={get:function(t){return null===t.getAttribute("value")?"on":t.value}}}),Q.each(["radio","checkbox"],function(){Q.valHooks[this]=Q.extend(Q.valHooks[this],{set:function(t,i){return Q.isArray(i)?t.checked=Q.inArray(Q(t).val(),i)>=0:e}})});var Ae=/^(?:textarea|input|select)$/i,Me=/^([^\.]*|)(?:\.(.+)|)$/,Ve=/(?:^|\s)hover(\.\S+|)\b/,Te=/^key/,Ie=/^(?:mouse|contextmenu)|click/,Le=/^(?:focusinfocus|focusoutblur)$/,Pe=function(t){return Q.event.special.hover?t:t.replace(Ve,"mouseenter$1 mouseleave$1")};Q.event={add:function(t,i,o,n,s){var r,a,l,c,m,u,h,p,_,y,f;if(3!==t.nodeType&&8!==t.nodeType&&i&&o&&(r=Q._data(t))){for(o.handler&&(_=o,o=_.handler,s=_.selector),o.guid||(o.guid=Q.guid++),l=r.events,l||(r.events=l={}),a=r.handle,a||(r.handle=a=function(t){return Q===e||t&&Q.event.triggered===t.type?e:Q.event.dispatch.apply(a.elem,arguments)},a.elem=t),i=Q.trim(Pe(i)).split(" "),c=0;i.length>c;c++)m=Me.exec(i[c])||[],u=m[1],h=(m[2]||"").split(".").sort(),f=Q.event.special[u]||{},u=(s?f.delegateType:f.bindType)||u,f=Q.event.special[u]||{},p=Q.extend({type:u,origType:m[1],data:n,handler:o,guid:o.guid,selector:s,needsContext:s&&Q.expr.match.needsContext.test(s),namespace:h.join(".")},_),y=l[u],y||(y=l[u]=[],y.delegateCount=0,f.setup&&f.setup.call(t,n,h,a)!==!1||(t.addEventListener?t.addEventListener(u,a,!1):t.attachEvent&&t.attachEvent("on"+u,a))),f.add&&(f.add.call(t,p),p.handler.guid||(p.handler.guid=o.guid)),s?y.splice(y.delegateCount++,0,p):y.push(p),Q.event.global[u]=!0;t=null}},global:{},remove:function(t,e,i,o,n){var s,r,a,l,c,m,u,h,p,_,y,f=Q.hasData(t)&&Q._data(t);if(f&&(h=f.events)){for(e=Q.trim(Pe(e||"")).split(" "),s=0;e.length>s;s++)if(r=Me.exec(e[s])||[],a=l=r[1],c=r[2],a){for(p=Q.event.special[a]||{},a=(o?p.delegateType:p.bindType)||a,_=h[a]||[],m=_.length,c=c?RegExp("(^|\\.)"+c.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null,u=0;_.length>u;u++)y=_[u],!n&&l!==y.origType||i&&i.guid!==y.guid||c&&!c.test(y.namespace)||o&&o!==y.selector&&("**"!==o||!y.selector)||(_.splice(u--,1),y.selector&&_.delegateCount--,p.remove&&p.remove.call(t,y));0===_.length&&m!==_.length&&(p.teardown&&p.teardown.call(t,c,f.handle)!==!1||Q.removeEvent(t,a,f.handle),delete h[a])}else for(a in h)Q.event.remove(t,a+e[s],i,o,!0);Q.isEmptyObject(h)&&(delete f.handle,Q.removeData(t,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(i,o,n,s){if(!n||3!==n.nodeType&&8!==n.nodeType){var r,a,l,c,m,u,h,p,_,y,f=i.type||i,d=[];if(!Le.test(f+Q.event.triggered)&&(f.indexOf("!")>=0&&(f=f.slice(0,-1),a=!0),f.indexOf(".")>=0&&(d=f.split("."),f=d.shift(),d.sort()),n&&!Q.event.customEvent[f]||Q.event.global[f]))if(i="object"==typeof i?i[Q.expando]?i:new Q.Event(f,i):new Q.Event(f),i.type=f,i.isTrigger=!0,i.exclusive=a,i.namespace=d.join("."),i.namespace_re=i.namespace?RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,u=0>f.indexOf(":")?"on"+f:"",n){if(i.result=e,i.target||(i.target=n),o=null!=o?Q.makeArray(o):[],o.unshift(i),h=Q.event.special[f]||{},!h.trigger||h.trigger.apply(n,o)!==!1){if(_=[[n,h.bindType||f]],!s&&!h.noBubble&&!Q.isWindow(n)){for(y=h.delegateType||f,c=Le.test(y+f)?n:n.parentNode,m=n;c;c=c.parentNode)_.push([c,y]),m=c;m===(n.ownerDocument||O)&&_.push([m.defaultView||m.parentWindow||t,y])}for(l=0;_.length>l&&!i.isPropagationStopped();l++)c=_[l][0],i.type=_[l][1],p=(Q._data(c,"events")||{})[i.type]&&Q._data(c,"handle"),p&&p.apply(c,o),p=u&&c[u],p&&Q.acceptData(c)&&p.apply&&p.apply(c,o)===!1&&i.preventDefault();return i.type=f,s||i.isDefaultPrevented()||h._default&&h._default.apply(n.ownerDocument,o)!==!1||"click"===f&&Q.nodeName(n,"a")||!Q.acceptData(n)||u&&n[f]&&("focus"!==f&&"blur"!==f||0!==i.target.offsetWidth)&&!Q.isWindow(n)&&(m=n[u],m&&(n[u]=null),Q.event.triggered=f,n[f](),Q.event.triggered=e,m&&(n[u]=m)),i.result}}else{r=Q.cache;for(l in r)r[l].events&&r[l].events[f]&&Q.event.trigger(i,o,r[l].handle.elem,!0)}}},dispatch:function(i){i=Q.event.fix(i||t.event);var o,n,s,r,a,l,c,m,u,h=(Q._data(this,"events")||{})[i.type]||[],p=h.delegateCount,_=W.call(arguments),y=!i.exclusive&&!i.namespace,f=Q.event.special[i.type]||{},d=[];if(_[0]=i,i.delegateTarget=this,!f.preDispatch||f.preDispatch.call(this,i)!==!1){if(p&&(!i.button||"click"!==i.type))for(s=i.target;s!=this;s=s.parentNode||this)if(s.disabled!==!0||"click"!==i.type){for(a={},c=[],o=0;p>o;o++)m=h[o],u=m.selector,a[u]===e&&(a[u]=m.needsContext?Q(u,this).index(s)>=0:Q.find(u,this,null,[s]).length),a[u]&&c.push(m);c.length&&d.push({elem:s,matches:c})}for(h.length>p&&d.push({elem:this,matches:h.slice(p)}),o=0;d.length>o&&!i.isPropagationStopped();o++)for(l=d[o],i.currentTarget=l.elem,n=0;l.matches.length>n&&!i.isImmediatePropagationStopped();n++)m=l.matches[n],(y||!i.namespace&&!m.namespace||i.namespace_re&&i.namespace_re.test(m.namespace))&&(i.data=m.data,i.handleObj=m,r=((Q.event.special[m.origType]||{}).handle||m.handler).apply(l.elem,_),r!==e&&(i.result=r,r===!1&&(i.preventDefault(),i.stopPropagation())));return f.postDispatch&&f.postDispatch.call(this,i),i.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,i){var o,n,s,r=i.button,a=i.fromElement;return null==t.pageX&&null!=i.clientX&&(o=t.target.ownerDocument||O,n=o.documentElement,s=o.body,t.pageX=i.clientX+(n&&n.scrollLeft||s&&s.scrollLeft||0)-(n&&n.clientLeft||s&&s.clientLeft||0),t.pageY=i.clientY+(n&&n.scrollTop||s&&s.scrollTop||0)-(n&&n.clientTop||s&&s.clientTop||0)),!t.relatedTarget&&a&&(t.relatedTarget=a===t.target?i.toElement:a),t.which||r===e||(t.which=1&r?1:2&r?3:4&r?2:0),t}},fix:function(t){if(t[Q.expando])return t;var e,i,o=t,n=Q.event.fixHooks[t.type]||{},s=n.props?this.props.concat(n.props):this.props;for(t=Q.Event(o),e=s.length;e;)i=s[--e],t[i]=o[i];return t.target||(t.target=o.srcElement||O),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,n.filter?n.filter(t,o):t},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(t,e,i){Q.isWindow(this)&&(this.onbeforeunload=i)},teardown:function(t,e){this.onbeforeunload===e&&(this.onbeforeunload=null)}}},simulate:function(t,e,i,o){var n=Q.extend(new Q.Event,i,{type:t,isSimulated:!0,originalEvent:{}});o?Q.event.trigger(n,null,e):Q.event.dispatch.call(e,n),n.isDefaultPrevented()&&i.preventDefault()}},Q.event.handle=Q.event.dispatch,Q.removeEvent=O.removeEventListener?function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)}:function(t,i,o){var n="on"+i;t.detachEvent&&(t[n]===e&&(t[n]=null),t.detachEvent(n,o))},Q.Event=function(t,i){return this instanceof Q.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.returnValue===!1||t.getPreventDefault&&t.getPreventDefault()?r:s):this.type=t,i&&Q.extend(this,i),this.timeStamp=t&&t.timeStamp||Q.now(),this[Q.expando]=!0,e):new Q.Event(t,i)},Q.Event.prototype={preventDefault:function(){this.isDefaultPrevented=r;var t=this.originalEvent;t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=r;var t=this.originalEvent;t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=r,this.stopPropagation()},isDefaultPrevented:s,isPropagationStopped:s,isImmediatePropagationStopped:s},Q.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){Q.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,o=this,n=t.relatedTarget,s=t.handleObj;return s.selector,(!n||n!==o&&!Q.contains(o,n))&&(t.type=s.origType,i=s.handler.apply(this,arguments),t.type=e),i}}}),Q.support.submitBubbles||(Q.event.special.submit={setup:function(){return Q.nodeName(this,"form")?!1:(Q.event.add(this,"click._submit keypress._submit",function(t){var i=t.target,o=Q.nodeName(i,"input")||Q.nodeName(i,"button")?i.form:e;o&&!Q._data(o,"_submit_attached")&&(Q.event.add(o,"submit._submit",function(t){t._submit_bubble=!0}),Q._data(o,"_submit_attached",!0))}),e)},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&Q.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return Q.nodeName(this,"form")?!1:(Q.event.remove(this,"._submit"),e)}}),Q.support.changeBubbles||(Q.event.special.change={setup:function(){return Ae.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(Q.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),Q.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),Q.event.simulate("change",this,t,!0)})),!1):(Q.event.add(this,"beforeactivate._change",function(t){var e=t.target;Ae.test(e.nodeName)&&!Q._data(e,"_change_attached")&&(Q.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||Q.event.simulate("change",this.parentNode,t,!0)}),Q._data(e,"_change_attached",!0))}),e)},handle:function(t){var i=t.target;return this!==i||t.isSimulated||t.isTrigger||"radio"!==i.type&&"checkbox"!==i.type?t.handleObj.handler.apply(this,arguments):e},teardown:function(){return Q.event.remove(this,"._change"),!Ae.test(this.nodeName)}}),Q.support.focusinBubbles||Q.each({focus:"focusin",blur:"focusout"},function(t,e){var i=0,o=function(t){Q.event.simulate(e,t.target,Q.event.fix(t),!0)};Q.event.special[e]={setup:function(){0===i++&&O.addEventListener(t,o,!0)},teardown:function(){0===--i&&O.removeEventListener(t,o,!0)}}}),Q.fn.extend({on:function(t,i,o,n,r){var a,l;if("object"==typeof t){"string"!=typeof i&&(o=o||i,i=e);for(l in t)this.on(l,i,o,t[l],r);return this}if(null==o&&null==n?(n=i,o=i=e):null==n&&("string"==typeof i?(n=o,o=e):(n=o,o=i,i=e)),n===!1)n=s;else if(!n)return this;return 1===r&&(a=n,n=function(t){return Q().off(t),a.apply(this,arguments)},n.guid=a.guid||(a.guid=Q.guid++)),this.each(function(){Q.event.add(this,t,n,o,i)})},one:function(t,e,i,o){return this.on(t,e,i,o,1)},off:function(t,i,o){var n,r;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,Q(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(r in t)this.off(r,i,t[r]);return this}return(i===!1||"function"==typeof i)&&(o=i,i=e),o===!1&&(o=s),this.each(function(){Q.event.remove(this,t,o,i)})},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},live:function(t,e,i){return Q(this.context).on(t,this.selector,e,i),this},die:function(t,e){return Q(this.context).off(t,this.selector||"**",e),this},delegate:function(t,e,i,o){return this.on(e,t,i,o)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)},trigger:function(t,e){return this.each(function(){Q.event.trigger(t,e,this)})},triggerHandler:function(t,i){return this[0]?Q.event.trigger(t,i,this[0],!0):e},toggle:function(t){var e=arguments,i=t.guid||Q.guid++,o=0,n=function(i){var n=(Q._data(this,"lastToggle"+t.guid)||0)%o;return Q._data(this,"lastToggle"+t.guid,n+1),i.preventDefault(),e[n].apply(this,arguments)||!1};for(n.guid=i;e.length>o;)e[o++].guid=i;return this.click(n)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),Q.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){Q.fn[e]=function(t,i){return null==i&&(i=t,t=null),arguments.length>0?this.on(e,null,t,i):this.trigger(e)},Te.test(e)&&(Q.event.fixHooks[e]=Q.event.keyHooks),Ie.test(e)&&(Q.event.fixHooks[e]=Q.event.mouseHooks)}),function(t,e){function i(t,e,i,o){i=i||[],e=e||I;var n,s,r,a,l=e.nodeType;if(!t||"string"!=typeof t)return i;if(1!==l&&9!==l)return[];if(r=g(e),!r&&!o&&(n=ie.exec(t)))if(a=n[1]){if(9===l){if(s=e.getElementById(a),!s||!s.parentNode)return i;if(s.id===a)return i.push(s),i}else if(e.ownerDocument&&(s=e.ownerDocument.getElementById(a))&&D(e,s)&&s.id===a)return i.push(s),i}else{if(n[2])return k.apply(i,J.call(e.getElementsByTagName(t),0)),i;if((a=n[3])&&he&&e.getElementsByClassName)return k.apply(i,J.call(e.getElementsByClassName(a),0)),i}return y(t.replace(Z,"$1"),e,i,o,r)}function o(t){return function(e){var i=e.nodeName.toLowerCase();return"input"===i&&e.type===t}}function n(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function s(t){return N(function(e){return e=+e,N(function(i,o){for(var n,s=t([],i.length,e),r=s.length;r--;)i[n=s[r]]&&(i[n]=!(o[n]=i[n]))})})}function r(t,e,i){if(t===e)return i;for(var o=t.nextSibling;o;){if(o===e)return-1;o=o.nextSibling}return 1}function a(t,e){var o,n,s,r,a,l,c,m=j[V][t];if(m)return e?0:m.slice(0);for(a=t,l=[],c=v.preFilter;a;){(!o||(n=Y.exec(a)))&&(n&&(a=a.slice(n[0].length)),l.push(s=[])),o=!1,(n=te.exec(a))&&(s.push(o=new T(n.shift())),a=a.slice(o.length),o.type=n[0].replace(Z," "));for(r in v.filter)!(n=ae[r].exec(a))||c[r]&&!(n=c[r](n,I,!0))||(s.push(o=new T(n.shift())),a=a.slice(o.length),o.type=r,o.matches=n);if(!o)break}return e?a.length:a?i.error(t):j(t,l).slice(0)}function l(t,e,i){var o=e.dir,n=i&&"parentNode"===e.dir,s=F++;return e.first?function(e,i,s){for(;e=e[o];)if(n||1===e.nodeType)return t(e,i,s)}:function(e,i,r){if(r){for(;e=e[o];)if((n||1===e.nodeType)&&t(e,i,r))return e}else for(var a,l=P+" "+s+" ",c=l+d;e=e[o];)if(n||1===e.nodeType){if((a=e[V])===c)return e.sizset;if("string"==typeof a&&0===a.indexOf(l)){if(e.sizset)return e}else{if(e[V]=c,t(e,i,r))return e.sizset=!0,e;e.sizset=!1}}}}function c(t){return t.length>1?function(e,i,o){for(var n=t.length;n--;)if(!t[n](e,i,o))return!1;return!0}:t[0]}function m(t,e,i,o,n){for(var s,r=[],a=0,l=t.length,c=null!=e;l>a;a++)(s=t[a])&&(!i||i(s,o,n))&&(r.push(s),c&&e.push(a));return r}function u(t,e,i,o,n,s){return o&&!o[V]&&(o=u(o)),n&&!n[V]&&(n=u(n,s)),N(function(s,r,a,l){if(!s||!n){var c,u,h,p=[],y=[],f=r.length,d=s||_(e||"*",a.nodeType?[a]:a,[],s),x=!t||!s&&e?d:m(d,p,t,a,l),v=i?n||(s?t:f||o)?[]:r:x;if(i&&i(x,v,a,l),o)for(h=m(v,y),o(h,[],a,l),c=h.length;c--;)(u=h[c])&&(v[y[c]]=!(x[y[c]]=u));if(s)for(c=t&&v.length;c--;)(u=v[c])&&(s[p[c]]=!(r[p[c]]=u));else v=m(v===r?v.splice(f,v.length):v),n?n(null,r,v,l):k.apply(r,v)}})}function h(t){for(var e,i,o,n=t.length,s=v.relative[t[0].type],r=s||v.relative[" "],a=s?1:0,m=l(function(t){return t===e},r,!0),p=l(function(t){return R.call(e,t)>-1},r,!0),_=[function(t,i,o){return!s&&(o||i!==S)||((e=i).nodeType?m(t,i,o):p(t,i,o))}];n>a;a++)if(i=v.relative[t[a].type])_=[l(c(_),i)];else{if(i=v.filter[t[a].type].apply(null,t[a].matches),i[V]){for(o=++a;n>o&&!v.relative[t[o].type];o++);return u(a>1&&c(_),a>1&&t.slice(0,a-1).join("").replace(Z,"$1"),i,o>a&&h(t.slice(a,o)),n>o&&h(t=t.slice(o)),n>o&&t.join(""))}_.push(i)}return c(_)}function p(t,e){var o=e.length>0,n=t.length>0,s=function(r,a,l,c,u){var h,p,_,y=[],f=0,x="0",b=r&&[],g=null!=u,D=S,C=r||n&&v.find.TAG("*",u&&a.parentNode||a),B=P+=null==D?1:Math.E;for(g&&(S=a!==I&&a,d=s.el);null!=(h=C[x]);x++){if(n&&h){for(p=0;_=t[p];p++)if(_(h,a,l)){c.push(h);break}g&&(P=B,d=++s.el)}o&&((h=!_&&h)&&f--,r&&b.push(h))}if(f+=x,o&&x!==f){for(p=0;_=e[p];p++)_(b,y,a,l);if(r){if(f>0)for(;x--;)b[x]||y[x]||(y[x]=G.call(c));y=m(y)}k.apply(c,y),g&&!r&&y.length>0&&f+e.length>1&&i.uniqueSort(c)}return g&&(P=B,S=D),b};return s.el=0,o?N(s):s}function _(t,e,o,n){for(var s=0,r=e.length;r>s;s++)i(t,e[s],o,n);return o}function y(t,e,i,o,n){var s,r,l,c,m,u=a(t);if(u.length,!o&&1===u.length){if(r=u[0]=u[0].slice(0),r.length>2&&"ID"===(l=r[0]).type&&9===e.nodeType&&!n&&v.relative[r[1].type]){if(e=v.find.ID(l.matches[0].replace(re,""),e,n)[0],!e)return i;t=t.slice(r.shift().length)}for(s=ae.POS.test(t)?-1:r.length-1;s>=0&&(l=r[s],!v.relative[c=l.type]);s--)if((m=v.find[c])&&(o=m(l.matches[0].replace(re,""),oe.test(r[0].type)&&e.parentNode||e,n))){if(r.splice(s,1),t=o.length&&r.join(""),!t)return k.apply(i,J.call(o,0)),i;break}}return C(t,u)(o,e,n,i,oe.test(t)),i}function f(){}var d,x,v,b,g,D,C,B,w,S,A=!0,M="undefined",V=("sizcache"+Math.random()).replace(".",""),T=String,I=t.document,L=I.documentElement,P=0,F=0,G=[].pop,k=[].push,J=[].slice,R=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(this[e]===t)return e;return-1},N=function(t,e){return t[V]=null==e||e,t},E=function(){var t={},e=[];return N(function(i,o){return e.push(i)>v.cacheLength&&delete t[e.shift()],t[i]=o},t)},O=E(),j=E(),z=E(),q="[\\x20\\t\\r\\n\\f]",H="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",$=H.replace("w","w#"),W="([*^$|!~]?=)",U="\\["+q+"*("+H+")"+q+"*(?:"+W+q+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+$+")|)|)"+q+"*\\]",K=":("+H+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+U+")|[^:]|\\\\.)*|.*))\\)|)",X=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+q+"*((?:-\\d)?\\d*)"+q+"*\\)|)(?=[^-]|$)",Z=RegExp("^"+q+"+|((?:^|[^\\\\])(?:\\\\.)*)"+q+"+$","g"),Y=RegExp("^"+q+"*,"+q+"*"),te=RegExp("^"+q+"*([\\x20\\t\\r\\n\\f>+~])"+q+"*"),ee=RegExp(K),ie=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,oe=/[\x20\t\r\n\f]*[+~]/,ne=/h\d/i,se=/input|select|textarea|button/i,re=/\\(?!\\)/g,ae={ID:RegExp("^#("+H+")"),CLASS:RegExp("^\\.("+H+")"),NAME:RegExp("^\\[name=['\"]?("+H+")['\"]?\\]"),TAG:RegExp("^("+H.replace("w","w*")+")"),ATTR:RegExp("^"+U),PSEUDO:RegExp("^"+K),POS:RegExp(X,"i"),CHILD:RegExp("^:(only|nth|first|last)-child(?:\\("+q+"*(even|odd|(([+-]|)(\\d*)n|)"+q+"*(?:([+-]|)"+q+"*(\\d+)|))"+q+"*\\)|)","i"),needsContext:RegExp("^"+q+"*[>+~]|"+X,"i")},le=function(t){var e=I.createElement("div");try{return t(e)}catch(i){return!1}finally{e=null}},ce=le(function(t){return t.appendChild(I.createComment("")),!t.getElementsByTagName("*").length}),me=le(function(t){return t.innerHTML="<a href='#'></a>",t.firstChild&&typeof t.firstChild.getAttribute!==M&&"#"===t.firstChild.getAttribute("href")}),ue=le(function(t){t.innerHTML="<select></select>";var e=typeof t.lastChild.getAttribute("multiple");return"boolean"!==e&&"string"!==e}),he=le(function(t){return t.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",t.getElementsByClassName&&t.getElementsByClassName("e").length?(t.lastChild.className="e",2===t.getElementsByClassName("e").length):!1}),pe=le(function(t){t.id=V+0,t.innerHTML="<a name='"+V+"'></a><div name='"+V+"'></div>",L.insertBefore(t,L.firstChild);var e=I.getElementsByName&&I.getElementsByName(V).length===2+I.getElementsByName(V+0).length;return x=!I.getElementById(V),L.removeChild(t),e});try{J.call(L.childNodes,0)[0].nodeType}catch(_e){J=function(t){for(var e,i=[];e=this[t];t++)i.push(e);return i}}i.matches=function(t,e){return i(t,null,null,e)},i.matchesSelector=function(t,e){return i(e,null,null,[t]).length>0},b=i.getText=function(t){var e,i="",o=0,n=t.nodeType;if(n){if(1===n||9===n||11===n){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=b(t)}else if(3===n||4===n)return t.nodeValue}else for(;e=t[o];o++)i+=b(e);return i},g=i.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},D=i.contains=L.contains?function(t,e){var i=9===t.nodeType?t.documentElement:t,o=e&&e.parentNode;return t===o||!!(o&&1===o.nodeType&&i.contains&&i.contains(o))}:L.compareDocumentPosition?function(t,e){return e&&!!(16&t.compareDocumentPosition(e))}:function(t,e){for(;e=e.parentNode;)if(e===t)return!0;return!1},i.attr=function(t,e){var i,o=g(t);return o||(e=e.toLowerCase()),(i=v.attrHandle[e])?i(t):o||ue?t.getAttribute(e):(i=t.getAttributeNode(e),i?"boolean"==typeof t[e]?t[e]?e:null:i.specified?i.value:null:null)},v=i.selectors={cacheLength:50,createPseudo:N,match:ae,attrHandle:me?{}:{href:function(t){return t.getAttribute("href",2)},type:function(t){return t.getAttribute("type")}},find:{ID:x?function(t,e,i){if(typeof e.getElementById!==M&&!i){var o=e.getElementById(t);return o&&o.parentNode?[o]:[]}}:function(t,i,o){if(typeof i.getElementById!==M&&!o){var n=i.getElementById(t);return n?n.id===t||typeof n.getAttributeNode!==M&&n.getAttributeNode("id").value===t?[n]:e:[]}},TAG:ce?function(t,i){return typeof i.getElementsByTagName!==M?i.getElementsByTagName(t):e}:function(t,e){var i=e.getElementsByTagName(t);if("*"===t){for(var o,n=[],s=0;o=i[s];s++)1===o.nodeType&&n.push(o);return n}return i},NAME:pe&&function(t,i){return typeof i.getElementsByName!==M?i.getElementsByName(name):e},CLASS:he&&function(t,i,o){return typeof i.getElementsByClassName===M||o?e:i.getElementsByClassName(t)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(re,""),t[3]=(t[4]||t[5]||"").replace(re,""),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1]?(t[2]||i.error(t[0]),t[3]=+(t[3]?t[4]+(t[5]||1):2*("even"===t[2]||"odd"===t[2])),t[4]=+(t[6]+t[7]||"odd"===t[2])):t[2]&&i.error(t[0]),t},PSEUDO:function(t){var e,i;return ae.CHILD.test(t[0])?null:(t[3]?t[2]=t[3]:(e=t[4])&&(ee.test(e)&&(i=a(e,!0))&&(i=e.indexOf(")",e.length-i)-e.length)&&(e=e.slice(0,i),t[0]=t[0].slice(0,i)),t[2]=e),t.slice(0,3))}},filter:{ID:x?function(t){return t=t.replace(re,""),function(e){return e.getAttribute("id")===t}}:function(t){return t=t.replace(re,""),function(e){var i=typeof e.getAttributeNode!==M&&e.getAttributeNode("id");return i&&i.value===t}},TAG:function(t){return"*"===t?function(){return!0}:(t=t.replace(re,"").toLowerCase(),function(e){return e.nodeName&&e.nodeName.toLowerCase()===t})},CLASS:function(t){var e=O[V][t];return e||(e=O(t,RegExp("(^|"+q+")"+t+"("+q+"|$)"))),function(t){return e.test(t.className||typeof t.getAttribute!==M&&t.getAttribute("class")||"")}},ATTR:function(t,e,o){return function(n){var s=i.attr(n,t);return null==s?"!="===e:e?(s+="","="===e?s===o:"!="===e?s!==o:"^="===e?o&&0===s.indexOf(o):"*="===e?o&&s.indexOf(o)>-1:"$="===e?o&&s.substr(s.length-o.length)===o:"~="===e?(" "+s+" ").indexOf(o)>-1:"|="===e?s===o||s.substr(0,o.length+1)===o+"-":!1):!0}},CHILD:function(t,e,i,o){return"nth"===t?function(t){var e,n,s=t.parentNode;if(1===i&&0===o)return!0;if(s)for(n=0,e=s.firstChild;e&&(1!==e.nodeType||(n++,t!==e));e=e.nextSibling);return n-=o,n===i||0===n%i&&n/i>=0}:function(e){var i=e;switch(t){case"only":case"first":for(;i=i.previousSibling;)if(1===i.nodeType)return!1;if("first"===t)return!0;i=e;case"last":for(;i=i.nextSibling;)if(1===i.nodeType)return!1;return!0}}},PSEUDO:function(t,e){var o,n=v.pseudos[t]||v.setFilters[t.toLowerCase()]||i.error("unsupported pseudo: "+t);return n[V]?n(e):n.length>1?(o=[t,t,"",e],v.setFilters.hasOwnProperty(t.toLowerCase())?N(function(t,i){for(var o,s=n(t,e),r=s.length;r--;)o=R.call(t,s[r]),t[o]=!(i[o]=s[r])}):function(t){return n(t,0,o)}):n}},pseudos:{not:N(function(t){var e=[],i=[],o=C(t.replace(Z,"$1"));return o[V]?N(function(t,e,i,n){for(var s,r=o(t,null,n,[]),a=t.length;a--;)(s=r[a])&&(t[a]=!(e[a]=s))
}):function(t,n,s){return e[0]=t,o(e,null,s,i),!i.pop()}}),has:N(function(t){return function(e){return i(t,e).length>0}}),contains:N(function(t){return function(e){return(e.textContent||e.innerText||b(e)).indexOf(t)>-1}}),enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},parent:function(t){return!v.pseudos.empty(t)},empty:function(t){var e;for(t=t.firstChild;t;){if(t.nodeName>"@"||3===(e=t.nodeType)||4===e)return!1;t=t.nextSibling}return!0},header:function(t){return ne.test(t.nodeName)},text:function(t){var e,i;return"input"===t.nodeName.toLowerCase()&&"text"===(e=t.type)&&(null==(i=t.getAttribute("type"))||i.toLowerCase()===e)},radio:o("radio"),checkbox:o("checkbox"),file:o("file"),password:o("password"),image:o("image"),submit:n("submit"),reset:n("reset"),button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},input:function(t){return se.test(t.nodeName)},focus:function(t){var e=t.ownerDocument;return!(t!==e.activeElement||e.hasFocus&&!e.hasFocus()||!t.type&&!t.href)},active:function(t){return t===t.ownerDocument.activeElement},first:s(function(){return[0]}),last:s(function(t,e){return[e-1]}),eq:s(function(t,e,i){return[0>i?i+e:i]}),even:s(function(t,e){for(var i=0;e>i;i+=2)t.push(i);return t}),odd:s(function(t,e){for(var i=1;e>i;i+=2)t.push(i);return t}),lt:s(function(t,e,i){for(var o=0>i?i+e:i;--o>=0;)t.push(o);return t}),gt:s(function(t,e,i){for(var o=0>i?i+e:i;e>++o;)t.push(o);return t})}},B=L.compareDocumentPosition?function(t,e){return t===e?(w=!0,0):(t.compareDocumentPosition&&e.compareDocumentPosition?4&t.compareDocumentPosition(e):t.compareDocumentPosition)?-1:1}:function(t,e){if(t===e)return w=!0,0;if(t.sourceIndex&&e.sourceIndex)return t.sourceIndex-e.sourceIndex;var i,o,n=[],s=[],a=t.parentNode,l=e.parentNode,c=a;if(a===l)return r(t,e);if(!a)return-1;if(!l)return 1;for(;c;)n.unshift(c),c=c.parentNode;for(c=l;c;)s.unshift(c),c=c.parentNode;i=n.length,o=s.length;for(var m=0;i>m&&o>m;m++)if(n[m]!==s[m])return r(n[m],s[m]);return m===i?r(t,s[m],-1):r(n[m],e,1)},[0,0].sort(B),A=!w,i.uniqueSort=function(t){var e,i=1;if(w=A,t.sort(B),w)for(;e=t[i];i++)e===t[i-1]&&t.splice(i--,1);return t},i.error=function(t){throw Error("Syntax error, unrecognized expression: "+t)},C=i.compile=function(t,e){var i,o=[],n=[],s=z[V][t];if(!s){for(e||(e=a(t)),i=e.length;i--;)s=h(e[i]),s[V]?o.push(s):n.push(s);s=z(t,p(n,o))}return s},I.querySelectorAll&&function(){var t,e=y,o=/'|\\/g,n=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,s=[":focus"],r=[":active",":focus"],l=L.matchesSelector||L.mozMatchesSelector||L.webkitMatchesSelector||L.oMatchesSelector||L.msMatchesSelector;le(function(t){t.innerHTML="<select><option selected=''></option></select>",t.querySelectorAll("[selected]").length||s.push("\\["+q+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),t.querySelectorAll(":checked").length||s.push(":checked")}),le(function(t){t.innerHTML="<p test=''></p>",t.querySelectorAll("[test^='']").length&&s.push("[*^$]="+q+"*(?:\"\"|'')"),t.innerHTML="<input type='hidden'/>",t.querySelectorAll(":enabled").length||s.push(":enabled",":disabled")}),s=RegExp(s.join("|")),y=function(t,i,n,r,l){if(!(r||l||s&&s.test(t))){var c,m,u=!0,h=V,p=i,_=9===i.nodeType&&t;if(1===i.nodeType&&"object"!==i.nodeName.toLowerCase()){for(c=a(t),(u=i.getAttribute("id"))?h=u.replace(o,"\\$&"):i.setAttribute("id",h),h="[id='"+h+"'] ",m=c.length;m--;)c[m]=h+c[m].join("");p=oe.test(t)&&i.parentNode||i,_=c.join(",")}if(_)try{return k.apply(n,J.call(p.querySelectorAll(_),0)),n}catch(y){}finally{u||i.removeAttribute("id")}}return e(t,i,n,r,l)},l&&(le(function(e){t=l.call(e,"div");try{l.call(e,"[test!='']:sizzle"),r.push("!=",K)}catch(i){}}),r=RegExp(r.join("|")),i.matchesSelector=function(e,o){if(o=o.replace(n,"='$1']"),!(g(e)||r.test(o)||s&&s.test(o)))try{var a=l.call(e,o);if(a||t||e.document&&11!==e.document.nodeType)return a}catch(c){}return i(o,null,null,[e]).length>0})}(),v.pseudos.nth=v.pseudos.eq,v.filters=f.prototype=v.pseudos,v.setFilters=new f,i.attr=Q.attr,Q.find=i,Q.expr=i.selectors,Q.expr[":"]=Q.expr.pseudos,Q.unique=i.uniqueSort,Q.text=i.getText,Q.isXMLDoc=i.isXML,Q.contains=i.contains}(t);var Fe=/Until$/,Ge=/^(?:parents|prev(?:Until|All))/,ke=/^.[^:#\[\.,]*$/,Je=Q.expr.match.needsContext,Re={children:!0,contents:!0,next:!0,prev:!0};Q.fn.extend({find:function(t){var e,i,o,n,s,r,a=this;if("string"!=typeof t)return Q(t).filter(function(){for(e=0,i=a.length;i>e;e++)if(Q.contains(a[e],this))return!0});for(r=this.pushStack("","find",t),e=0,i=this.length;i>e;e++)if(o=r.length,Q.find(t,this[e],r),e>0)for(n=o;r.length>n;n++)for(s=0;o>s;s++)if(r[s]===r[n]){r.splice(n--,1);break}return r},has:function(t){var e,i=Q(t,this),o=i.length;return this.filter(function(){for(e=0;o>e;e++)if(Q.contains(this,i[e]))return!0})},not:function(t){return this.pushStack(c(this,t,!1),"not",t)},filter:function(t){return this.pushStack(c(this,t,!0),"filter",t)},is:function(t){return!!t&&("string"==typeof t?Je.test(t)?Q(t,this.context).index(this[0])>=0:Q.filter(t,this).length>0:this.filter(t).length>0)},closest:function(t,e){for(var i,o=0,n=this.length,s=[],r=Je.test(t)||"string"!=typeof t?Q(t,e||this.context):0;n>o;o++)for(i=this[o];i&&i.ownerDocument&&i!==e&&11!==i.nodeType;){if(r?r.index(i)>-1:Q.find.matchesSelector(i,t)){s.push(i);break}i=i.parentNode}return s=s.length>1?Q.unique(s):s,this.pushStack(s,"closest",t)},index:function(t){return t?"string"==typeof t?Q.inArray(this[0],Q(t)):Q.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(t,e){var i="string"==typeof t?Q(t,e):Q.makeArray(t&&t.nodeType?[t]:t),o=Q.merge(this.get(),i);return this.pushStack(a(i[0])||a(o[0])?o:Q.unique(o))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),Q.fn.andSelf=Q.fn.addBack,Q.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return Q.dir(t,"parentNode")},parentsUntil:function(t,e,i){return Q.dir(t,"parentNode",i)},next:function(t){return l(t,"nextSibling")},prev:function(t){return l(t,"previousSibling")},nextAll:function(t){return Q.dir(t,"nextSibling")},prevAll:function(t){return Q.dir(t,"previousSibling")},nextUntil:function(t,e,i){return Q.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return Q.dir(t,"previousSibling",i)},siblings:function(t){return Q.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return Q.sibling(t.firstChild)},contents:function(t){return Q.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:Q.merge([],t.childNodes)}},function(t,e){Q.fn[t]=function(i,o){var n=Q.map(this,e,i);return Fe.test(t)||(o=i),o&&"string"==typeof o&&(n=Q.filter(o,n)),n=this.length>1&&!Re[t]?Q.unique(n):n,this.length>1&&Ge.test(t)&&(n=n.reverse()),this.pushStack(n,t,W.call(arguments).join(","))}}),Q.extend({filter:function(t,e,i){return i&&(t=":not("+t+")"),1===e.length?Q.find.matchesSelector(e[0],t)?[e[0]]:[]:Q.find.matches(t,e)},dir:function(t,i,o){for(var n=[],s=t[i];s&&9!==s.nodeType&&(o===e||1!==s.nodeType||!Q(s).is(o));)1===s.nodeType&&n.push(s),s=s[i];return n},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}});var Ne="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Ee=/ jQuery\d+="(?:null|\d+)"/g,Oe=/^\s+/,je=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ze=/<([\w:]+)/,qe=/<tbody/i,He=/<|&#?\w+;/,$e=/<(?:script|style|link)/i,We=/<(?:script|object|embed|option|style)/i,Ue=RegExp("<(?:"+Ne+")[\\s/>]","i"),Ke=/^(?:checkbox|radio)$/,Xe=/checked\s*(?:[^=]|=\s*.checked.)/i,Ze=/\/(java|ecma)script/i,Qe=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Ye={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},ti=m(O),ei=ti.appendChild(O.createElement("div"));Ye.optgroup=Ye.option,Ye.tbody=Ye.tfoot=Ye.colgroup=Ye.caption=Ye.thead,Ye.th=Ye.td,Q.support.htmlSerialize||(Ye._default=[1,"X<div>","</div>"]),Q.fn.extend({text:function(t){return Q.access(this,function(t){return t===e?Q.text(this):this.empty().append((this[0]&&this[0].ownerDocument||O).createTextNode(t))},null,t,arguments.length)},wrapAll:function(t){if(Q.isFunction(t))return this.each(function(e){Q(this).wrapAll(t.call(this,e))});if(this[0]){var e=Q(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return Q.isFunction(t)?this.each(function(e){Q(this).wrapInner(t.call(this,e))}):this.each(function(){var e=Q(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=Q.isFunction(t);return this.each(function(i){Q(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){Q.nodeName(this,"body")||Q(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(t){(1===this.nodeType||11===this.nodeType)&&this.appendChild(t)})},prepend:function(){return this.domManip(arguments,!0,function(t){(1===this.nodeType||11===this.nodeType)&&this.insertBefore(t,this.firstChild)})},before:function(){if(!a(this[0]))return this.domManip(arguments,!1,function(t){this.parentNode.insertBefore(t,this)});if(arguments.length){var t=Q.clean(arguments);return this.pushStack(Q.merge(t,this),"before",this.selector)}},after:function(){if(!a(this[0]))return this.domManip(arguments,!1,function(t){this.parentNode.insertBefore(t,this.nextSibling)});if(arguments.length){var t=Q.clean(arguments);return this.pushStack(Q.merge(this,t),"after",this.selector)}},remove:function(t,e){for(var i,o=0;null!=(i=this[o]);o++)(!t||Q.filter(t,[i]).length)&&(e||1!==i.nodeType||(Q.cleanData(i.getElementsByTagName("*")),Q.cleanData([i])),i.parentNode&&i.parentNode.removeChild(i));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)for(1===t.nodeType&&Q.cleanData(t.getElementsByTagName("*"));t.firstChild;)t.removeChild(t.firstChild);return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return Q.clone(this,t,e)})},html:function(t){return Q.access(this,function(t){var i=this[0]||{},o=0,n=this.length;if(t===e)return 1===i.nodeType?i.innerHTML.replace(Ee,""):e;if(!("string"!=typeof t||$e.test(t)||!Q.support.htmlSerialize&&Ue.test(t)||!Q.support.leadingWhitespace&&Oe.test(t)||Ye[(ze.exec(t)||["",""])[1].toLowerCase()])){t=t.replace(je,"<$1></$2>");try{for(;n>o;o++)i=this[o]||{},1===i.nodeType&&(Q.cleanData(i.getElementsByTagName("*")),i.innerHTML=t);i=0}catch(s){}}i&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(t){return a(this[0])?this.length?this.pushStack(Q(Q.isFunction(t)?t():t),"replaceWith",t):this:Q.isFunction(t)?this.each(function(e){var i=Q(this),o=i.html();i.replaceWith(t.call(this,e,o))}):("string"!=typeof t&&(t=Q(t).detach()),this.each(function(){var e=this.nextSibling,i=this.parentNode;Q(this).remove(),e?Q(e).before(t):Q(i).append(t)}))},detach:function(t){return this.remove(t,!0)},domManip:function(t,i,o){t=[].concat.apply([],t);var n,s,r,a,l=0,c=t[0],m=[],h=this.length;if(!Q.support.checkClone&&h>1&&"string"==typeof c&&Xe.test(c))return this.each(function(){Q(this).domManip(t,i,o)});if(Q.isFunction(c))return this.each(function(n){var s=Q(this);t[0]=c.call(this,n,i?s.html():e),s.domManip(t,i,o)});if(this[0]){if(n=Q.buildFragment(t,this,m),r=n.fragment,s=r.firstChild,1===r.childNodes.length&&(r=s),s)for(i=i&&Q.nodeName(s,"tr"),a=n.cacheable||h-1;h>l;l++)o.call(i&&Q.nodeName(this[l],"table")?u(this[l],"tbody"):this[l],l===a?r:Q.clone(r,!0,!0));r=s=null,m.length&&Q.each(m,function(t,e){e.src?Q.ajax?Q.ajax({url:e.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):Q.error("no ajax"):Q.globalEval((e.text||e.textContent||e.innerHTML||"").replace(Qe,"")),e.parentNode&&e.parentNode.removeChild(e)})}return this}}),Q.buildFragment=function(t,i,o){var n,s,r,a=t[0];return i=i||O,i=!i.nodeType&&i[0]||i,i=i.ownerDocument||i,!(1===t.length&&"string"==typeof a&&512>a.length&&i===O&&"<"===a.charAt(0))||We.test(a)||!Q.support.checkClone&&Xe.test(a)||!Q.support.html5Clone&&Ue.test(a)||(s=!0,n=Q.fragments[a],r=n!==e),n||(n=i.createDocumentFragment(),Q.clean(t,i,n,o),s&&(Q.fragments[a]=r&&n)),{fragment:n,cacheable:s}},Q.fragments={},Q.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){Q.fn[t]=function(i){var o,n=0,s=[],r=Q(i),a=r.length,l=1===this.length&&this[0].parentNode;if((null==l||l&&11===l.nodeType&&1===l.childNodes.length)&&1===a)return r[e](this[0]),this;for(;a>n;n++)o=(n>0?this.clone(!0):this).get(),Q(r[n])[e](o),s=s.concat(o);return this.pushStack(s,t,r.selector)}}),Q.extend({clone:function(t,e,i){var o,n,s,r;if(Q.support.html5Clone||Q.isXMLDoc(t)||!Ue.test("<"+t.nodeName+">")?r=t.cloneNode(!0):(ei.innerHTML=t.outerHTML,ei.removeChild(r=ei.firstChild)),!(Q.support.noCloneEvent&&Q.support.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||Q.isXMLDoc(t)))for(p(t,r),o=_(t),n=_(r),s=0;o[s];++s)n[s]&&p(o[s],n[s]);if(e&&(h(t,r),i))for(o=_(t),n=_(r),s=0;o[s];++s)h(o[s],n[s]);return o=n=null,r},clean:function(t,i,o,n){var s,r,a,l,c,u,h,p,_,f,d,x=i===O&&ti,v=[];for(i&&i.createDocumentFragment!==e||(i=O),s=0;null!=(a=t[s]);s++)if("number"==typeof a&&(a+=""),a){if("string"==typeof a)if(He.test(a)){for(x=x||m(i),h=i.createElement("div"),x.appendChild(h),a=a.replace(je,"<$1></$2>"),l=(ze.exec(a)||["",""])[1].toLowerCase(),c=Ye[l]||Ye._default,u=c[0],h.innerHTML=c[1]+a+c[2];u--;)h=h.lastChild;if(!Q.support.tbody)for(p=qe.test(a),_="table"!==l||p?"<table>"!==c[1]||p?[]:h.childNodes:h.firstChild&&h.firstChild.childNodes,r=_.length-1;r>=0;--r)Q.nodeName(_[r],"tbody")&&!_[r].childNodes.length&&_[r].parentNode.removeChild(_[r]);!Q.support.leadingWhitespace&&Oe.test(a)&&h.insertBefore(i.createTextNode(Oe.exec(a)[0]),h.firstChild),a=h.childNodes,h.parentNode.removeChild(h)}else a=i.createTextNode(a);a.nodeType?v.push(a):Q.merge(v,a)}if(h&&(a=h=x=null),!Q.support.appendChecked)for(s=0;null!=(a=v[s]);s++)Q.nodeName(a,"input")?y(a):a.getElementsByTagName!==e&&Q.grep(a.getElementsByTagName("input"),y);if(o)for(f=function(t){return!t.type||Ze.test(t.type)?n?n.push(t.parentNode?t.parentNode.removeChild(t):t):o.appendChild(t):e},s=0;null!=(a=v[s]);s++)Q.nodeName(a,"script")&&f(a)||(o.appendChild(a),a.getElementsByTagName!==e&&(d=Q.grep(Q.merge([],a.getElementsByTagName("script")),f),v.splice.apply(v,[s+1,0].concat(d)),s+=d.length));return v},cleanData:function(t,e){for(var i,o,n,s,r=0,a=Q.expando,l=Q.cache,c=Q.support.deleteExpando,m=Q.event.special;null!=(n=t[r]);r++)if((e||Q.acceptData(n))&&(o=n[a],i=o&&l[o])){if(i.events)for(s in i.events)m[s]?Q.event.remove(n,s):Q.removeEvent(n,s,i.handle);l[o]&&(delete l[o],c?delete n[a]:n.removeAttribute?n.removeAttribute(a):n[a]=null,Q.deletedIds.push(o))}}}),function(){var t,e;Q.uaMatch=function(t){t=t.toLowerCase();var e=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||0>t.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:e[1]||"",version:e[2]||"0"}},t=Q.uaMatch(z.userAgent),e={},t.browser&&(e[t.browser]=!0,e.version=t.version),e.chrome?e.webkit=!0:e.webkit&&(e.safari=!0),Q.browser=e,Q.sub=function(){function t(e,i){return new t.fn.init(e,i)}Q.extend(!0,t,this),t.superclass=this,t.fn=t.prototype=this(),t.fn.constructor=t,t.sub=this.sub,t.fn.init=function(i,o){return o&&o instanceof Q&&!(o instanceof t)&&(o=t(o)),Q.fn.init.call(this,i,o,e)},t.fn.init.prototype=t.fn;var e=t(O);return t}}();var ii,oi,ni,si=/alpha\([^)]*\)/i,ri=/opacity=([^)]*)/,ai=/^(top|right|bottom|left)$/,li=/^(none|table(?!-c[ea]).+)/,ci=/^margin/,mi=RegExp("^("+Y+")(.*)$","i"),ui=RegExp("^("+Y+")(?!px)[a-z%]+$","i"),hi=RegExp("^([-+])=("+Y+")","i"),pi={},_i={position:"absolute",visibility:"hidden",display:"block"},yi={letterSpacing:0,fontWeight:400},fi=["Top","Right","Bottom","Left"],di=["Webkit","O","Moz","ms"],xi=Q.fn.toggle;Q.fn.extend({css:function(t,i){return Q.access(this,function(t,i,o){return o!==e?Q.style(t,i,o):Q.css(t,i)},t,i,arguments.length>1)},show:function(){return x(this,!0)},hide:function(){return x(this)},toggle:function(t,e){var i="boolean"==typeof t;return Q.isFunction(t)&&Q.isFunction(e)?xi.apply(this,arguments):this.each(function(){(i?t:d(this))?Q(this).show():Q(this).hide()})}}),Q.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=ii(t,"opacity");return""===i?"1":i}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":Q.support.cssFloat?"cssFloat":"styleFloat"},style:function(t,i,o,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var s,r,a,l=Q.camelCase(i),c=t.style;if(i=Q.cssProps[l]||(Q.cssProps[l]=f(c,l)),a=Q.cssHooks[i]||Q.cssHooks[l],o===e)return a&&"get"in a&&(s=a.get(t,!1,n))!==e?s:c[i];if(r=typeof o,"string"===r&&(s=hi.exec(o))&&(o=(s[1]+1)*s[2]+parseFloat(Q.css(t,i)),r="number"),!(null==o||"number"===r&&isNaN(o)||("number"!==r||Q.cssNumber[l]||(o+="px"),a&&"set"in a&&(o=a.set(t,o,n))===e)))try{c[i]=o}catch(m){}}},css:function(t,i,o,n){var s,r,a,l=Q.camelCase(i);return i=Q.cssProps[l]||(Q.cssProps[l]=f(t.style,l)),a=Q.cssHooks[i]||Q.cssHooks[l],a&&"get"in a&&(s=a.get(t,!0,n)),s===e&&(s=ii(t,i)),"normal"===s&&i in yi&&(s=yi[i]),o||n!==e?(r=parseFloat(s),o||Q.isNumeric(r)?r||0:s):s},swap:function(t,e,i){var o,n,s={};for(n in e)s[n]=t.style[n],t.style[n]=e[n];o=i.call(t);for(n in e)t.style[n]=s[n];return o}}),t.getComputedStyle?ii=function(e,i){var o,n,s,r,a=t.getComputedStyle(e,null),l=e.style;return a&&(o=a[i],""!==o||Q.contains(e.ownerDocument,e)||(o=Q.style(e,i)),ui.test(o)&&ci.test(i)&&(n=l.width,s=l.minWidth,r=l.maxWidth,l.minWidth=l.maxWidth=l.width=o,o=a.width,l.width=n,l.minWidth=s,l.maxWidth=r)),o}:O.documentElement.currentStyle&&(ii=function(t,e){var i,o,n=t.currentStyle&&t.currentStyle[e],s=t.style;return null==n&&s&&s[e]&&(n=s[e]),ui.test(n)&&!ai.test(e)&&(i=s.left,o=t.runtimeStyle&&t.runtimeStyle.left,o&&(t.runtimeStyle.left=t.currentStyle.left),s.left="fontSize"===e?"1em":n,n=s.pixelLeft+"px",s.left=i,o&&(t.runtimeStyle.left=o)),""===n?"auto":n}),Q.each(["height","width"],function(t,i){Q.cssHooks[i]={get:function(t,o,n){return o?0===t.offsetWidth&&li.test(ii(t,"display"))?Q.swap(t,_i,function(){return g(t,i,n)}):g(t,i,n):e},set:function(t,e,o){return v(t,e,o?b(t,i,o,Q.support.boxSizing&&"border-box"===Q.css(t,"boxSizing")):0)}}}),Q.support.opacity||(Q.cssHooks.opacity={get:function(t,e){return ri.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var i=t.style,o=t.currentStyle,n=Q.isNumeric(e)?"alpha(opacity="+100*e+")":"",s=o&&o.filter||i.filter||"";i.zoom=1,e>=1&&""===Q.trim(s.replace(si,""))&&i.removeAttribute&&(i.removeAttribute("filter"),o&&!o.filter)||(i.filter=si.test(s)?s.replace(si,n):s+" "+n)}}),Q(function(){Q.support.reliableMarginRight||(Q.cssHooks.marginRight={get:function(t,i){return Q.swap(t,{display:"inline-block"},function(){return i?ii(t,"marginRight"):e})}}),!Q.support.pixelPosition&&Q.fn.position&&Q.each(["top","left"],function(t,e){Q.cssHooks[e]={get:function(t,i){if(i){var o=ii(t,e);return ui.test(o)?Q(t).position()[e]+"px":o}}}})}),Q.expr&&Q.expr.filters&&(Q.expr.filters.hidden=function(t){return 0===t.offsetWidth&&0===t.offsetHeight||!Q.support.reliableHiddenOffsets&&"none"===(t.style&&t.style.display||ii(t,"display"))},Q.expr.filters.visible=function(t){return!Q.expr.filters.hidden(t)}),Q.each({margin:"",padding:"",border:"Width"},function(t,e){Q.cssHooks[t+e]={expand:function(i){var o,n="string"==typeof i?i.split(" "):[i],s={};for(o=0;4>o;o++)s[t+fi[o]+e]=n[o]||n[o-2]||n[0];return s}},ci.test(t)||(Q.cssHooks[t+e].set=v)});var vi=/%20/g,bi=/\[\]$/,gi=/\r?\n/g,Di=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Ci=/^(?:select|textarea)/i;Q.fn.extend({serialize:function(){return Q.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?Q.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Ci.test(this.nodeName)||Di.test(this.type))}).map(function(t,e){var i=Q(this).val();return null==i?null:Q.isArray(i)?Q.map(i,function(t){return{name:e.name,value:t.replace(gi,"\r\n")}}):{name:e.name,value:i.replace(gi,"\r\n")}}).get()}}),Q.param=function(t,i){var o,n=[],s=function(t,e){e=Q.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(i===e&&(i=Q.ajaxSettings&&Q.ajaxSettings.traditional),Q.isArray(t)||t.jquery&&!Q.isPlainObject(t))Q.each(t,function(){s(this.name,this.value)});else for(o in t)C(o,t[o],i,s);return n.join("&").replace(vi,"+")};var Bi,wi,Si=/#.*$/,Ai=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Mi=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Vi=/^(?:GET|HEAD)$/,Ti=/^\/\//,Ii=/\?/,Li=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Pi=/([?&])_=[^&]*/,Fi=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Gi=Q.fn.load,ki={},Ji={},Ri=["*/"]+["*"];try{wi=j.href}catch(Ni){wi=O.createElement("a"),wi.href="",wi=wi.href}Bi=Fi.exec(wi.toLowerCase())||[],Q.fn.load=function(t,i,o){if("string"!=typeof t&&Gi)return Gi.apply(this,arguments);if(!this.length)return this;var n,s,r,a=this,l=t.indexOf(" ");return l>=0&&(n=t.slice(l,t.length),t=t.slice(0,l)),Q.isFunction(i)?(o=i,i=e):i&&"object"==typeof i&&(s="POST"),Q.ajax({url:t,type:s,dataType:"html",data:i,complete:function(t,e){o&&a.each(o,r||[t.responseText,e,t])}}).done(function(t){r=arguments,a.html(n?Q("<div>").append(t.replace(Li,"")).find(n):t)}),this},Q.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(t,e){Q.fn[e]=function(t){return this.on(e,t)}}),Q.each(["get","post"],function(t,i){Q[i]=function(t,o,n,s){return Q.isFunction(o)&&(s=s||n,n=o,o=e),Q.ajax({type:i,url:t,data:o,success:n,dataType:s})}}),Q.extend({getScript:function(t,i){return Q.get(t,e,i,"script")},getJSON:function(t,e,i){return Q.get(t,e,i,"json")},ajaxSetup:function(t,e){return e?S(t,Q.ajaxSettings):(e=t,t=Q.ajaxSettings),S(t,e),t},ajaxSettings:{url:wi,isLocal:Mi.test(Bi[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Ri},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":t.String,"text html":!0,"text json":Q.parseJSON,"text xml":Q.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:B(ki),ajaxTransport:B(Ji),ajax:function(t,i){function o(t,i,o,r){var c,u,x,v,g,C=i;2!==b&&(b=2,l&&clearTimeout(l),a=e,s=r||"",D.readyState=t>0?4:0,o&&(v=A(h,D,o)),t>=200&&300>t||304===t?(h.ifModified&&(g=D.getResponseHeader("Last-Modified"),g&&(Q.lastModified[n]=g),g=D.getResponseHeader("Etag"),g&&(Q.etag[n]=g)),304===t?(C="notmodified",c=!0):(c=M(h,v),C=c.state,u=c.data,x=c.error,c=!x)):(x=C,(!C||t)&&(C="error",0>t&&(t=0))),D.status=t,D.statusText=(i||C)+"",c?y.resolveWith(p,[u,C,D]):y.rejectWith(p,[D,C,x]),D.statusCode(d),d=e,m&&_.trigger("ajax"+(c?"Success":"Error"),[D,h,c?u:x]),f.fireWith(p,[D,C]),m&&(_.trigger("ajaxComplete",[D,h]),--Q.active||Q.event.trigger("ajaxStop")))}"object"==typeof t&&(i=t,t=e),i=i||{};var n,s,r,a,l,c,m,u,h=Q.ajaxSetup({},i),p=h.context||h,_=p!==h&&(p.nodeType||p instanceof Q)?Q(p):Q.event,y=Q.Deferred(),f=Q.Callbacks("once memory"),d=h.statusCode||{},x={},v={},b=0,g="canceled",D={readyState:0,setRequestHeader:function(t,e){if(!b){var i=t.toLowerCase();t=v[i]=v[i]||t,x[t]=e}return this},getAllResponseHeaders:function(){return 2===b?s:null},getResponseHeader:function(t){var i;if(2===b){if(!r)for(r={};i=Ai.exec(s);)r[i[1].toLowerCase()]=i[2];i=r[t.toLowerCase()]}return i===e?null:i},overrideMimeType:function(t){return b||(h.mimeType=t),this},abort:function(t){return t=t||g,a&&a.abort(t),o(0,t),this}};if(y.promise(D),D.success=D.done,D.error=D.fail,D.complete=f.add,D.statusCode=function(t){if(t){var e;if(2>b)for(e in t)d[e]=[d[e],t[e]];else e=t[D.status],D.always(e)}return this},h.url=((t||h.url)+"").replace(Si,"").replace(Ti,Bi[1]+"//"),h.dataTypes=Q.trim(h.dataType||"*").toLowerCase().split(ee),null==h.crossDomain&&(c=Fi.exec(h.url.toLowerCase())||!1,h.crossDomain=c&&c.join(":")+(c[3]?"":"http:"===c[1]?80:443)!==Bi.join(":")+(Bi[3]?"":"http:"===Bi[1]?80:443)),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=Q.param(h.data,h.traditional)),w(ki,h,i,D),2===b)return D;if(m=h.global,h.type=h.type.toUpperCase(),h.hasContent=!Vi.test(h.type),m&&0===Q.active++&&Q.event.trigger("ajaxStart"),!h.hasContent&&(h.data&&(h.url+=(Ii.test(h.url)?"&":"?")+h.data,delete h.data),n=h.url,h.cache===!1)){var C=Q.now(),B=h.url.replace(Pi,"$1_="+C);h.url=B+(B===h.url?(Ii.test(h.url)?"&":"?")+"_="+C:"")}(h.data&&h.hasContent&&h.contentType!==!1||i.contentType)&&D.setRequestHeader("Content-Type",h.contentType),h.ifModified&&(n=n||h.url,Q.lastModified[n]&&D.setRequestHeader("If-Modified-Since",Q.lastModified[n]),Q.etag[n]&&D.setRequestHeader("If-None-Match",Q.etag[n])),D.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Ri+"; q=0.01":""):h.accepts["*"]);for(u in h.headers)D.setRequestHeader(u,h.headers[u]);if(h.beforeSend&&(h.beforeSend.call(p,D,h)===!1||2===b))return D.abort();g="abort";for(u in{success:1,error:1,complete:1})D[u](h[u]);if(a=w(Ji,h,i,D)){D.readyState=1,m&&_.trigger("ajaxSend",[D,h]),h.async&&h.timeout>0&&(l=setTimeout(function(){D.abort("timeout")},h.timeout));try{b=1,a.send(x,o)}catch(S){if(!(2>b))throw S;o(-1,S)}}else o(-1,"No Transport");return D},active:0,lastModified:{},etag:{}});var Ei=[],Oi=/\?/,ji=/(=)\?(?=&|$)|\?\?/,zi=Q.now();Q.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ei.pop()||Q.expando+"_"+zi++;return this[t]=!0,t}}),Q.ajaxPrefilter("json jsonp",function(i,o,n){var s,r,a,l=i.data,c=i.url,m=i.jsonp!==!1,u=m&&ji.test(c),h=m&&!u&&"string"==typeof l&&!(i.contentType||"").indexOf("application/x-www-form-urlencoded")&&ji.test(l);return"jsonp"===i.dataTypes[0]||u||h?(s=i.jsonpCallback=Q.isFunction(i.jsonpCallback)?i.jsonpCallback():i.jsonpCallback,r=t[s],u?i.url=c.replace(ji,"$1"+s):h?i.data=l.replace(ji,"$1"+s):m&&(i.url+=(Oi.test(c)?"&":"?")+i.jsonp+"="+s),i.converters["script json"]=function(){return a||Q.error(s+" was not called"),a[0]},i.dataTypes[0]="json",t[s]=function(){a=arguments},n.always(function(){t[s]=r,i[s]&&(i.jsonpCallback=o.jsonpCallback,Ei.push(s)),a&&Q.isFunction(r)&&r(a[0]),a=r=e}),"script"):e}),Q.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(t){return Q.globalEval(t),t}}}),Q.ajaxPrefilter("script",function(t){t.cache===e&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),Q.ajaxTransport("script",function(t){if(t.crossDomain){var i,o=O.head||O.getElementsByTagName("head")[0]||O.documentElement;return{send:function(n,s){i=O.createElement("script"),i.async="async",t.scriptCharset&&(i.charset=t.scriptCharset),i.src=t.url,i.onload=i.onreadystatechange=function(t,n){(n||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,o&&i.parentNode&&o.removeChild(i),i=e,n||s(200,"success"))},o.insertBefore(i,o.firstChild)},abort:function(){i&&i.onload(0,1)}}}});var qi,Hi=t.ActiveXObject?function(){for(var t in qi)qi[t](0,1)}:!1,$i=0;Q.ajaxSettings.xhr=t.ActiveXObject?function(){return!this.isLocal&&V()||T()}:V,function(t){Q.extend(Q.support,{ajax:!!t,cors:!!t&&"withCredentials"in t})}(Q.ajaxSettings.xhr()),Q.support.ajax&&Q.ajaxTransport(function(i){if(!i.crossDomain||Q.support.cors){var o;return{send:function(n,s){var r,a,l=i.xhr();if(i.username?l.open(i.type,i.url,i.async,i.username,i.password):l.open(i.type,i.url,i.async),i.xhrFields)for(a in i.xhrFields)l[a]=i.xhrFields[a];i.mimeType&&l.overrideMimeType&&l.overrideMimeType(i.mimeType),i.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");try{for(a in n)l.setRequestHeader(a,n[a])}catch(c){}l.send(i.hasContent&&i.data||null),o=function(t,n){var a,c,m,u,h;try{if(o&&(n||4===l.readyState))if(o=e,r&&(l.onreadystatechange=Q.noop,Hi&&delete qi[r]),n)4!==l.readyState&&l.abort();else{a=l.status,m=l.getAllResponseHeaders(),u={},h=l.responseXML,h&&h.documentElement&&(u.xml=h);try{u.text=l.responseText}catch(t){}try{c=l.statusText}catch(p){c=""}a||!i.isLocal||i.crossDomain?1223===a&&(a=204):a=u.text?200:404}}catch(_){n||s(-1,_)}u&&s(a,c,u,m)},i.async?4===l.readyState?setTimeout(o,0):(r=++$i,Hi&&(qi||(qi={},Q(t).unload(Hi)),qi[r]=o),l.onreadystatechange=o):o()},abort:function(){o&&o(0,1)}}}});var Wi,Ui,Ki=/^(?:toggle|show|hide)$/,Xi=RegExp("^(?:([-+])=|)("+Y+")([a-z%]*)$","i"),Zi=/queueHooks$/,Qi=[G],Yi={"*":[function(t,e){var i,o,n=this.createTween(t,e),s=Xi.exec(e),r=n.cur(),a=+r||0,l=1,c=20;if(s){if(i=+s[2],o=s[3]||(Q.cssNumber[t]?"":"px"),"px"!==o&&a){a=Q.css(n.elem,t,!0)||i||1;do l=l||".5",a/=l,Q.style(n.elem,t,a+o);while(l!==(l=n.cur()/r)&&1!==l&&--c)}n.unit=o,n.start=a,n.end=s[1]?a+(s[1]+1)*i:i}return n}]};Q.Animation=Q.extend(P,{tweener:function(t,e){Q.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var i,o=0,n=t.length;n>o;o++)i=t[o],Yi[i]=Yi[i]||[],Yi[i].unshift(e)},prefilter:function(t,e){e?Qi.unshift(t):Qi.push(t)}}),Q.Tween=k,k.prototype={constructor:k,init:function(t,e,i,o,n,s){this.elem=t,this.prop=i,this.easing=n||"swing",this.options=e,this.start=this.now=this.cur(),this.end=o,this.unit=s||(Q.cssNumber[i]?"":"px")},cur:function(){var t=k.propHooks[this.prop];return t&&t.get?t.get(this):k.propHooks._default.get(this)},run:function(t){var e,i=k.propHooks[this.prop];return this.pos=e=this.options.duration?Q.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):k.propHooks._default.set(this),this}},k.prototype.init.prototype=k.prototype,k.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=Q.css(t.elem,t.prop,!1,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){Q.fx.step[t.prop]?Q.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[Q.cssProps[t.prop]]||Q.cssHooks[t.prop])?Q.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},k.propHooks.scrollTop=k.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},Q.each(["toggle","show","hide"],function(t,e){var i=Q.fn[e];Q.fn[e]=function(o,n,s){return null==o||"boolean"==typeof o||!t&&Q.isFunction(o)&&Q.isFunction(n)?i.apply(this,arguments):this.animate(J(e,!0),o,n,s)}}),Q.fn.extend({fadeTo:function(t,e,i,o){return this.filter(d).css("opacity",0).show().end().animate({opacity:e},t,i,o)},animate:function(t,e,i,o){var n=Q.isEmptyObject(t),s=Q.speed(e,i,o),r=function(){var e=P(this,Q.extend({},t),s);n&&e.stop(!0)};return n||s.queue===!1?this.each(r):this.queue(s.queue,r)},stop:function(t,i,o){var n=function(t){var e=t.stop;delete t.stop,e(o)
};return"string"!=typeof t&&(o=i,i=t,t=e),i&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,i=null!=t&&t+"queueHooks",s=Q.timers,r=Q._data(this);if(i)r[i]&&r[i].stop&&n(r[i]);else for(i in r)r[i]&&r[i].stop&&Zi.test(i)&&n(r[i]);for(i=s.length;i--;)s[i].elem!==this||null!=t&&s[i].queue!==t||(s[i].anim.stop(o),e=!1,s.splice(i,1));(e||!o)&&Q.dequeue(this,t)})}}),Q.each({slideDown:J("show"),slideUp:J("hide"),slideToggle:J("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){Q.fn[t]=function(t,i,o){return this.animate(e,t,i,o)}}),Q.speed=function(t,e,i){var o=t&&"object"==typeof t?Q.extend({},t):{complete:i||!i&&e||Q.isFunction(t)&&t,duration:t,easing:i&&e||e&&!Q.isFunction(e)&&e};return o.duration=Q.fx.off?0:"number"==typeof o.duration?o.duration:o.duration in Q.fx.speeds?Q.fx.speeds[o.duration]:Q.fx.speeds._default,(null==o.queue||o.queue===!0)&&(o.queue="fx"),o.old=o.complete,o.complete=function(){Q.isFunction(o.old)&&o.old.call(this),o.queue&&Q.dequeue(this,o.queue)},o},Q.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},Q.timers=[],Q.fx=k.prototype.init,Q.fx.tick=function(){for(var t,e=Q.timers,i=0;e.length>i;i++)t=e[i],t()||e[i]!==t||e.splice(i--,1);e.length||Q.fx.stop()},Q.fx.timer=function(t){t()&&Q.timers.push(t)&&!Ui&&(Ui=setInterval(Q.fx.tick,Q.fx.interval))},Q.fx.interval=13,Q.fx.stop=function(){clearInterval(Ui),Ui=null},Q.fx.speeds={slow:600,fast:200,_default:400},Q.fx.step={},Q.expr&&Q.expr.filters&&(Q.expr.filters.animated=function(t){return Q.grep(Q.timers,function(e){return t===e.elem}).length});var to=/^(?:body|html)$/i;Q.fn.offset=function(t){if(arguments.length)return t===e?this:this.each(function(e){Q.offset.setOffset(this,t,e)});var i,o,n,s,r,a,l,c={top:0,left:0},m=this[0],u=m&&m.ownerDocument;if(u)return(o=u.body)===m?Q.offset.bodyOffset(m):(i=u.documentElement,Q.contains(i,m)?(m.getBoundingClientRect!==e&&(c=m.getBoundingClientRect()),n=R(u),s=i.clientTop||o.clientTop||0,r=i.clientLeft||o.clientLeft||0,a=n.pageYOffset||i.scrollTop,l=n.pageXOffset||i.scrollLeft,{top:c.top+a-s,left:c.left+l-r}):c)},Q.offset={bodyOffset:function(t){var e=t.offsetTop,i=t.offsetLeft;return Q.support.doesNotIncludeMarginInBodyOffset&&(e+=parseFloat(Q.css(t,"marginTop"))||0,i+=parseFloat(Q.css(t,"marginLeft"))||0),{top:e,left:i}},setOffset:function(t,e,i){var o=Q.css(t,"position");"static"===o&&(t.style.position="relative");var n,s,r=Q(t),a=r.offset(),l=Q.css(t,"top"),c=Q.css(t,"left"),m=("absolute"===o||"fixed"===o)&&Q.inArray("auto",[l,c])>-1,u={},h={};m?(h=r.position(),n=h.top,s=h.left):(n=parseFloat(l)||0,s=parseFloat(c)||0),Q.isFunction(e)&&(e=e.call(t,i,a)),null!=e.top&&(u.top=e.top-a.top+n),null!=e.left&&(u.left=e.left-a.left+s),"using"in e?e.using.call(t,u):r.css(u)}},Q.fn.extend({position:function(){if(this[0]){var t=this[0],e=this.offsetParent(),i=this.offset(),o=to.test(e[0].nodeName)?{top:0,left:0}:e.offset();return i.top-=parseFloat(Q.css(t,"marginTop"))||0,i.left-=parseFloat(Q.css(t,"marginLeft"))||0,o.top+=parseFloat(Q.css(e[0],"borderTopWidth"))||0,o.left+=parseFloat(Q.css(e[0],"borderLeftWidth"))||0,{top:i.top-o.top,left:i.left-o.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||O.body;t&&!to.test(t.nodeName)&&"static"===Q.css(t,"position");)t=t.offsetParent;return t||O.body})}}),Q.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o=/Y/.test(i);Q.fn[t]=function(n){return Q.access(this,function(t,n,s){var r=R(t);return s===e?r?i in r?r[i]:r.document.documentElement[n]:t[n]:(r?r.scrollTo(o?Q(r).scrollLeft():s,o?s:Q(r).scrollTop()):t[n]=s,e)},t,n,arguments.length,null)}}),Q.each({Height:"height",Width:"width"},function(t,i){Q.each({padding:"inner"+t,content:i,"":"outer"+t},function(o,n){Q.fn[n]=function(n,s){var r=arguments.length&&(o||"boolean"!=typeof n),a=o||(n===!0||s===!0?"margin":"border");return Q.access(this,function(i,o,n){var s;return Q.isWindow(i)?i.document.documentElement["client"+t]:9===i.nodeType?(s=i.documentElement,Math.max(i.body["scroll"+t],s["scroll"+t],i.body["offset"+t],s["offset"+t],s["client"+t])):n===e?Q.css(i,o,n,a):Q.style(i,o,n,a)},i,r?n:e,r,null)}})}),t.jQuery=t.$=Q,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return Q})}(window),!function(t){"use strict";t(function(){t.support.transition=function(){var t=function(){var t,e=document.createElement("bootstrap"),i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(t in i)if(void 0!==e.style[t])return i[t]}();return t&&{end:t}}()})}(window.jQuery),!function(t){"use strict";var e='[data-dismiss="alert"]',i=function(i){t(i).on("click",e,this.close)};i.prototype.close=function(e){function i(){o.trigger("closed").remove()}var o,n=t(this),s=n.attr("data-target");s||(s=n.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,"")),o=t(s),e&&e.preventDefault(),o.length||(o=n.hasClass("alert")?n:n.parent()),o.trigger(e=t.Event("close")),e.isDefaultPrevented()||(o.removeClass("in"),t.support.transition&&o.hasClass("fade")?o.on(t.support.transition.end,i):i())},t.fn.alert=function(e){return this.each(function(){var o=t(this),n=o.data("alert");n||o.data("alert",n=new i(this)),"string"==typeof e&&n[e].call(o)})},t.fn.alert.Constructor=i,t(document).on("click.alert.data-api",e,i.prototype.close)}(window.jQuery),!function(t){"use strict";var e=function(e,i){this.$element=t(e),this.options=t.extend({},t.fn.button.defaults,i)};e.prototype.setState=function(t){var e="disabled",i=this.$element,o=i.data(),n=i.is("input")?"val":"html";t+="Text",o.resetText||i.data("resetText",i[n]()),i[n](o[t]||this.options[t]),setTimeout(function(){"loadingText"==t?i.addClass(e).attr(e,e):i.removeClass(e).removeAttr(e)},0)},e.prototype.toggle=function(){var t=this.$element.closest('[data-toggle="buttons-radio"]');t&&t.find(".active").removeClass("active"),this.$element.toggleClass("active")},t.fn.button=function(i){return this.each(function(){var o=t(this),n=o.data("button"),s="object"==typeof i&&i;n||o.data("button",n=new e(this,s)),"toggle"==i?n.toggle():i&&n.setState(i)})},t.fn.button.defaults={loadingText:"loading..."},t.fn.button.Constructor=e,t(document).on("click.button.data-api","[data-toggle^=button]",function(e){var i=t(e.target);i.hasClass("btn")||(i=i.closest(".btn")),i.button("toggle")})}(window.jQuery),!function(t){"use strict";var e=function(e,i){this.$element=t(e),this.options=i,this.options.slide&&this.slide(this.options.slide),"hover"==this.options.pause&&this.$element.on("mouseenter",t.proxy(this.pause,this)).on("mouseleave",t.proxy(this.cycle,this))};e.prototype={cycle:function(e){return e||(this.paused=!1),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},to:function(e){var i=this.$element.find(".item.active"),o=i.parent().children(),n=o.index(i),s=this;if(!(e>o.length-1||0>e))return this.sliding?this.$element.one("slid",function(){s.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",t(o[e]))},pause:function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition.end&&(this.$element.trigger(t.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){return this.sliding?void 0:this.slide("next")},prev:function(){return this.sliding?void 0:this.slide("prev")},slide:function(e,i){var o,n=this.$element.find(".item.active"),s=i||n[e](),r=this.interval,a="next"==e?"left":"right",l="next"==e?"first":"last",c=this;if(this.sliding=!0,r&&this.pause(),s=s.length?s:this.$element.find(".item")[l](),o=t.Event("slide",{relatedTarget:s[0]}),!s.hasClass("active")){if(t.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(o),o.isDefaultPrevented())return;s.addClass(e),s[0].offsetWidth,n.addClass(a),s.addClass(a),this.$element.one(t.support.transition.end,function(){s.removeClass([e,a].join(" ")).addClass("active"),n.removeClass(["active",a].join(" ")),c.sliding=!1,setTimeout(function(){c.$element.trigger("slid")},0)})}else{if(this.$element.trigger(o),o.isDefaultPrevented())return;n.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return r&&this.cycle(),this}}},t.fn.carousel=function(i){return this.each(function(){var o=t(this),n=o.data("carousel"),s=t.extend({},t.fn.carousel.defaults,"object"==typeof i&&i),r="string"==typeof i?i:s.slide;n||o.data("carousel",n=new e(this,s)),"number"==typeof i?n.to(i):r?n[r]():s.interval&&n.cycle()})},t.fn.carousel.defaults={interval:5e3,pause:"hover"},t.fn.carousel.Constructor=e,t(document).on("click.carousel.data-api","[data-slide]",function(e){var i,o=t(this),n=t(o.attr("data-target")||(i=o.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")),s=t.extend({},n.data(),o.data());n.carousel(s),e.preventDefault()})}(window.jQuery),!function(t){"use strict";var e=function(e,i){this.$element=t(e),this.options=t.extend({},t.fn.collapse.defaults,i),this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};e.prototype={constructor:e,dimension:function(){var t=this.$element.hasClass("width");return t?"width":"height"},show:function(){var e,i,o,n;if(!this.transitioning){if(e=this.dimension(),i=t.camelCase(["scroll",e].join("-")),o=this.$parent&&this.$parent.find("> .accordion-group > .in"),o&&o.length){if(n=o.data("collapse"),n&&n.transitioning)return;o.collapse("hide"),n||o.data("collapse",null)}this.$element[e](0),this.transition("addClass",t.Event("show"),"shown"),t.support.transition&&this.$element[e](this.$element[0][i])}},hide:function(){var e;this.transitioning||(e=this.dimension(),this.reset(this.$element[e]()),this.transition("removeClass",t.Event("hide"),"hidden"),this.$element[e](0))},reset:function(t){var e=this.dimension();return this.$element.removeClass("collapse")[e](t||"auto")[0].offsetWidth,this.$element[null!==t?"addClass":"removeClass"]("collapse"),this},transition:function(e,i,o){var n=this,s=function(){"show"==i.type&&n.reset(),n.transitioning=0,n.$element.trigger(o)};this.$element.trigger(i),i.isDefaultPrevented()||(this.transitioning=1,this.$element[e]("in"),t.support.transition&&this.$element.hasClass("collapse")?this.$element.one(t.support.transition.end,s):s())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}},t.fn.collapse=function(i){return this.each(function(){var o=t(this),n=o.data("collapse"),s="object"==typeof i&&i;n||o.data("collapse",n=new e(this,s)),"string"==typeof i&&n[i]()})},t.fn.collapse.defaults={toggle:!0},t.fn.collapse.Constructor=e,t(document).on("click.collapse.data-api","[data-toggle=collapse]",function(e){var i,o=t(this),n=o.attr("data-target")||e.preventDefault()||(i=o.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""),s=t(n).data("collapse")?"toggle":o.data();o[t(n).hasClass("in")?"addClass":"removeClass"]("collapsed"),t(n).collapse(s)})}(window.jQuery),!function(t){"use strict";function e(){t(o).each(function(){i(t(this)).removeClass("open")})}function i(e){var i,o=e.attr("data-target");return o||(o=e.attr("href"),o=o&&/#/.test(o)&&o.replace(/.*(?=#[^\s]*$)/,"")),i=t(o),i.length||(i=e.parent()),i}var o="[data-toggle=dropdown]",n=function(e){var i=t(e).on("click.dropdown.data-api",this.toggle);t("html").on("click.dropdown.data-api",function(){i.parent().removeClass("open")})};n.prototype={constructor:n,toggle:function(){var o,n,s=t(this);if(!s.is(".disabled, :disabled"))return o=i(s),n=o.hasClass("open"),e(),n||(o.toggleClass("open"),s.focus()),!1},keydown:function(e){var o,n,s,r,a;if(/(38|40|27)/.test(e.keyCode)&&(o=t(this),e.preventDefault(),e.stopPropagation(),!o.is(".disabled, :disabled"))){if(s=i(o),r=s.hasClass("open"),!r||r&&27==e.keyCode)return o.click();n=t("[role=menu] li:not(.divider) a",s),n.length&&(a=n.index(n.filter(":focus")),38==e.keyCode&&a>0&&a--,40==e.keyCode&&n.length-1>a&&a++,~a||(a=0),n.eq(a).focus())}}},t.fn.dropdown=function(e){return this.each(function(){var i=t(this),o=i.data("dropdown");o||i.data("dropdown",o=new n(this)),"string"==typeof e&&o[e].call(i)})},t.fn.dropdown.Constructor=n,t(document).on("click.dropdown.data-api touchstart.dropdown.data-api",e).on("click.dropdown touchstart.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.dropdown.data-api touchstart.dropdown.data-api",o,n.prototype.toggle).on("keydown.dropdown.data-api touchstart.dropdown.data-api",o+", [role=menu]",n.prototype.keydown)}(window.jQuery),!function(t){"use strict";var e=function(e,i){this.options=i,this.$element=t(e).delegate('[data-dismiss="modal"]',"click.dismiss.modal",t.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};e.prototype={constructor:e,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var e=this,i=t.Event("show");this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var i=t.support.transition&&e.$element.hasClass("fade");e.$element.parent().length||e.$element.appendTo(document.body),e.$element.show(),i&&e.$element[0].offsetWidth,e.$element.addClass("in").attr("aria-hidden",!1),e.enforceFocus(),i?e.$element.one(t.support.transition.end,function(){e.$element.focus().trigger("shown")}):e.$element.focus().trigger("shown")}))},hide:function(e){e&&e.preventDefault(),e=t.Event("hide"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),t(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),t.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var e=this;t(document).on("focusin.modal",function(t){e.$element[0]===t.target||e.$element.has(t.target).length||e.$element.focus()})},escape:function(){var t=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(e){27==e.which&&t.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var e=this,i=setTimeout(function(){e.$element.off(t.support.transition.end),e.hideModal()},500);this.$element.one(t.support.transition.end,function(){clearTimeout(i),e.hideModal()})},hideModal:function(){this.$element.hide().trigger("hidden"),this.backdrop()},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(e){var i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=t.support.transition&&i;this.$backdrop=t('<div class="modal-backdrop '+i+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?t.proxy(this.$element[0].focus,this.$element[0]):t.proxy(this.hide,this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),o?this.$backdrop.one(t.support.transition.end,e):e()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(t.support.transition.end,t.proxy(this.removeBackdrop,this)):this.removeBackdrop()):e&&e()}},t.fn.modal=function(i){return this.each(function(){var o=t(this),n=o.data("modal"),s=t.extend({},t.fn.modal.defaults,o.data(),"object"==typeof i&&i);n||o.data("modal",n=new e(this,s)),"string"==typeof i?n[i]():s.show&&n.show()})},t.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},t.fn.modal.Constructor=e,t(document).on("click.modal.data-api",'[data-toggle="modal"]',function(e){var i=t(this),o=i.attr("href"),n=t(i.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),s=n.data("modal")?"toggle":t.extend({remote:!/#/.test(o)&&o},n.data(),i.data());e.preventDefault(),n.modal(s).one("hide",function(){i.focus()})})}(window.jQuery),!function(t){"use strict";var e=function(t,e){this.init("tooltip",t,e)};e.prototype={constructor:e,init:function(e,i,o){var n,s;this.type=e,this.$element=t(i),this.options=this.getOptions(o),this.enabled=!0,"click"==this.options.trigger?this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this)):"manual"!=this.options.trigger&&(n="hover"==this.options.trigger?"mouseenter":"focus",s="hover"==this.options.trigger?"mouseleave":"blur",this.$element.on(n+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,t.proxy(this.leave,this))),this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(e){return e=t.extend({},t.fn[this.type].defaults,e,this.$element.data()),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},enter:function(e){var i=t(e.currentTarget)[this.type](this._options).data(this.type);return i.options.delay&&i.options.delay.show?(clearTimeout(this.timeout),i.hoverState="in",this.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show),void 0):i.show()},leave:function(e){var i=t(e.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),i.options.delay&&i.options.delay.hide?(i.hoverState="out",this.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide),void 0):i.hide()},show:function(){var t,e,i,o,n,s,r;if(this.hasContent()&&this.enabled){switch(t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),s="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,e=/in/.test(s),t.detach().css({top:0,left:0,display:"block"}).insertAfter(this.$element),i=this.getPosition(e),o=t[0].offsetWidth,n=t[0].offsetHeight,e?s.split(" ")[1]:s){case"bottom":r={top:i.top+i.height,left:i.left+i.width/2-o/2};break;case"top":r={top:i.top-n,left:i.left+i.width/2-o/2};break;case"left":r={top:i.top+i.height/2-n/2,left:i.left-o};break;case"right":r={top:i.top+i.height/2-n/2,left:i.left+i.width}}t.offset(r).addClass(s).addClass("in")}},setContent:function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},hide:function(){function e(){var e=setTimeout(function(){i.off(t.support.transition.end).detach()},500);i.one(t.support.transition.end,function(){clearTimeout(e),i.detach()})}var i=this.tip();return i.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?e():i.detach(),this},fixTitle:function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(e){return t.extend({},e?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},tip:function(){return this.$tip=this.$tip||t(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(e){var i=t(e.currentTarget)[this.type](this._options).data(this.type);i[i.tip().hasClass("in")?"hide":"show"]()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}},t.fn.tooltip=function(i){return this.each(function(){var o=t(this),n=o.data("tooltip"),s="object"==typeof i&&i;n||o.data("tooltip",n=new e(this,s)),"string"==typeof i&&n[i]()})},t.fn.tooltip.Constructor=e,t.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0,html:!1}}(window.jQuery),!function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype,{constructor:e,setContent:function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content > *")[this.options.html?"html":"text"](i),t.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var t,e=this.$element,i=this.options;return t=e.attr("data-content")||("function"==typeof i.content?i.content.call(e[0]):i.content)},tip:function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}}),t.fn.popover=function(i){return this.each(function(){var o=t(this),n=o.data("popover"),s="object"==typeof i&&i;n||o.data("popover",n=new e(this,s)),"string"==typeof i&&n[i]()})},t.fn.popover.Constructor=e,t.fn.popover.defaults=t.extend({},t.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery),!function(t){"use strict";function e(e,i){var o,n=t.proxy(this.process,this),s=t(e).is("body")?t(window):t(e);this.options=t.extend({},t.fn.scrollspy.defaults,i),this.$scrollElement=s.on("scroll.scroll-spy.data-api",n),this.selector=(this.options.target||(o=t(e).attr("href"))&&o.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=t("body"),this.refresh(),this.process()}e.prototype={constructor:e,refresh:function(){var e,i=this;this.offsets=t([]),this.targets=t([]),e=this.$body.find(this.selector).map(function(){var e=t(this),i=e.data("target")||e.attr("href"),o=/^#\w/.test(i)&&t(i);return o&&o.length&&[[o.position().top,i]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){i.offsets.push(this[0]),i.targets.push(this[1])})},process:function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,o=i-this.$scrollElement.height(),n=this.offsets,s=this.targets,r=this.activeTarget;if(e>=o)return r!=(t=s.last()[0])&&this.activate(t);for(t=n.length;t--;)r!=s[t]&&e>=n[t]&&(!n[t+1]||n[t+1]>=e)&&this.activate(s[t])},activate:function(e){var i,o;this.activeTarget=e,t(this.selector).parent(".active").removeClass("active"),o=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',i=t(o).parent("li").addClass("active"),i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate")}},t.fn.scrollspy=function(i){return this.each(function(){var o=t(this),n=o.data("scrollspy"),s="object"==typeof i&&i;n||o.data("scrollspy",n=new e(this,s)),"string"==typeof i&&n[i]()})},t.fn.scrollspy.Constructor=e,t.fn.scrollspy.defaults={offset:10},t(window).on("load",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);e.scrollspy(e.data())})})}(window.jQuery),!function(t){"use strict";var e=function(e){this.element=t(e)};e.prototype={constructor:e,show:function(){var e,i,o,n=this.element,s=n.closest("ul:not(.dropdown-menu)"),r=n.attr("data-target");r||(r=n.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),n.parent("li").hasClass("active")||(e=s.find(".active:last a")[0],o=t.Event("show",{relatedTarget:e}),n.trigger(o),o.isDefaultPrevented()||(i=t(r),this.activate(n.parent("li"),s),this.activate(i,i.parent(),function(){n.trigger({type:"shown",relatedTarget:e})})))},activate:function(e,i,o){function n(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),r?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),o&&o()}var s=i.find("> .active"),r=o&&t.support.transition&&s.hasClass("fade");r?s.one(t.support.transition.end,n):n(),s.removeClass("in")}},t.fn.tab=function(i){return this.each(function(){var o=t(this),n=o.data("tab");n||o.data("tab",n=new e(this)),"string"==typeof i&&n[i]()})},t.fn.tab.Constructor=e,t(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),t(this).tab("show")})}(window.jQuery),!function(t){"use strict";var e=function(e,i){this.$element=t(e),this.options=t.extend({},t.fn.typeahead.defaults,i),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.$menu=t(this.options.menu).appendTo("body"),this.source=this.options.source,this.shown=!1,this.listen()};e.prototype={constructor:e,select:function(){var t=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(t)).change(),this.hide()},updater:function(t){return t},show:function(){var e=t.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});return this.$menu.css({top:e.top+e.height,left:e.left}),this.$menu.show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var e;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(e=t.isFunction(this.source)?this.source(this.query,t.proxy(this.process,this)):this.source,e?this.process(e):this)},process:function(e){var i=this;return e=t.grep(e,function(t){return i.matcher(t)}),e=this.sorter(e),e.length?this.render(e.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(t){return~t.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(t){for(var e,i=[],o=[],n=[];e=t.shift();)e.toLowerCase().indexOf(this.query.toLowerCase())?~e.indexOf(this.query)?o.push(e):n.push(e):i.push(e);return i.concat(o,n)},highlighter:function(t){var e=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return t.replace(RegExp("("+e+")","ig"),function(t,e){return"<strong>"+e+"</strong>"})},render:function(e){var i=this;return e=t(e).map(function(e,o){return e=t(i.options.item).attr("data-value",o),e.find("a").html(i.highlighter(o)),e[0]}),e.first().addClass("active"),this.$menu.html(e),this},next:function(){var e=this.$menu.find(".active").removeClass("active"),i=e.next();i.length||(i=t(this.$menu.find("li")[0])),i.addClass("active")},prev:function(){var t=this.$menu.find(".active").removeClass("active"),e=t.prev();e.length||(e=this.$menu.find("li").last()),e.addClass("active")},listen:function(){this.$element.on("blur",t.proxy(this.blur,this)).on("keypress",t.proxy(this.keypress,this)).on("keyup",t.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",t.proxy(this.keydown,this)),this.$menu.on("click",t.proxy(this.click,this)).on("mouseenter","li",t.proxy(this.mouseenter,this))},eventSupported:function(t){var e=t in this.$element;return e||(this.$element.setAttribute(t,"return;"),e="function"==typeof this.$element[t]),e},move:function(t){if(this.shown){switch(t.keyCode){case 9:case 13:case 27:t.preventDefault();break;case 38:t.preventDefault(),this.prev();break;case 40:t.preventDefault(),this.next()}t.stopPropagation()}},keydown:function(e){this.suppressKeyPressRepeat=!~t.inArray(e.keyCode,[40,38,9,13,27]),this.move(e)},keypress:function(t){this.suppressKeyPressRepeat||this.move(t)},keyup:function(t){switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}t.stopPropagation(),t.preventDefault()},blur:function(){var t=this;setTimeout(function(){t.hide()},150)},click:function(t){t.stopPropagation(),t.preventDefault(),this.select()},mouseenter:function(e){this.$menu.find(".active").removeClass("active"),t(e.currentTarget).addClass("active")}},t.fn.typeahead=function(i){return this.each(function(){var o=t(this),n=o.data("typeahead"),s="object"==typeof i&&i;n||o.data("typeahead",n=new e(this,s)),"string"==typeof i&&n[i]()})},t.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},t.fn.typeahead.Constructor=e,t(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(e){var i=t(this);i.data("typeahead")||(e.preventDefault(),i.typeahead(i.data()))})}(window.jQuery),!function(t){"use strict";var e=function(e,i){this.options=t.extend({},t.fn.affix.defaults,i),this.$window=t(window).on("scroll.affix.data-api",t.proxy(this.checkPosition,this)).on("click.affix.data-api",t.proxy(function(){setTimeout(t.proxy(this.checkPosition,this),1)},this)),this.$element=t(e),this.checkPosition()};e.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e,i=t(document).height(),o=this.$window.scrollTop(),n=this.$element.offset(),s=this.options.offset,r=s.bottom,a=s.top,l="affix affix-top affix-bottom";"object"!=typeof s&&(r=a=s),"function"==typeof a&&(a=s.top()),"function"==typeof r&&(r=s.bottom()),e=null!=this.unpin&&o+this.unpin<=n.top?!1:null!=r&&n.top+this.$element.height()>=i-r?"bottom":null!=a&&a>=o?"top":!1,this.affixed!==e&&(this.affixed=e,this.unpin="bottom"==e?n.top-o:null,this.$element.removeClass(l).addClass("affix"+(e?"-"+e:"")))}},t.fn.affix=function(i){return this.each(function(){var o=t(this),n=o.data("affix"),s="object"==typeof i&&i;n||o.data("affix",n=new e(this,s)),"string"==typeof i&&n[i]()})},t.fn.affix.Constructor=e,t.fn.affix.defaults={offset:0},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var e=t(this),i=e.data();i.offset=i.offset||{},i.offsetBottom&&(i.offset.bottom=i.offsetBottom),i.offsetTop&&(i.offset.top=i.offsetTop),e.affix(i)})})}(window.jQuery),function(t){function e(e,i){function o(t){return ae.preferFlash&&ie&&!ae.ignoreFlash&&void 0!==ae.flash[t]&&ae.flash[t]}function n(t){return function(e){var i,o=this._s;return i=o&&o._a?t.call(this,e):null}}this.setupOptions={url:e||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,html5Test:/^(probably|maybe)$/i,preferFlash:!0,noSWFCache:!1},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.movieID="sm2-container",this.id=i||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20121104",this.version=null,this.movieURL=null,this.altURL=null,this.swfLoaded=!1,this.enabled=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.muted=!1,this.didFlashBlock=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={},this.html5={usingFlash:null},this.flash={},this.html5Only=!1,this.ignoreFlash=!1;var s,r,a,l,c,m,u,h,p,_,y,f,d,x,v,b,g,D,C,B,w,S,A,M,V,T,I,L,P,F,G,k,J,R,N,E,O,j,z,q,H,$,W,U,K,X,Z,Q,Y,te,ee,ie,oe,ne,se,re,ae=this,le=null,ce=null,me="soundManager",ue=navigator.userAgent,he=t,pe=""+he.location.href,_e=document,ye=[],fe=!1,de=!1,xe=!1,ve=!1,be=!1,ge=8,De=null,Ce=null,Be=!1,we=!1,Se=0,Ae=null,Me=null,Ve=Array.prototype.slice,Te=!1,Ie=ue.match(/(ipad|iphone|ipod)/i),Le=ue.match(/msie/i),Pe=ue.match(/webkit/i),Fe=ue.match(/safari/i)&&!ue.match(/chrome/i),Ge=ue.match(/opera/i),ke=ue.match(/(mobile|pre\/|xoom)/i)||Ie,Je=!pe.match(/usehtml5audio/i)&&!pe.match(/sm2\-ignorebadua/i)&&Fe&&!ue.match(/silk/i)&&ue.match(/OS X 10_6_([3-7])/i),Re=(void 0!==t.console&&void 0!==console.log,void 0!==_e.hasFocus?_e.hasFocus():null),Ne=Fe&&(void 0===_e.hasFocus||!_e.hasFocus()),Ee=!Ne,Oe=/(mp3|mp4|mpa|m4a|m4b)/i,je="about:blank",ze=_e.location?_e.location.protocol.match(/http/i):null,qe=ze?"":"http://",He=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,$e=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","m4b","mp4v","3gp","3g2"],We=RegExp("\\.("+$e.join("|")+")(\\?.*)?$","i");
this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!ze,R={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"},ke&&(ae.useHTML5Audio=!0,ae.preferFlash=!1,Ie&&(ae.ignoreFlash=!0,Te=!0)),this.hasHTML5=function(){try{return void 0!==Audio&&void 0!==(Ge&&void 0!==opera&&10>opera.version()?new Audio(null):new Audio).canPlayType}catch(t){return!1}}(),this.setup=function(t){var e=!ae.url;return void 0!==t&&xe&&Me&&ae.ok()&&(void 0!==t.flashVersion||void 0!==t.url)&&O(G("setupLate")),p(t),e&&S&&void 0!==t.url&&ae.beginDelayedInit(),S||void 0===t.url||"complete"!==_e.readyState||setTimeout(B,1),ae},this.ok=function(){return Me?xe&&!ve:ae.useHTML5Audio&&ae.hasHTML5},this.supported=this.ok,this.getMovie=function(t){return r(t)||_e[t]||he[t]},this.createSound=function(t,e){function i(){return r=N(r),ae.sounds[r.id]=new s(r),ae.soundIDs.push(r.id),ae.sounds[r.id]}var o,n,r,a=null;return xe&&ae.ok()?(void 0!==e&&(t={id:t,url:e}),r=h(t),r.url=$(r.url),j(r.id,!0)?ae.sounds[r.id]:(U(r)?(a=i(),a._setup_html5(r)):(m>8&&null===r.isMovieStar&&(r.isMovieStar=!(!r.serverURL&&(r.type?!r.type.match(He):1)&&!r.url.match(We))),r=E(r,o),a=i(),8===m?ce._createSound(r.id,r.loops||1,r.usePolicyFile):(ce._createSound(r.id,r.url,r.usePeakData,r.useWaveformData,r.useEQData,r.isMovieStar,r.isMovieStar?r.bufferTime:!1,r.loops||1,r.serverURL,r.duration||null,r.autoPlay,!0,r.autoLoad,r.usePolicyFile),r.serverURL||(a.connected=!0,r.onconnect&&r.onconnect.apply(a))),r.serverURL||!r.autoLoad&&!r.autoPlay||a.load(r)),!r.serverURL&&r.autoPlay&&a.play(),a)):(O(n),!1)},this.destroySound=function(t,e){if(!j(t))return!1;var i,o=ae.sounds[t];for(o._iO={},o.stop(),o.unload(),i=0;ae.soundIDs.length>i;i++)if(ae.soundIDs[i]===t){ae.soundIDs.splice(i,1);break}return e||o.destruct(!0),o=null,delete ae.sounds[t],!0},this.load=function(t,e){return j(t)?ae.sounds[t].load(e):!1},this.unload=function(t){return j(t)?ae.sounds[t].unload():!1},this.onPosition=function(t,e,i,o){return j(t)?ae.sounds[t].onposition(e,i,o):!1},this.onposition=this.onPosition,this.clearOnPosition=function(t,e,i){return j(t)?ae.sounds[t].clearOnPosition(e,i):!1},this.play=function(t,e){var i=!1;return xe&&ae.ok()?j(t)?ae.sounds[t].play(e):(e instanceof Object||(e={url:e}),e&&e.url&&(e.id=t,i=ae.createSound(e).play()),i):(O(me+".play(): "+G(xe?"notOK":"notReady")),i)},this.start=this.play,this.setPosition=function(t,e){return j(t)?ae.sounds[t].setPosition(e):!1},this.stop=function(t){return j(t)?ae.sounds[t].stop():!1},this.stopAll=function(){var t;for(t in ae.sounds)ae.sounds.hasOwnProperty(t)&&ae.sounds[t].stop()},this.pause=function(t){return j(t)?ae.sounds[t].pause():!1},this.pauseAll=function(){var t;for(t=ae.soundIDs.length-1;t>=0;t--)ae.sounds[ae.soundIDs[t]].pause()},this.resume=function(t){return j(t)?ae.sounds[t].resume():!1},this.resumeAll=function(){var t;for(t=ae.soundIDs.length-1;t>=0;t--)ae.sounds[ae.soundIDs[t]].resume()},this.togglePause=function(t){return j(t)?ae.sounds[t].togglePause():!1},this.setPan=function(t,e){return j(t)?ae.sounds[t].setPan(e):!1},this.setVolume=function(t,e){return j(t)?ae.sounds[t].setVolume(e):!1},this.mute=function(t){var e=0;if(t instanceof String&&(t=null),t)return j(t)?ae.sounds[t].mute():!1;for(e=ae.soundIDs.length-1;e>=0;e--)ae.sounds[ae.soundIDs[e]].mute();return ae.muted=!0,!0},this.muteAll=function(){ae.mute()},this.unmute=function(t){var e;if(t instanceof String&&(t=null),t)return j(t)?ae.sounds[t].unmute():!1;for(e=ae.soundIDs.length-1;e>=0;e--)ae.sounds[ae.soundIDs[e]].unmute();return ae.muted=!1,!0},this.unmuteAll=function(){ae.unmute()},this.toggleMute=function(t){return j(t)?ae.sounds[t].toggleMute():!1},this.getMemoryUse=function(){var t=0;return ce&&8!==m&&(t=parseInt(ce._getMemoryUse(),10)),t},this.disable=function(t){var e;if(void 0===t&&(t=!1),ve)return!1;for(ve=!0,e=ae.soundIDs.length-1;e>=0;e--)L(ae.sounds[ae.soundIDs[e]]);return u(t),te.remove(he,"load",d),!0},this.canPlayMIME=function(t){var e;return ae.hasHTML5&&(e=K({type:t})),!e&&Me&&(e=t&&ae.ok()?!!((m>8?t.match(He):null)||t.match(ae.mimePattern)):null),e},this.canPlayURL=function(t){var e;return ae.hasHTML5&&(e=K({url:t})),!e&&Me&&(e=t&&ae.ok()?!!t.match(ae.filePattern):null),e},this.canPlayLink=function(t){return void 0!==t.type&&t.type&&ae.canPlayMIME(t.type)?!0:ae.canPlayURL(t.href)},this.getSoundById=function(t){if(!t)throw Error(me+".getSoundById(): sID is null/undefined");var e=ae.sounds[t];return e},this.onready=function(t,e){var i="onready",o=!1;if("function"!=typeof t)throw G("needFunction",i);return e||(e=he),y(i,t,e),f(),o=!0,o},this.ontimeout=function(t,e){var i="ontimeout",o=!1;if("function"!=typeof t)throw G("needFunction",i);return e||(e=he),y(i,t,e),f({type:i}),o=!0,o},this._writeDebug=function(){return!0},this._wD=this._writeDebug,this._debug=function(){},this.reboot=function(){var t,e;for(t=ae.soundIDs.length-1;t>=0;t--)ae.sounds[ae.soundIDs[t]].destruct();if(ce)try{Le&&(Ce=ce.innerHTML),De=ce.parentNode.removeChild(ce)}catch(i){}Ce=De=Me=null,ae.enabled=S=xe=Be=we=fe=de=ve=ae.swfLoaded=!1,ae.soundIDs=[],ae.sounds={},ce=null;for(t in ye)if(ye.hasOwnProperty(t))for(e=ye[t].length-1;e>=0;e--)ye[t][e].fired=!1;he.setTimeout(ae.beginDelayedInit,20)},this.getMoviePercent=function(){return ce&&"PercentLoaded"in ce?ce.PercentLoaded():null},this.beginDelayedInit=function(){be=!0,B(),setTimeout(function(){return we?!1:(M(),C(),we=!0,!0)},20),x()},this.destruct=function(){ae.disable(!0)},s=function(t){var e,i,o,n,s,r,a,l,c,u=this,p=!1,_=[],y=0,f=null;c={duration:null,time:null},this.id=t.id,this.sID=this.id,this.url=t.url,this.options=h(t),this.instanceOptions=this.options,this._iO=this.instanceOptions,this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,this.id3={},this._debug=function(){},this.load=function(t){var e,i=null;if(void 0!==t?u._iO=h(t,u.options):(t=u.options,u._iO=t,f&&f!==u.url&&(u._iO.url=u.url,u.url=null)),u._iO.url||(u._iO.url=u.url),u._iO.url=$(u._iO.url),u.instanceOptions=u._iO,e=u._iO,e.url===u.url&&0!==u.readyState&&2!==u.readyState)return 3===u.readyState&&e.onload&&e.onload.apply(u,[!!u.duration]),u;if(u.loaded=!1,u.readyState=1,u.playState=0,u.id3={},U(e))i=u._setup_html5(e),i._called_load||(u._html5_canplay=!1,u.url!==e.url&&(u._a.src=e.url,u.setPosition(0)),u._a.autobuffer="auto",u._a.preload="auto",u._a._called_load=!0,e.autoPlay&&u.play());else try{u.isHTML5=!1,u._iO=E(N(e)),e=u._iO,8===m?ce._load(u.id,e.url,e.stream,e.autoPlay,e.usePolicyFile):ce._load(u.id,e.url,!!e.stream,!!e.autoPlay,e.loops||1,!!e.autoLoad,e.usePolicyFile)}catch(o){V({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}return u.url=e.url,u},this.unload=function(){return 0!==u.readyState&&(u.isHTML5?(n(),u._a&&(u._a.pause(),Z(u._a,je),f=je)):8===m?ce._unload(u.id,je):ce._unload(u.id),e()),u},this.destruct=function(t){u.isHTML5?(n(),u._a&&(u._a.pause(),Z(u._a),Te||o(),u._a._s=null,u._a=null)):(u._iO.onfailure=null,ce._destroySound(u.id)),t||ae.destroySound(u.id,!0)},this.play=function(t,e){var i,o,n,a=!0,c=null;if(e=void 0===e?!0:e,t||(t={}),u.url&&(u._iO.url=u.url),u._iO=h(u._iO,u.options),u._iO=h(t,u._iO),u._iO.url=$(u._iO.url),u.instanceOptions=u._iO,u._iO.serverURL&&!u.connected)return u.getAutoPlay()||u.setAutoPlay(!0),u;if(U(u._iO)&&(u._setup_html5(u._iO),s()),1!==u.playState||u.paused||(i=u._iO.multiShot,i||(c=u)),null!==c)return c;if(t.url&&t.url!==u.url&&u.load(u._iO),u.loaded||(0===u.readyState?(u.isHTML5?u.load(u._iO):(u._iO.autoPlay=!0,u.load(u._iO)),u.instanceOptions=u._iO):2===u.readyState&&(c=u)),null!==c)return c;if(!u.isHTML5&&9===m&&u.position>0&&u.position===u.duration&&(t.position=0),u.paused&&u.position>=0&&(!u._iO.serverURL||u.position>0))u.resume();else{if(u._iO=h(t,u._iO),null!==u._iO.from&&null!==u._iO.to&&0===u.instanceCount&&0===u.playState&&!u._iO.serverURL){if(n=function(){u._iO=h(t,u._iO),u.play(u._iO)},u.isHTML5&&!u._html5_canplay?(u.load({oncanplay:n}),c=!1):u.isHTML5||u.loaded||u.readyState&&2===u.readyState||(u.load({onload:n}),c=!1),null!==c)return c;u._iO=l()}(!u.instanceCount||u._iO.multiShotEvents||!u.isHTML5&&m>8&&!u.getAutoPlay())&&u.instanceCount++,u._iO.onposition&&0===u.playState&&r(u),u.playState=1,u.paused=!1,u.position=void 0===u._iO.position||isNaN(u._iO.position)?0:u._iO.position,u.isHTML5||(u._iO=E(N(u._iO))),u._iO.onplay&&e&&(u._iO.onplay.apply(u),p=!0),u.setVolume(u._iO.volume,!0),u.setPan(u._iO.pan,!0),u.isHTML5?(s(),o=u._setup_html5(),u.setPosition(u._iO.position),o.play()):(a=ce._start(u.id,u._iO.loops||1,9===m?u._iO.position:u._iO.position/1e3,u._iO.multiShot),9!==m||a||u._iO.onplayerror&&u._iO.onplayerror.apply(u))}return u},this.start=this.play,this.stop=function(t){var e,i=u._iO;return 1===u.playState&&(u._onbufferchange(0),u._resetOnPosition(0),u.paused=!1,u.isHTML5||(u.playState=0),a(),i.to&&u.clearOnPosition(i.to),u.isHTML5?u._a&&(e=u.position,u.setPosition(0),u.position=e,u._a.pause(),u.playState=0,u._onTimer(),n()):(ce._stop(u.id,t),i.serverURL&&u.unload()),u.instanceCount=0,u._iO={},i.onstop&&i.onstop.apply(u)),u},this.setAutoPlay=function(t){u._iO.autoPlay=t,u.isHTML5||(ce._setAutoPlay(u.id,t),t&&(u.instanceCount||1!==u.readyState||u.instanceCount++))},this.getAutoPlay=function(){return u._iO.autoPlay},this.setPosition=function(t){void 0===t&&(t=0);var e,i,o,n=u.isHTML5?Math.max(t,0):Math.min(u.duration||u._iO.duration,Math.max(t,0));if(e=u.position,u.position=n,o=u.position/1e3,u._resetOnPosition(u.position),u._iO.position=n,u.isHTML5){if(u._a&&u._html5_canplay&&u._a.currentTime!==o)try{u._a.currentTime=o,(0===u.playState||u.paused)&&u._a.pause()}catch(s){}}else i=9===m?u.position:o,u.readyState&&2!==u.readyState&&ce._setPosition(u.id,i,u.paused||!u.playState,u._iO.multiShot);return u.isHTML5&&u.paused&&u._onTimer(!0),u},this.pause=function(t){return u.paused||0===u.playState&&1!==u.readyState?u:(u.paused=!0,u.isHTML5?(u._setup_html5().pause(),n()):(t||void 0===t)&&ce._pause(u.id,u._iO.multiShot),u._iO.onpause&&u._iO.onpause.apply(u),u)},this.resume=function(){var t=u._iO;return u.paused?(u.paused=!1,u.playState=1,u.isHTML5?(u._setup_html5().play(),s()):(t.isMovieStar&&!t.serverURL&&u.setPosition(u.position),ce._pause(u.id,t.multiShot)),!p&&t.onplay?(t.onplay.apply(u),p=!0):t.onresume&&t.onresume.apply(u),u):u},this.togglePause=function(){return 0===u.playState?(u.play({position:9!==m||u.isHTML5?u.position/1e3:u.position}),u):(u.paused?u.resume():u.pause(),u)},this.setPan=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=!1),u.isHTML5||ce._setPan(u.id,t),u._iO.pan=t,e||(u.pan=t,u.options.pan=t),u},this.setVolume=function(t,e){return void 0===t&&(t=100),void 0===e&&(e=!1),u.isHTML5?u._a&&(u._a.volume=Math.max(0,Math.min(1,t/100))):ce._setVolume(u.id,ae.muted&&!u.muted||u.muted?0:t),u._iO.volume=t,e||(u.volume=t,u.options.volume=t),u},this.mute=function(){return u.muted=!0,u.isHTML5?u._a&&(u._a.muted=!0):ce._setVolume(u.id,0),u},this.unmute=function(){u.muted=!1;var t=void 0!==u._iO.volume;return u.isHTML5?u._a&&(u._a.muted=!1):ce._setVolume(u.id,t?u._iO.volume:u.options.volume),u},this.toggleMute=function(){return u.muted?u.unmute():u.mute()},this.onPosition=function(t,e,i){return _.push({position:parseInt(t,10),method:e,scope:void 0!==i?i:u,fired:!1}),u},this.onposition=this.onPosition,this.clearOnPosition=function(t,e){var i;if(t=parseInt(t,10),isNaN(t))return!1;for(i=0;_.length>i;i++)t===_[i].position&&(e&&e!==_[i].method||(_[i].fired&&y--,_.splice(i,1)))},this._processOnPosition=function(){var t,e,i=_.length;if(!i||!u.playState||y>=i)return!1;for(t=i-1;t>=0;t--)e=_[t],!e.fired&&u.position>=e.position&&(e.fired=!0,y++,e.method.apply(e.scope,[e.position]));return!0},this._resetOnPosition=function(t){var e,i,o=_.length;if(!o)return!1;for(e=o-1;e>=0;e--)i=_[e],i.fired&&i.position>=t&&(i.fired=!1,y--);return!0},l=function(){var t,e,i=u._iO,o=i.from,n=i.to;return e=function(){u.clearOnPosition(n,e),u.stop()},t=function(){null===n||isNaN(n)||u.onPosition(n,e)},null===o||isNaN(o)||(i.position=o,i.multiShot=!1,t()),i},r=function(){var t,e=u._iO.onposition;if(e)for(t in e)e.hasOwnProperty(t)&&u.onPosition(parseInt(t,10),e[t])},a=function(){var t,e=u._iO.onposition;if(e)for(t in e)e.hasOwnProperty(t)&&u.clearOnPosition(parseInt(t,10))},s=function(){u.isHTML5&&z(u)},n=function(){u.isHTML5&&q(u)},e=function(t){t||(_=[],y=0),p=!1,u._hasTimer=null,u._a=null,u._html5_canplay=!1,u.bytesLoaded=null,u.bytesTotal=null,u.duration=u._iO&&u._iO.duration?u._iO.duration:null,u.durationEstimate=null,u.buffered=[],u.eqData=[],u.eqData.left=[],u.eqData.right=[],u.failures=0,u.isBuffering=!1,u.instanceOptions={},u.instanceCount=0,u.loaded=!1,u.metadata={},u.readyState=0,u.muted=!1,u.paused=!1,u.peakData={left:0,right:0},u.waveformData={left:[],right:[]},u.playState=0,u.position=null,u.id3={}},e(),this._onTimer=function(t){var e,i,o=!1,n={};return u._hasTimer||t?(u._a&&(t||(u.playState>0||1===u.readyState)&&!u.paused)&&(e=u._get_html5_duration(),e!==c.duration&&(c.duration=e,u.duration=e,o=!0),u.durationEstimate=u.duration,i=1e3*u._a.currentTime||0,i!==c.time&&(c.time=i,o=!0),(o||t)&&u._whileplaying(i,n,n,n,n)),o):void 0},this._get_html5_duration=function(){var t=u._iO,e=u._a&&u._a.duration?1e3*u._a.duration:t&&t.duration?t.duration:null,i=e&&!isNaN(e)&&1/0!==e?e:null;return i},this._apply_loop=function(t,e){t.loop=e>1?"loop":""},this._setup_html5=function(t){var o,n=h(u._iO,t),s=decodeURI,r=Te?le:u._a,a=s(n.url);if(Te?a===ee&&(o=!0):a===f&&(o=!0),r){if(r._s)if(Te)r._s&&r._s.playState&&!o&&r._s.stop();else if(!Te&&a===s(f))return u._apply_loop(r,n.loops),r;o||(e(!1),r.src=n.url,u.url=n.url,f=n.url,ee=n.url,r._called_load=!1)}else u._a=n.autoLoad||n.autoPlay?new Audio(n.url):Ge&&10>opera.version()?new Audio(null):new Audio,r=u._a,r._called_load=!1,Te&&(le=r);return u.isHTML5=!0,u._a=r,r._s=u,i(),u._apply_loop(r,n.loops),n.autoLoad||n.autoPlay?u.load():(r.autobuffer=!1,r.preload="auto"),r},i=function(){function t(t,e,i){return u._a?u._a.addEventListener(t,e,i||!1):null}if(u._a._added_events)return!1;var e;u._a._added_events=!0;for(e in se)se.hasOwnProperty(e)&&t(e,se[e]);return!0},o=function(){function t(t,e,i){return u._a?u._a.removeEventListener(t,e,i||!1):null}var e;u._a._added_events=!1;for(e in se)se.hasOwnProperty(e)&&t(e,se[e])},this._onload=function(t){var e=!!t||!u.isHTML5&&8===m&&u.duration;return u.loaded=e,u.readyState=e?3:2,u._onbufferchange(0),u._iO.onload&&u._iO.onload.apply(u,[e]),!0},this._onbufferchange=function(t){return 0===u.playState?!1:t&&u.isBuffering||!t&&!u.isBuffering?!1:(u.isBuffering=1===t,u._iO.onbufferchange&&u._iO.onbufferchange.apply(u),!0)},this._onsuspend=function(){return u._iO.onsuspend&&u._iO.onsuspend.apply(u),!0},this._onfailure=function(t,e,i){u.failures++,u._iO.onfailure&&1===u.failures&&u._iO.onfailure(u,t,e,i)},this._onfinish=function(){var t=u._iO.onfinish;u._onbufferchange(0),u._resetOnPosition(0),u.instanceCount&&(u.instanceCount--,u.instanceCount||(a(),u.playState=0,u.paused=!1,u.instanceCount=0,u.instanceOptions={},u._iO={},n(),u.isHTML5&&(u.position=0)),(!u.instanceCount||u._iO.multiShotEvents)&&t&&t.apply(u))},this._whileloading=function(t,e,i,o){var n=u._iO;u.bytesLoaded=t,u.bytesTotal=e,u.duration=Math.floor(i),u.bufferLength=o,u.durationEstimate=u.isHTML5||n.isMovieStar?u.duration:n.duration?u.duration>n.duration?u.duration:n.duration:parseInt(u.bytesTotal/u.bytesLoaded*u.duration,10),u.isHTML5||(u.buffered=[{start:0,end:u.duration}]),(3!==u.readyState||u.isHTML5)&&n.whileloading&&n.whileloading.apply(u)},this._whileplaying=function(t,e,i,o,n){var s,r=u._iO;return isNaN(t)||null===t?!1:(u.position=Math.max(0,t),u._processOnPosition(),!u.isHTML5&&m>8&&(r.usePeakData&&void 0!==e&&e&&(u.peakData={left:e.leftPeak,right:e.rightPeak}),r.useWaveformData&&void 0!==i&&i&&(u.waveformData={left:i.split(","),right:o.split(",")}),r.useEQData&&void 0!==n&&n&&n.leftEQ&&(s=n.leftEQ.split(","),u.eqData=s,u.eqData.left=s,void 0!==n.rightEQ&&n.rightEQ&&(u.eqData.right=n.rightEQ.split(",")))),1===u.playState&&(u.isHTML5||8!==m||u.position||!u.isBuffering||u._onbufferchange(0),r.whileplaying&&r.whileplaying.apply(u)),!0)},this._oncaptiondata=function(t){u.captiondata=t,u._iO.oncaptiondata&&u._iO.oncaptiondata.apply(u,[t])},this._onmetadata=function(t,e){var i,o,n={};for(i=0,o=t.length;o>i;i++)n[t[i]]=e[i];u.metadata=n,u._iO.onmetadata&&u._iO.onmetadata.apply(u)},this._onid3=function(t,e){var i,o,n=[];for(i=0,o=t.length;o>i;i++)n[t[i]]=e[i];u.id3=h(u.id3,n),u._iO.onid3&&u._iO.onid3.apply(u)},this._onconnect=function(t){t=1===t,u.connected=t,t&&(u.failures=0,j(u.id)&&(u.getAutoPlay()?u.play(void 0,u.getAutoPlay()):u._iO.autoLoad&&u.load()),u._iO.onconnect&&u._iO.onconnect.apply(u,[t]))},this._ondataerror=function(){u.playState>0&&u._iO.ondataerror&&u._iO.ondataerror.apply(u)}},A=function(){return _e.body||_e._docElement||_e.getElementsByTagName("div")[0]},r=function(t){return _e.getElementById(t)},h=function(t,e){var i,o,n=t||{};i=void 0===e?ae.defaultOptions:e;for(o in i)i.hasOwnProperty(o)&&void 0===n[o]&&(n[o]="object"!=typeof i[o]||null===i[o]?i[o]:h(n[o],i[o]));return n},_={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1},p=function(t,e){var i,o=!0,n=void 0!==e,s=ae.setupOptions,r=_;for(i in t)if(t.hasOwnProperty(i))if("object"!=typeof t[i]||null===t[i]||t[i]instanceof Array)n&&void 0!==r[e]?ae[e][i]=t[i]:void 0!==s[i]?(ae.setupOptions[i]=t[i],ae[i]=t[i]):void 0===r[i]?(O(G(void 0===ae[i]?"setupUndef":"setupError",i),2),o=!1):ae[i]instanceof Function?ae[i].apply(ae,t[i]instanceof Array?t[i]:[t[i]]):ae[i]=t[i];else{if(void 0!==r[i])return p(t[i],i);O(G(void 0===ae[i]?"setupUndef":"setupError",i),2),o=!1}return o},te=function(){function t(t){var e=Ve.call(t),i=e.length;return n?(e[1]="on"+e[1],i>3&&e.pop()):3===i&&e.push(!1),e}function e(t,e){var i=t.shift(),o=[s[e]];n?i[o](t[0],t[1]):i[o].apply(i,t)}function i(){e(t(arguments),"add")}function o(){e(t(arguments),"remove")}var n=he.attachEvent,s={add:n?"attachEvent":"addEventListener",remove:n?"detachEvent":"removeEventListener"};return{add:i,remove:o}}(),se={abort:n(function(){}),canplay:n(function(){var t,e=this._s;if(e._html5_canplay)return!0;if(e._html5_canplay=!0,e._onbufferchange(0),t=void 0===e._iO.position||isNaN(e._iO.position)?null:e._iO.position/1e3,e.position&&this.currentTime!==t)try{this.currentTime=t}catch(i){}e._iO._oncanplay&&e._iO._oncanplay()}),canplaythrough:n(function(){var t=this._s;t.loaded||(t._onbufferchange(0),t._whileloading(t.bytesLoaded,t.bytesTotal,t._get_html5_duration()),t._onload(!0))}),ended:n(function(){var t=this._s;t._onfinish()}),error:n(function(){this._s._onload(!1)}),loadeddata:n(function(){var t=this._s;t._loaded||Fe||(t.duration=t._get_html5_duration())}),loadedmetadata:n(function(){}),loadstart:n(function(){this._s._onbufferchange(1)}),play:n(function(){this._s._onbufferchange(0)}),playing:n(function(){this._s._onbufferchange(0)}),progress:n(function(t){var e,i,o=this._s,n=0,s=("progress"===t.type,t.target.buffered),r=t.loaded||0,a=t.total||1,l=1e3;if(o.buffered=[],s&&s.length){for(e=0,i=s.length;i>e;e++)o.buffered.push({start:s.start(e)*l,end:s.end(e)*l});n=(s.end(0)-s.start(0))*l,r=n/(t.target.duration*l)}isNaN(r)||(o._onbufferchange(0),o._whileloading(r,a,o._get_html5_duration()),r&&a&&r===a&&se.canplaythrough.call(this,t))}),ratechange:n(function(){}),suspend:n(function(t){var e=this._s;se.progress.call(this,t),e._onsuspend()}),stalled:n(function(){}),timeupdate:n(function(){this._s._onTimer()}),waiting:n(function(){var t=this._s;t._onbufferchange(1)})},U=function(t){var e;return e=t.serverURL||t.type&&o(t.type)?!1:t.type?K({type:t.type}):K({url:t.url})||ae.html5Only},Z=function(t,e){t&&(t.src=e)},K=function(t){if(!ae.useHTML5Audio||!ae.hasHTML5)return!1;var e,i,n,s,r=t.url||null,a=t.type||null,l=ae.audioFormats;if(a&&void 0!==ae.html5[a])return ae.html5[a]&&!o(a);if(!X){X=[];for(s in l)l.hasOwnProperty(s)&&(X.push(s),l[s].related&&(X=X.concat(l[s].related)));X=RegExp("\\.("+X.join("|")+")(\\?.*)?$","i")}return n=r?r.toLowerCase().match(X):null,n&&n.length?n=n[1]:a?(i=a.indexOf(";"),n=(-1!==i?a.substr(0,i):a).substr(6)):e=!1,n&&void 0!==ae.html5[n]?e=ae.html5[n]&&!o(n):(a="audio/"+n,e=ae.html5.canPlayType({type:a}),ae.html5[n]=e,e=e&&ae.html5[a]&&!o(a)),e},Y=function(){function t(t){var e,i,o,n=!1,r=!1;if(!s||"function"!=typeof s.canPlayType)return n;if(t instanceof Array){for(i=0,o=t.length;o>i;i++)(ae.html5[t[i]]||s.canPlayType(t[i]).match(ae.html5Test))&&(r=!0,ae.html5[t[i]]=!0,ae.flash[t[i]]=!!t[i].match(Oe));n=r}else e=s&&"function"==typeof s.canPlayType?s.canPlayType(t):!1,n=!(!e||!e.match(ae.html5Test));return n}if(!ae.useHTML5Audio||!ae.hasHTML5)return!1;var e,i,o,n,s=void 0!==Audio?Ge&&10>opera.version()?new Audio(null):new Audio:null,r={};o=ae.audioFormats;for(e in o)if(o.hasOwnProperty(e)&&(i="audio/"+e,r[e]=t(o[e].type),r[i]=r[e],e.match(Oe)?(ae.flash[e]=!0,ae.flash[i]=!0):(ae.flash[e]=!1,ae.flash[i]=!1),o[e]&&o[e].related))for(n=o[e].related.length-1;n>=0;n--)r["audio/"+o[e].related[n]]=r[e],ae.html5[o[e].related[n]]=r[e],ae.flash[o[e].related[n]]=r[e];return r.canPlayType=s?t:null,ae.html5=h(ae.html5,r),!0},D={},G=function(){},N=function(t){return 8===m&&t.loops>1&&t.stream&&(t.stream=!1),t},E=function(t){return t&&!t.usePolicyFile&&(t.onid3||t.usePeakData||t.useWaveformData||t.useEQData)&&(t.usePolicyFile=!0),t},O=function(){},a=function(){return!1},L=function(t){var e;for(e in t)t.hasOwnProperty(e)&&"function"==typeof t[e]&&(t[e]=a);e=null},P=function(t){void 0===t&&(t=!1),(ve||t)&&ae.disable(t)},F=function(t){var e,i=null;if(t)if(t.match(/\.swf(\?.*)?$/i)){if(i=t.substr(t.toLowerCase().lastIndexOf(".swf?")+4))return t}else t.lastIndexOf("/")!==t.length-1&&(t+="/");return e=(t&&-1!==t.lastIndexOf("/")?t.substr(0,t.lastIndexOf("/")+1):"./")+ae.movieURL,ae.noSWFCache&&(e+="?ts="+(new Date).getTime()),e},b=function(){m=parseInt(ae.flashVersion,10),8!==m&&9!==m&&(ae.flashVersion=m=ge);var t=ae.debugMode||ae.debugFlash?"_debug.swf":".swf";ae.useHTML5Audio&&!ae.html5Only&&ae.audioFormats.mp4.required&&9>m&&(ae.flashVersion=m=9),ae.version=ae.versionNumber+(ae.html5Only?" (HTML5-only mode)":9===m?" (AS3/Flash 9)":" (AS2/Flash 8)"),m>8?(ae.defaultOptions=h(ae.defaultOptions,ae.flash9Options),ae.features.buffering=!0,ae.defaultOptions=h(ae.defaultOptions,ae.movieStarOptions),ae.filePatterns.flash9=RegExp("\\.(mp3|"+$e.join("|")+")(\\?.*)?$","i"),ae.features.movieStar=!0):ae.features.movieStar=!1,ae.filePattern=ae.filePatterns[8!==m?"flash9":"flash8"],ae.movieURL=(8===m?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",t),ae.features.peakData=ae.features.waveformData=ae.features.eqData=m>8},T=function(t,e){return ce?(ce._setPolling(t,e),void 0):!1},I=function(){ae.debugURLParam.test(pe)&&(ae.debugMode=!0)},j=this.getSoundById,J=function(){var t=[];return ae.debugMode&&t.push(R.sm2Debug),ae.debugFlash&&t.push(R.flashDebug),ae.useHighPerformance&&t.push(R.highPerf),t.join(" ")},k=function(){var t=(G("fbHandler"),ae.getMoviePercent()),e=R,i={type:"FLASHBLOCK"};return ae.html5Only?!1:(ae.ok()?ae.oMC&&(ae.oMC.className=[J(),e.swfDefault,e.swfLoaded+(ae.didFlashBlock?" "+e.swfUnblocked:"")].join(" ")):(Me&&(ae.oMC.className=J()+" "+e.swfDefault+" "+(null===t?e.swfTimedout:e.swfError)),ae.didFlashBlock=!0,f({type:"ontimeout",ignoreInit:!0,error:i}),V(i)),void 0)},y=function(t,e,i){void 0===ye[t]&&(ye[t]=[]),ye[t].push({method:e,scope:i||null,fired:!1})},f=function(t){if(t||(t={type:ae.ok()?"onready":"ontimeout"}),!xe&&t&&!t.ignoreInit)return!1;if("ontimeout"===t.type&&(ae.ok()||ve&&!t.ignoreInit))return!1;var e,i,o={success:t&&t.ignoreInit?ae.ok():!ve},n=t&&t.type?ye[t.type]||[]:[],s=[],r=[o],a=Me&&ae.useFlashBlock&&!ae.ok();for(t.error&&(r[0].error=t.error),e=0,i=n.length;i>e;e++)n[e].fired!==!0&&s.push(n[e]);if(s.length)for(e=0,i=s.length;i>e;e++)s[e].scope?s[e].method.apply(s[e].scope,r):s[e].method.apply(this,r),a||(s[e].fired=!0);return!0},d=function(){he.setTimeout(function(){ae.useFlashBlock&&k(),f(),"function"==typeof ae.onload&&ae.onload.apply(he),ae.waitForWindowLoad&&te.add(he,"load",d)},1)},oe=function(){if(void 0!==ie)return ie;var t,e,i,o=!1,n=navigator,s=n.plugins,r=he.ActiveXObject;if(s&&s.length)e="application/x-shockwave-flash",i=n.mimeTypes,i&&i[e]&&i[e].enabledPlugin&&i[e].enabledPlugin.description&&(o=!0);else if(void 0!==r&&!ue.match(/MSAppHost/i)){try{t=new r("ShockwaveFlash.ShockwaveFlash")}catch(a){}o=!!t,t=null}return ie=o,o},W=function(){var t,e,i=!0,o=ae.audioFormats,n=Ie&&!!ue.match(/os (1|2|3_0|3_1)/i);if(n?(ae.hasHTML5=!1,ae.html5Only=!0,ae.oMC&&(ae.oMC.style.display="none"),i=!1):ae.useHTML5Audio&&(ae.html5&&ae.html5.canPlayType||(ae.hasHTML5=!1)),ae.useHTML5Audio&&ae.hasHTML5)for(e in o)o.hasOwnProperty(e)&&(o[e].required&&!ae.html5.canPlayType(o[e].type)||ae.preferFlash&&(ae.flash[e]||ae.flash[o[e].type]))&&(t=!0);return ae.ignoreFlash&&(t=!1),ae.html5Only=ae.hasHTML5&&ae.useHTML5Audio&&!t,!ae.html5Only},$=function(t){var e,i,o,n=0;if(t instanceof Array){for(e=0,i=t.length;i>e;e++)if(t[e]instanceof Object){if(ae.canPlayMIME(t[e].type)){n=e;break}}else if(ae.canPlayURL(t[e])){n=e;break}t[n].url&&(t[n]=t[n].url),o=t[n]}else o=t;return o},z=function(t){t._hasTimer||(t._hasTimer=!0,!ke&&ae.html5PollingInterval&&(null===Ae&&0===Se&&(Ae=he.setInterval(H,ae.html5PollingInterval)),Se++))},q=function(t){t._hasTimer&&(t._hasTimer=!1,!ke&&ae.html5PollingInterval&&Se--)},H=function(){var t;if(null!==Ae&&!Se)return he.clearInterval(Ae),Ae=null,!1;for(t=ae.soundIDs.length-1;t>=0;t--)ae.sounds[ae.soundIDs[t]].isHTML5&&ae.sounds[ae.soundIDs[t]]._hasTimer&&ae.sounds[ae.soundIDs[t]]._onTimer()},V=function(t){t=void 0!==t?t:{},"function"==typeof ae.onerror&&ae.onerror.apply(he,[{type:void 0!==t.type?t.type:null}]),void 0!==t.fatal&&t.fatal&&ae.disable()},ne=function(){if(!Je||!oe())return!1;var t,e,i=ae.audioFormats;for(e in i)if(i.hasOwnProperty(e)&&("mp3"===e||"mp4"===e)&&(ae.html5[e]=!1,i[e]&&i[e].related))for(t=i[e].related.length-1;t>=0;t--)ae.html5[i[e].related[t]]=!1},this._setSandboxType=function(){},this._externalInterfaceOK=function(){return ae.swfLoaded?!1:((new Date).getTime(),ae.swfLoaded=!0,Ne=!1,Je&&ne(),setTimeout(c,Le?100:1),void 0)},M=function(t,e){function i(){}function o(t,e){return'<param name="'+t+'" value="'+e+'" />'}if(fe&&de)return!1;if(ae.html5Only)return b(),i(),ae.oMC=r(ae.movieID),c(),fe=!0,de=!0,!1;var n,s,a,l,m,u,h,p,_=e||ae.url,y=ae.altURL||_,f="JS/Flash audio component (SoundManager 2)",d=A(),x=J(),v=null,g=_e.getElementsByTagName("html")[0];if(v=g&&g.dir&&g.dir.match(/rtl/i),t=void 0===t?ae.id:t,b(),ae.url=F(ze?_:y),e=ae.url,ae.wmode=!ae.wmode&&ae.useHighPerformance?"transparent":ae.wmode,null!==ae.wmode&&(ue.match(/msie 8/i)||!Le&&!ae.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(ae.wmode=null),n={name:t,id:t,src:e,quality:"high",allowScriptAccess:ae.allowScriptAccess,bgcolor:ae.bgColor,pluginspage:qe+"www.macromedia.com/go/getflashplayer",title:f,type:"application/x-shockwave-flash",wmode:ae.wmode,hasPriority:"true"},ae.debugFlash&&(n.FlashVars="debug=1"),ae.wmode||delete n.wmode,Le)s=_e.createElement("div"),l=['<object id="'+t+'" data="'+e+'" type="'+n.type+'" title="'+n.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+qe+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',o("movie",e),o("AllowScriptAccess",ae.allowScriptAccess),o("quality",n.quality),ae.wmode?o("wmode",ae.wmode):"",o("bgcolor",ae.bgColor),o("hasPriority","true"),ae.debugFlash?o("FlashVars",n.FlashVars):"","</object>"].join("");else{s=_e.createElement("embed");for(a in n)n.hasOwnProperty(a)&&s.setAttribute(a,n[a])}if(I(),x=J(),d=A())if(ae.oMC=r(ae.movieID)||_e.createElement("div"),ae.oMC.id)p=ae.oMC.className,ae.oMC.className=(p?p+" ":R.swfDefault)+(x?" "+x:""),ae.oMC.appendChild(s),Le&&(m=ae.oMC.appendChild(_e.createElement("div")),m.className=R.swfBox,m.innerHTML=l),de=!0;else{if(ae.oMC.id=ae.movieID,ae.oMC.className=R.swfDefault+" "+x,u=null,m=null,ae.useFlashBlock||(ae.useHighPerformance?u={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(u={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},v&&(u.left=Math.abs(parseInt(u.left,10))+"px"))),Pe&&(ae.oMC.style.zIndex=1e4),!ae.debugFlash)for(h in u)u.hasOwnProperty(h)&&(ae.oMC.style[h]=u[h]);try{Le||ae.oMC.appendChild(s),d.appendChild(ae.oMC),Le&&(m=ae.oMC.appendChild(_e.createElement("div")),m.className=R.swfBox,m.innerHTML=l),de=!0}catch(D){throw Error(G("domError")+" \n"+(""+D))}}return fe=!0,i(),!0},C=function(){return ae.html5Only?(M(),!1):ce?!1:ae.url?(ce=ae.getMovie(ae.id),ce||(De?(Le?ae.oMC.innerHTML=Ce:ae.oMC.appendChild(De),De=null,fe=!0):M(ae.id,ae.url),ce=ae.getMovie(ae.id)),"function"==typeof ae.oninitmovie&&setTimeout(ae.oninitmovie,1),!0):!1},x=function(){setTimeout(v,1e3)},v=function(){var t,e=!1;return ae.url?Be?!1:(Be=!0,te.remove(he,"load",x),Ne&&!Re?!1:(xe||(t=ae.getMoviePercent(),t>0&&100>t&&(e=!0)),setTimeout(function(){return t=ae.getMoviePercent(),e?(Be=!1,he.setTimeout(x,1),!1):(!xe&&Ee&&(null===t?ae.useFlashBlock||0===ae.flashLoadTimeout?ae.useFlashBlock&&k():P(!0):0===ae.flashLoadTimeout||P(!0)),void 0)},ae.flashLoadTimeout),void 0)):!1},g=function(){function t(){te.remove(he,"focus",g)}return Re||!Ne?(t(),!0):(Ee=!0,Re=!0,Be=!1,x(),t(),!0)},re=function(){},u=function(t){if(xe)return!1;if(ae.html5Only)return xe=!0,d(),!0;var e,i=ae.useFlashBlock&&ae.flashLoadTimeout&&!ae.getMoviePercent(),o=!0;return i||(xe=!0,ve&&(e={type:!ie&&Me?"NO_FLASH":"INIT_TIMEOUT"})),(ve||t)&&(ae.useFlashBlock&&ae.oMC&&(ae.oMC.className=J()+" "+(null===ae.getMoviePercent()?R.swfTimedout:R.swfError)),f({type:"ontimeout",error:e,ignoreInit:!0}),V(e),o=!1),ve||(ae.waitForWindowLoad&&!be?te.add(he,"load",d):d()),o},l=function(){var t,e=ae.setupOptions;for(t in e)e.hasOwnProperty(t)&&(void 0===ae[t]?ae[t]=e[t]:ae[t]!==e[t]&&(ae.setupOptions[t]=ae[t]))},c=function(){function t(){te.remove(he,"load",ae.beginDelayedInit)}if(xe)return!1;if(ae.html5Only)return xe||(t(),ae.enabled=!0,u()),!0;C();try{ce._externalInterfaceTest(!1),T(!0,ae.flashPollingInterval||(ae.useHighPerformance?10:50)),ae.debugMode||ce._disableDebug(),ae.enabled=!0,ae.html5Only||te.add(he,"unload",a)}catch(e){return V({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),P(!0),u(),!1}return u(),t(),!0},B=function(){return S?!1:(S=!0,l(),I(),!ie&&ae.hasHTML5&&ae.setup({useHTML5Audio:!0,preferFlash:!1}),Y(),ae.html5.usingFlash=W(),Me=ae.html5.usingFlash,re(),!ie&&Me&&ae.setup({flashLoadTimeout:1}),_e.removeEventListener&&_e.removeEventListener("DOMContentLoaded",B,!1),C(),!0)},Q=function(){return"complete"===_e.readyState&&(B(),_e.detachEvent("onreadystatechange",Q)),!0},w=function(){be=!0,te.remove(he,"load",w)},oe(),te.add(he,"focus",g),te.add(he,"load",x),te.add(he,"load",w),_e.addEventListener?_e.addEventListener("DOMContentLoaded",B,!1):_e.attachEvent?_e.attachEvent("onreadystatechange",Q):V({type:"NO_DOM2_EVENTS",fatal:!0})}var i=null;void 0!==t.SM2_DEFER&&SM2_DEFER||(i=new e),t.SoundManager=e,t.soundManager=i}(window);